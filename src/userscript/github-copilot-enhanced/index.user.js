// ==UserScript==
// @name         Github Copilot Enhanced
// @name:en      Github Copilot Enhanced
// @name:zh-CN   Github Copilot 增强
// @namespace    https://github.com/ZiuChen/userscript
// @version      1.1.0
// @description  Enhance the GitHub Copilot (Web) experience with support for locally saving chat history long-term, real-time search of past conversations, automatic scheduled synchronization of chat records to IndexedDB and WebDAV, and seamless interception and merging of requests.
// @description:en Enhance the GitHub Copilot (Web) experience with support for locally saving chat history long-term, real-time search of past conversations, automatic scheduled synchronization of chat records to IndexedDB and WebDAV, and seamless interception and merging of requests.
// @description:zh-CN 增强 GitHub Copilot (Web) 的使用体验，支持本地长期保存聊天记录、实时搜索历史聊天记录、支持自动定时同步聊天记录到 IndexedDB 与 WebDAV、无缝拦截和合并请求
// @author       ZiuChen
// @match        https://github.com/copilot*
// @icon         data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik04LjY2MiAxNC40ODRhMS4wMDEgMS4wMDEgMCAxIDEgMi4wMDMgMHYxLjk5N2ExLjAwMSAxLjAwMSAwIDEgMS0yLjAwMyAwem02LjY3NSAwYTEuMDAxIDEuMDAxIDAgMSAwLTIuMDAzIDB2MS45OTdhMS4wMDEgMS4wMDEgMCAxIDAgMi4wMDMgMHpNMTEuOTk5IDQuMDI4Yy0uODQ1LTEuMjE5LTIuNTk4LTEuMzEtMy45NDUtMS4xODhjLTEuNTQzLjE1NC0yLjg0My42ODUtMy41NzQgMS40NjRjLTEuMjY4IDEuMzg2LTEuMzI2IDQuMjkxLS43MTUgNS44OWMtLjA2MS4yNzQtLjEyLjU1MS0uMTYyLjg0NWMtMS4xMy4yOTctMi4yODMgMS44OTgtMi4yODMgMy4wNDN2Mi4xNjJjMCAuNi4yOCAxLjE0OC43NzUgMS41MjJDNC45MTkgMTkuODY0IDguNDM5IDIxLjQ5IDEyIDIxLjQ5czcuMDgtMS42MjYgOS45MDQtMy43MjRhMS44OSAxLjg5IDAgMCAwIC43NzUtMS41MjF2LTIuMTYzYzAtMS4xNDUtMS4xNTMtMi43NDYtMi4yODMtMy4wNDNjLS4wNDItLjI5NC0uMS0uNTctLjE2Mi0uODQ0Yy42MTEtMS42LjU1Mi00LjUwNS0uNzE1LTUuODljLS43MzEtLjc4LTIuMDMtMS4zMS0zLjU3NC0xLjQ2NWMtMS4zNDctLjEyMS0zLjEtLjAzLTMuOTQ2IDEuMTg4bTYuNjc1IDEzLjQ2Yy0xLjUzNS44NTQtNC4wODUgMi02LjY3NCAycy01LjE0LTEuMTQ2LTYuNjc1LTJ2LTUuNzk5YzIuNDc3Ljk2IDUuMzI3LjQ2NSA2LjY3My0xLjc1OEgxMmMxLjM0NiAyLjIyMyA0LjE5NiAyLjcxNyA2LjY3MyAxLjc1OHptLTguMDEtMTAuNjZjMCAxLjU4Ni0uNDggMy4zMTItMi42NyAzLjMxMnMtMi42MDYtLjUyNC0yLjYwNi0xLjk5N2MwLTIuMzM2LjM1Ni0zLjMzNiAzLjMxNi0zLjMzNmMxLjcxIDAgMS45Ni41NSAxLjk2IDIuMDIybTIuNjcgMGMwLTEuNDcyLjI1LTIuMDIgMS45NjEtMi4wMmMyLjk2IDAgMy4zMTYgMSAzLjMxNiAzLjMzNWMwIDEuNDczLS40MTcgMS45OTctMi42MDcgMS45OTdzLTIuNjctMS43MjYtMi42Ny0zLjMxMSIvPjwvc3ZnPg==
// @grant        GM.xmlHttpRequest
// @grant        GM_getValue
// @grant        GM_setValue
// @grant        GM_deleteValue
// @grant        unsafeWindow
// @connect      api.individual.githubcopilot.com
// @connect      localhost
// @run-at       document-start
// @updateURL    https://cdn.jsdelivr.net/gh/ZiuChen/userscript@main/src/userscript/github-copilot-enhanced/index.user.js
// @downloadURL  https://cdn.jsdelivr.net/gh/ZiuChen/userscript@main/src/userscript/github-copilot-enhanced/index.user.js
// ==/UserScript==

(function(){var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(e&&(t=e(e=0)),t),s=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),c=e=>{let n={};for(var r in e)t(n,r,{get:e[r],enumerable:!0});return n},l=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},u=(n,r,a)=>(a=n==null?{}:e(i(n)),l(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n));let d=`GitHub Copilot Enhanced`;var f=console;window.console={...f,log:(...e)=>f.log(d,...e),info:(...e)=>f.info(d,...e),warn:(...e)=>f.warn(d,...e),error:(...e)=>f.error(d,...e),debug:(...e)=>f.debug(d,...e)};var p=(e,t)=>t.some(t=>e instanceof t),m,h;function g(){return m||=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}function _(){return h||=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}var v=new WeakMap,y=new WeakMap,b=new WeakMap;function x(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`success`,i),e.removeEventListener(`error`,a)},i=()=>{t(w(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener(`success`,i),e.addEventListener(`error`,a)});return b.set(t,e),t}function S(e){if(v.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`complete`,i),e.removeEventListener(`error`,a),e.removeEventListener(`abort`,a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException(`AbortError`,`AbortError`)),r()};e.addEventListener(`complete`,i),e.addEventListener(`error`,a),e.addEventListener(`abort`,a)});v.set(e,t)}var C={get(e,t,n){if(e instanceof IDBTransaction){if(t===`done`)return v.get(e);if(t===`store`)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return w(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t===`done`||t===`store`)?!0:t in e}};function ee(e){C=e(C)}function te(e){return _().includes(e)?function(...t){return e.apply(re(this),t),w(this.request)}:function(...t){return w(e.apply(re(this),t))}}function ne(e){return typeof e==`function`?te(e):(e instanceof IDBTransaction&&S(e),p(e,g())?new Proxy(e,C):e)}function w(e){if(e instanceof IDBRequest)return x(e);if(y.has(e))return y.get(e);let t=ne(e);return t!==e&&(y.set(e,t),b.set(t,e)),t}var re=e=>b.get(e);function ie(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){let o=indexedDB.open(e,t),s=w(o);return r&&o.addEventListener(`upgradeneeded`,e=>{r(w(o.result),e.oldVersion,e.newVersion,w(o.transaction),e)}),n&&o.addEventListener(`blocked`,e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener(`close`,()=>a()),i&&e.addEventListener(`versionchange`,e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}var ae=[`get`,`getKey`,`getAll`,`getAllKeys`,`count`],oe=[`put`,`add`,`delete`,`clear`],se=new Map;function ce(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t==`string`))return;if(se.get(t))return se.get(t);let n=t.replace(/FromIndex$/,``),r=t!==n,i=oe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ae.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,i?`readwrite`:`readonly`),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return se.set(t,a),a}ee(e=>({...e,get:(t,n,r)=>ce(t,n)||e.get(t,n,r),has:(t,n)=>!!ce(t,n)||e.has(t,n)}));var le=[`continue`,`continuePrimaryKey`,`advance`],ue={},de=new WeakMap,fe=new WeakMap,pe={get(e,t){if(!le.includes(t))return e[t];let n=ue[t];return n||=ue[t]=function(...e){de.set(this,fe.get(this)[t](...e))},n}};async function*me(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;let n=new Proxy(t,pe);for(fe.set(n,t),b.set(n,re(t));t;)yield n,t=await(de.get(n)||t.continue()),de.delete(n)}function he(e,t){return t===Symbol.asyncIterator&&p(e,[IDBIndex,IDBObjectStore,IDBCursor])||t===`iterate`&&p(e,[IDBIndex,IDBObjectStore])}ee(e=>({...e,get(t,n,r){return he(t,n)?me:e.get(t,n,r)},has(t,n){return he(t,n)||e.has(t,n)}}));var ge=`copilot-chat-history`,_e=1,ve=`threads`,ye=`messages`,be=null;function xe(){return be||=ie(ge,_e,{upgrade(e){if(!e.objectStoreNames.contains(ve)){let t=e.createObjectStore(ve,{keyPath:`id`});t.createIndex(`updatedAt`,`updatedAt`),t.createIndex(`syncedAt`,`syncedAt`)}e.objectStoreNames.contains(ye)||e.createObjectStore(ye,{keyPath:`threadId`}).createIndex(`syncedAt`,`syncedAt`)}}),be}let Se={async saveThread(e){let t=await xe(),n={id:e.id,name:e.name,createdAt:e.createdAt,updatedAt:e.updatedAt,syncedAt:new Date().toISOString(),data:e};return await t.put(ve,n),n},async saveThreads(e){let t=(await xe()).transaction(ve,`readwrite`),n=new Date().toISOString(),r=[];for(let i of e){let e=await t.store.get(i.id);if(!e||new Date(i.updatedAt).getTime()>=new Date(e.updatedAt).getTime()){let e={id:i.id,name:i.name,createdAt:i.createdAt,updatedAt:i.updatedAt,syncedAt:n,data:i};await t.store.put(e),r.push(e)}else r.push(e)}return await t.done,r},async getAllThreads(){return(await xe()).getAll(ve)},async saveMessages(e,t){let n=await xe(),r={threadId:e,syncedAt:new Date().toISOString(),messages:t};return await n.put(ye,r),r},async getMessages(e){return(await xe()).get(ye,e)},async getAllMessages(){return(await xe()).getAll(ye)},async getThread(e){return(await xe()).get(ve,e)},async deleteThread(e){let t=(await xe()).transaction([ve,ye],`readwrite`);await Promise.all([t.objectStore(ve).delete(e),t.objectStore(ye).delete(e)]),await t.done},async saveThreadWithMessages(e,t){let n=(await xe()).transaction([ve,ye],`readwrite`),r=new Date().toISOString(),i=await n.objectStore(ve).get(e.id);if(i&&new Date(i.updatedAt).getTime()>new Date(e.updatedAt).getTime())return await n.done,{thread:i,messages:await this.getMessages(e.id)};let a={id:e.id,name:e.name,createdAt:e.createdAt,updatedAt:e.updatedAt,syncedAt:r,data:e},o={threadId:e.id,syncedAt:r,messages:t};return await Promise.all([n.objectStore(ve).put(a),n.objectStore(ye).put(o)]),await n.done,{thread:a,messages:o}}};function Ce(e){let t=e.trim();if(!t)return new Headers;let n=t.split(`\r
`).map(e=>{let t=e.split(`:`);return[t[0].trim(),t[1].trim()]});return new Headers(n)}function we(e,t){let n=Ce(t.responseHeaders),r=typeof t.response==`string`?new Blob([t.response],{type:n.get(`Content-Type`)||`text/plain`}):t.response;return new Te(r,{statusCode:t.status,statusText:t.statusText,headers:n,finalUrl:t.finalUrl,redirected:t.finalUrl===e.url})}var Te=class e{constructor(e,t){this.rawBody=e,this.init=t,this.body=e.stream();let{headers:n,statusCode:r,statusText:i,finalUrl:a,redirected:o}=t;this.headers=n,this.status=r,this.statusText=i,this.url=a,this.type=`basic`,this.redirected=o,this._bodyUsed=!1}get bodyUsed(){return this._bodyUsed}get ok(){return this.status<300}arrayBuffer(){if(this.bodyUsed)throw TypeError(`Failed to execute 'arrayBuffer' on 'Response': body stream already read`);return this._bodyUsed=!0,this.rawBody.arrayBuffer()}blob(){if(this.bodyUsed)throw TypeError(`Failed to execute 'blob' on 'Response': body stream already read`);return this._bodyUsed=!0,Promise.resolve(this.rawBody.slice(0,this.rawBody.size,this.rawBody.type))}clone(){if(this.bodyUsed)throw TypeError(`Failed to execute 'clone' on 'Response': body stream already read`);return new e(this.rawBody,this.init)}formData(){if(this.bodyUsed)throw TypeError(`Failed to execute 'formData' on 'Response': body stream already read`);return this._bodyUsed=!0,this.rawBody.text().then(T)}async json(){if(this.bodyUsed)throw TypeError(`Failed to execute 'json' on 'Response': body stream already read`);return this._bodyUsed=!0,JSON.parse(await this.rawBody.text())}text(){if(this.bodyUsed)throw TypeError(`Failed to execute 'text' on 'Response': body stream already read`);return this._bodyUsed=!0,this.rawBody.text()}async bytes(){if(this.bodyUsed)throw TypeError(`Failed to execute 'bytes' on 'Response': body stream already read`);return this._bodyUsed=!0,new Uint8Array(await this.rawBody.arrayBuffer())}};function T(e){let t=new FormData;return e.trim().split(`&`).forEach(function(e){if(e){let n=e.split(`=`),r=n.shift()?.replace(/\+/g,` `),i=n.join(`=`).replace(/\+/g,` `);t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}async function Ee(e,t){let n=new Request(e,t),r;return t?.body&&(r=await n.text()),await De(n,t,r)}function De(e,t,n){return new Promise((r,i)=>{if(e.signal&&e.signal.aborted)return i(new DOMException(`Aborted`,`AbortError`));GM.xmlHttpRequest({url:e.url,method:Ae(e.method.toUpperCase()),headers:Object.fromEntries(new Headers(t?.headers).entries()),data:n,responseType:`blob`,onload(t){try{r(we(e,t))}catch(e){i(e)}},onabort(){i(new DOMException(`Aborted`,`AbortError`))},ontimeout(){i(TypeError(`Network request failed, timeout`))},onerror(e){i(TypeError(`Failed to fetch: `+e.finalUrl))}})})}var Oe=[`GET`,`POST`,`PUT`,`DELETE`,`PATCH`,`HEAD`,`TRACE`,`OPTIONS`,`CONNECT`];function ke(e,t){return e.includes(t)}function Ae(e){if(ke(Oe,e))return e;throw Error(`unsupported http method ${e}`)}function je(){try{let e=localStorage.getItem(`COPILOT_AUTH_TOKEN`);if(e){let t=JSON.parse(e);if(t.value&&new Date(t.expiration)>new Date)return t.value;console.warn(`[Auth] Stored GitHub Copilot token is expired`)}}catch(e){console.warn(`[Auth] Failed to read token from localStorage: ${e}`)}throw Error(`GitHub Copilot token not found or expired.`)}var Me=`https://api.individual.githubcopilot.com`;async function Ne(){let e=je(),t=await Ee(`${Me}/github/chat/threads`,{headers:{Accept:`application/json`,Authorization:`GitHub-Bearer ${e}`}});if(!t.ok)throw Error(`Failed to fetch threads: ${t.status}, ${await t.text()}`);return t.json()}async function Pe(e){let t=je(),n=await Ee(`${Me}/github/chat/threads/${e}/messages`,{headers:{Accept:`application/json`,Authorization:`GitHub-Bearer ${t}`}});if(!n.ok)throw Error(`Failed to fetch messages for thread ${e}: ${n.status}, ${await n.text()}`);return n.json()}var Fe=u(s(((e,t)=>{var n=Object.prototype.hasOwnProperty,r=`~`;function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,n,i,o){if(typeof n!=`function`)throw TypeError(`The listener must be a function`);var s=new a(n,i||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function s(e,t){--e._eventsCount===0?e._events=new i:delete e._events[t]}function c(){this._events=new i,this._eventsCount=0}c.prototype.eventNames=function(){var e=[],t,i;if(this._eventsCount===0)return e;for(i in t=this._events)n.call(t,i)&&e.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},c.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,o=Array(a);i<a;i++)o[i]=n[i].fn;return o},c.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},c.prototype.emit=function(e,t,n,i,a,o){var s=r?r+e:e;if(!this._events[s])return!1;var c=this._events[s],l=arguments.length,u,d;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,a),!0;case 6:return c.fn.call(c.context,t,n,i,a,o),!0}for(d=1,u=Array(l-1);d<l;d++)u[d-1]=arguments[d];c.fn.apply(c.context,u)}else{var f=c.length,p;for(d=0;d<f;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),l){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,t);break;case 3:c[d].fn.call(c[d].context,t,n);break;case 4:c[d].fn.call(c[d].context,t,n,i);break;default:if(!u)for(p=1,u=Array(l-1);p<l;p++)u[p-1]=arguments[p];c[d].fn.apply(c[d].context,u)}}return!0},c.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},c.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},c.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn===t&&(!i||o.once)&&(!n||o.context===n)&&s(this,a);else{for(var c=0,l=[],u=o.length;c<u;c++)(o[c].fn!==t||i&&!o[c].once||n&&o[c].context!==n)&&l.push(o[c]);l.length?this._events[a]=l.length===1?l[0]:l:s(this,a)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t!==void 0&&(t.exports=c)}))(),1),Ie=class e extends Error{name=`TimeoutError`;constructor(t,n){super(t,n),Error.captureStackTrace?.(this,e)}},Le=e=>e.reason??new DOMException(`This operation was aborted.`,`AbortError`);function Re(e,t){let{milliseconds:n,fallback:r,message:i,customTimers:a={setTimeout,clearTimeout},signal:o}=t,s,c,l=new Promise((t,l)=>{if(typeof n!=`number`||Math.sign(n)!==1)throw TypeError(`Expected \`milliseconds\` to be a positive number, got \`${n}\``);if(o?.aborted){l(Le(o));return}if(o&&(c=()=>{l(Le(o))},o.addEventListener(`abort`,c,{once:!0})),e.then(t,l),n===1/0)return;let u=new Ie;s=a.setTimeout.call(void 0,()=>{if(r){try{t(r())}catch(e){l(e)}return}typeof e.cancel==`function`&&e.cancel(),i===!1?t():i instanceof Error?l(i):(u.message=i??`Promise timed out after ${n} milliseconds`,l(u))},n)}).finally(()=>{l.clear(),c&&o&&o.removeEventListener(`abort`,c)});return l.clear=()=>{a.clearTimeout.call(void 0,s),s=void 0},l}function ze(e,t,n){let r=0,i=e.length;for(;i>0;){let a=Math.trunc(i/2),o=r+a;n(e[o],t)<=0?(r=++o,i-=a+1):i=a}return r}var Be=class{#queue=[];enqueue(e,t){let{priority:n=0,id:r}=t??{},i={priority:n,id:r,run:e};if(this.size===0||this.#queue[this.size-1].priority>=n){this.#queue.push(i);return}let a=ze(this.#queue,i,(e,t)=>t.priority-e.priority);this.#queue.splice(a,0,i)}setPriority(e,t){let n=this.#queue.findIndex(t=>t.id===e);if(n===-1)throw ReferenceError(`No promise function with the id "${e}" exists in the queue.`);let[r]=this.#queue.splice(n,1);this.enqueue(r.run,{priority:t,id:e})}dequeue(){return this.#queue.shift()?.run}filter(e){return this.#queue.filter(t=>t.priority===e.priority).map(e=>e.run)}get size(){return this.#queue.length}},Ve=class extends Fe.default{#carryoverIntervalCount;#isIntervalIgnored;#intervalCount=0;#intervalCap;#rateLimitedInInterval=!1;#rateLimitFlushScheduled=!1;#interval;#intervalEnd=0;#lastExecutionTime=0;#intervalId;#timeoutId;#queue;#queueClass;#pending=0;#concurrency;#isPaused;#idAssigner=1n;#runningTasks=new Map;timeout;constructor(e){if(super(),e={carryoverIntervalCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:Be,...e},!(typeof e.intervalCap==`number`&&e.intervalCap>=1))throw TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap?.toString()??``}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval?.toString()??``}\` (${typeof e.interval})`);if(this.#carryoverIntervalCount=e.carryoverIntervalCount??e.carryoverConcurrencyCount??!1,this.#isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this.#intervalCap=e.intervalCap,this.#interval=e.interval,this.#queue=new e.queueClass,this.#queueClass=e.queueClass,this.concurrency=e.concurrency,e.timeout!==void 0&&!(Number.isFinite(e.timeout)&&e.timeout>0))throw TypeError(`Expected \`timeout\` to be a positive finite number, got \`${e.timeout}\` (${typeof e.timeout})`);this.timeout=e.timeout,this.#isPaused=e.autoStart===!1,this.#setupRateLimitTracking()}get#doesIntervalAllowAnother(){return this.#isIntervalIgnored||this.#intervalCount<this.#intervalCap}get#doesConcurrentAllowAnother(){return this.#pending<this.#concurrency}#next(){this.#pending--,this.#pending===0&&this.emit(`pendingZero`),this.#tryToStartAnother(),this.emit(`next`)}#onResumeInterval(){this.#onInterval(),this.#initializeIntervalIfNeeded(),this.#timeoutId=void 0}get#isIntervalPaused(){let e=Date.now();if(this.#intervalId===void 0){let t=this.#intervalEnd-e;if(t<0){if(this.#lastExecutionTime>0){let t=e-this.#lastExecutionTime;if(t<this.#interval)return this.#createIntervalTimeout(this.#interval-t),!0}this.#intervalCount=this.#carryoverIntervalCount?this.#pending:0}else return this.#createIntervalTimeout(t),!0}return!1}#createIntervalTimeout(e){this.#timeoutId===void 0&&(this.#timeoutId=setTimeout(()=>{this.#onResumeInterval()},e))}#clearIntervalTimer(){this.#intervalId&&=(clearInterval(this.#intervalId),void 0)}#clearTimeoutTimer(){this.#timeoutId&&=(clearTimeout(this.#timeoutId),void 0)}#tryToStartAnother(){if(this.#queue.size===0)return this.#clearIntervalTimer(),this.emit(`empty`),this.#pending===0&&(this.#clearTimeoutTimer(),this.emit(`idle`)),!1;let e=!1;if(!this.#isPaused){let t=!this.#isIntervalPaused;if(this.#doesIntervalAllowAnother&&this.#doesConcurrentAllowAnother){let n=this.#queue.dequeue();this.#isIntervalIgnored||(this.#intervalCount++,this.#scheduleRateLimitUpdate()),this.emit(`active`),this.#lastExecutionTime=Date.now(),n(),t&&this.#initializeIntervalIfNeeded(),e=!0}}return e}#initializeIntervalIfNeeded(){this.#isIntervalIgnored||this.#intervalId!==void 0||(this.#intervalId=setInterval(()=>{this.#onInterval()},this.#interval),this.#intervalEnd=Date.now()+this.#interval)}#onInterval(){this.#intervalCount===0&&this.#pending===0&&this.#intervalId&&this.#clearIntervalTimer(),this.#intervalCount=this.#carryoverIntervalCount?this.#pending:0,this.#processQueue(),this.#scheduleRateLimitUpdate()}#processQueue(){for(;this.#tryToStartAnother(););}get concurrency(){return this.#concurrency}set concurrency(e){if(!(typeof e==`number`&&e>=1))throw TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this.#concurrency=e,this.#processQueue()}async#throwOnAbort(e){return new Promise((t,n)=>{e.addEventListener(`abort`,()=>{n(e.reason)},{once:!0})})}setPriority(e,t){if(typeof t!=`number`||!Number.isFinite(t))throw TypeError(`Expected \`priority\` to be a finite number, got \`${t}\` (${typeof t})`);this.#queue.setPriority(e,t)}async add(e,t={}){return t.id??=(this.#idAssigner++).toString(),t={timeout:this.timeout,...t},new Promise((n,r)=>{let i=Symbol(`task-${t.id}`);this.#queue.enqueue(async()=>{this.#pending++,this.#runningTasks.set(i,{id:t.id,priority:t.priority??0,startTime:Date.now(),timeout:t.timeout});try{try{t.signal?.throwIfAborted()}catch(e){throw this.#isIntervalIgnored||this.#intervalCount--,this.#runningTasks.delete(i),e}let r=e({signal:t.signal});t.timeout&&(r=Re(Promise.resolve(r),{milliseconds:t.timeout,message:`Task timed out after ${t.timeout}ms (queue has ${this.#pending} running, ${this.#queue.size} waiting)`})),t.signal&&(r=Promise.race([r,this.#throwOnAbort(t.signal)]));let a=await r;n(a),this.emit(`completed`,a)}catch(e){r(e),this.emit(`error`,e)}finally{this.#runningTasks.delete(i),queueMicrotask(()=>{this.#next()})}},t),this.emit(`add`),this.#tryToStartAnother()})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return this.#isPaused?(this.#isPaused=!1,this.#processQueue(),this):this}pause(){this.#isPaused=!0}clear(){this.#queue=new this.#queueClass,this.#updateRateLimitState()}async onEmpty(){this.#queue.size!==0&&await this.#onEvent(`empty`)}async onSizeLessThan(e){this.#queue.size<e||await this.#onEvent(`next`,()=>this.#queue.size<e)}async onIdle(){this.#pending===0&&this.#queue.size===0||await this.#onEvent(`idle`)}async onPendingZero(){this.#pending!==0&&await this.#onEvent(`pendingZero`)}async onRateLimit(){this.isRateLimited||await this.#onEvent(`rateLimit`)}async onRateLimitCleared(){this.isRateLimited&&await this.#onEvent(`rateLimitCleared`)}async onError(){return new Promise((e,t)=>{let n=e=>{this.off(`error`,n),t(e)};this.on(`error`,n)})}async#onEvent(e,t){return new Promise(n=>{let r=()=>{t&&!t()||(this.off(e,r),n())};this.on(e,r)})}get size(){return this.#queue.size}sizeBy(e){return this.#queue.filter(e).length}get pending(){return this.#pending}get isPaused(){return this.#isPaused}#setupRateLimitTracking(){this.#isIntervalIgnored||(this.on(`add`,()=>{this.#queue.size>0&&this.#scheduleRateLimitUpdate()}),this.on(`next`,()=>{this.#scheduleRateLimitUpdate()}))}#scheduleRateLimitUpdate(){this.#isIntervalIgnored||this.#rateLimitFlushScheduled||(this.#rateLimitFlushScheduled=!0,queueMicrotask(()=>{this.#rateLimitFlushScheduled=!1,this.#updateRateLimitState()}))}#updateRateLimitState(){let e=this.#rateLimitedInInterval,t=!this.#isIntervalIgnored&&this.#intervalCount>=this.#intervalCap&&this.#queue.size>0;t!==e&&(this.#rateLimitedInInterval=t,this.emit(t?`rateLimit`:`rateLimitCleared`))}get isRateLimited(){return this.#rateLimitedInInterval}get isSaturated(){return this.#pending===this.#concurrency&&this.#queue.size>0||this.isRateLimited&&this.#queue.size>0}get runningTasks(){return[...this.#runningTasks.values()].map(e=>({...e}))}};function He(e){return e&&typeof e.then==`function`}Promise.resolve(!1);var Ue=Promise.resolve(!0),We=Promise.resolve();function Ge(e,t){return e||=0,new Promise(function(n){return setTimeout(function(){return n(t)},e)})}function Ke(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function qe(){return Math.random().toString(36).substring(2)}var Je=0;function Ye(){var e=Date.now()*1e3;return e<=Je&&(e=Je+1),Je=e,e}function Xe(){return typeof navigator<`u`&&navigator.locks!==void 0&&typeof navigator.locks.request==`function`}var Ze=Ye,Qe=`native`;function $e(e){var t={time:Ye(),messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(e){t.messagesCallback&&t.messagesCallback(e.data)},t}function et(e){e.bc.close(),e.subFns=[]}function tt(e,t){try{return e.bc.postMessage(t,!1),We}catch(e){return Promise.reject(e)}}function nt(e,t){e.messagesCallback=t}function rt(){if(typeof globalThis<`u`&&globalThis.Deno&&globalThis.Deno.args)return!0;if((typeof window<`u`||typeof self<`u`)&&typeof BroadcastChannel==`function`){if(BroadcastChannel._pubkey)throw Error(`BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill`);return!0}else return!1}function it(){return 150}var at={create:$e,close:et,onMessage:nt,postMessage:tt,canBeUsed:rt,type:Qe,averageResponseTime:it,microSeconds:Ze},ot=class{ttl;map=new Map;_to=!1;constructor(e){this.ttl=e}has(e){let t=this.map.get(e);return t===void 0?!1:t<ct()-this.ttl?(this.map.delete(e),!1):!0}add(e){this.map.delete(e),this.map.set(e,ct()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,st(this)},0))}clear(){this.map.clear()}};function st(e){let t=ct()-e.ttl,n=e.map[Symbol.iterator]();for(;;){let r=n.next().value;if(!r)break;let i=r[0];if(r[1]<t)e.map.delete(i);else break}}function ct(){return Date.now()}function lt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return t.webWorkerSupport===void 0&&(t.webWorkerSupport=!0),t.idb||={},t.idb.ttl||(t.idb.ttl=1e3*45),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&typeof e.idb.onclose==`function`&&(t.idb.onclose=e.idb.onclose),t.localstorage||={},t.localstorage.removeTimeout||(t.localstorage.removeTimeout=1e3*60),e.methods&&(t.methods=e.methods),t.node||={},t.node.ttl||(t.node.ttl=1e3*60*2),t.node.maxParallelWrites||(t.node.maxParallelWrites=2048),t.node.useFastPath===void 0&&(t.node.useFastPath=!0),t}var ut=Ye,dt=`pubkey.broadcast-channel-0-`,ft=`messages`,pt={durability:`relaxed`};function mt(){if(typeof indexedDB<`u`)return indexedDB;if(typeof window<`u`){if(window.mozIndexedDB!==void 0)return window.mozIndexedDB;if(window.webkitIndexedDB!==void 0)return window.webkitIndexedDB;if(window.msIndexedDB!==void 0)return window.msIndexedDB}return!1}function ht(e){e.commit&&e.commit()}function gt(e){var t=mt(),n=dt+e,r=t.open(n);return r.onupgradeneeded=function(e){e.target.result.createObjectStore(ft,{keyPath:`id`,autoIncrement:!0})},new Promise(function(e,t){r.onerror=function(e){return t(e)},r.onsuccess=function(){e(r.result)}})}function _t(e,t,n){var r={uuid:t,time:Date.now(),data:n},i=e.transaction([ft],`readwrite`,pt);return new Promise(function(e,t){i.oncomplete=function(){return e()},i.onerror=function(e){return t(e)},i.objectStore(ft).add(r),ht(i)})}function vt(e,t){var n=e.transaction(ft,`readonly`,pt),r=n.objectStore(ft),i=[],a=IDBKeyRange.bound(t+1,1/0);if(r.getAll){var o=r.getAll(a);return new Promise(function(e,t){o.onerror=function(e){return t(e)},o.onsuccess=function(t){e(t.target.result)}})}function s(){try{return a=IDBKeyRange.bound(t+1,1/0),r.openCursor(a)}catch{return r.openCursor()}}return new Promise(function(e,r){var a=s();a.onerror=function(e){return r(e)},a.onsuccess=function(r){var a=r.target.result;a?a.value.id<t+1?a.continue(t+1):(i.push(a.value),a.continue()):(ht(n),e(i))}})}function yt(e,t){if(e.closed)return Promise.resolve([]);var n=e.db.transaction(ft,`readwrite`,pt).objectStore(ft);return Promise.all(t.map(function(e){var t=n.delete(e);return new Promise(function(e){t.onsuccess=function(){return e()}})}))}function bt(e,t){var n=Date.now()-t,r=e.transaction(ft,`readonly`,pt),i=r.objectStore(ft),a=[];return new Promise(function(e){i.openCursor().onsuccess=function(t){var i=t.target.result;if(i){var o=i.value;o.time<n?(a.push(o),i.continue()):(ht(r),e(a))}else e(a)}})}function xt(e){return bt(e.db,e.options.idb.ttl).then(function(t){return yt(e,t.map(function(e){return e.id}))})}function St(e,t){return t=lt(t),gt(e).then(function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:qe(),eMIs:new ot(t.idb.ttl*2),writeBlockPromise:We,messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,t.idb.onclose&&t.idb.onclose()},Ct(r),r})}function Ct(e){e.closed||Tt(e).then(function(){return Ge(e.options.idb.fallbackInterval)}).then(function(){return Ct(e)})}function wt(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}function Tt(e){return e.closed||!e.messagesCallback?We:vt(e.db,e.lastCursorId).then(function(t){return t.filter(function(e){return!!e}).map(function(t){return t.id>e.lastCursorId&&(e.lastCursorId=t.id),t}).filter(function(t){return wt(t,e)}).sort(function(e,t){return e.time-t.time}).forEach(function(t){e.messagesCallback&&(e.eMIs.add(t.id),e.messagesCallback(t.data))}),We})}function Et(e){e.closed=!0,e.db.close()}function Dt(e,t){return e.writeBlockPromise=e.writeBlockPromise.then(function(){return _t(e.db,e.uuid,t)}).then(function(){Ke(0,10)===0&&xt(e)}),e.writeBlockPromise}function Ot(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,Tt(e)}function kt(){return!!mt()}function At(e){return e.idb.fallbackInterval*2}var jt={create:St,close:Et,onMessage:Ot,postMessage:Dt,canBeUsed:kt,type:`idb`,averageResponseTime:At,microSeconds:ut},Mt=Ye,Nt=`pubkey.broadcastChannel-`,Pt=`localstorage`;function Ft(){var e;if(typeof window>`u`)return null;try{e=window.localStorage,e=window[`ie8-eventlistener/storage`]||window.localStorage}catch{}return e}function It(e){return Nt+e}function Lt(e,t){return new Promise(function(n){Ge().then(function(){var r=It(e.channelName),i={token:qe(),time:Date.now(),data:t,uuid:e.uuid},a=JSON.stringify(i);Ft().setItem(r,a);var o=document.createEvent(`Event`);o.initEvent(`storage`,!0,!0),o.key=r,o.newValue=a,window.dispatchEvent(o),n()})})}function Rt(e,t){var n=It(e),r=function(e){e.key===n&&t(JSON.parse(e.newValue))};return window.addEventListener(`storage`,r),r}function zt(e){window.removeEventListener(`storage`,e)}function Bt(e,t){if(t=lt(t),!Ut())throw Error(`BroadcastChannel: localstorage cannot be used`);var n=qe(),r=new ot(t.localstorage.removeTimeout),i={channelName:e,uuid:n,eMIs:r};return i.listener=Rt(e,function(e){i.messagesCallback&&e.uuid!==n&&(!e.token||r.has(e.token)||e.data.time&&e.data.time<i.messagesCallbackTime||(r.add(e.token),i.messagesCallback(e.data)))}),i}function Vt(e){zt(e.listener)}function Ht(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t}function Ut(){var e=Ft();if(!e)return!1;try{var t=`__broadcastchannel_check`;e.setItem(t,`works`),e.removeItem(t)}catch{return!1}return!0}function Wt(){var e=120,t=navigator.userAgent.toLowerCase();return t.includes(`safari`)&&!t.includes(`chrome`)?e*2:e}var Gt={create:Bt,close:Vt,onMessage:Ht,postMessage:Lt,canBeUsed:Ut,type:Pt,averageResponseTime:Wt,microSeconds:Mt},Kt=Ye,qt=`simulate`,Jt=new Set;function Yt(e){var t={time:Kt(),name:e,messagesCallback:null};return Jt.add(t),t}function Xt(e){Jt.delete(e)}function Zt(e,t){return new Promise(function(n){return setTimeout(function(){Array.from(Jt).forEach(function(n){n.name===e.name&&n!==e&&n.messagesCallback&&n.time<t.time&&n.messagesCallback(t)}),n()},5)})}function Qt(e,t){e.messagesCallback=t}function $t(){return!0}function en(){return 5}var tn={create:Yt,close:Xt,onMessage:Qt,postMessage:Zt,canBeUsed:$t,type:qt,averageResponseTime:en,microSeconds:Kt},nn=[at,jt,Gt];function rn(e){var t=[].concat(e.methods,nn).filter(Boolean);if(e.type){if(e.type===`simulate`)return tn;var n=t.find(function(t){return t.type===e.type});if(n)return n;throw Error(`method-type `+e.type+` not found`)}e.webWorkerSupport||(t=t.filter(function(e){return e.type!==`idb`}));var r=t.find(function(e){return e.canBeUsed()});if(r)return r;throw Error(`No usable method found in `+JSON.stringify(nn.map(function(e){return e.type})))}var an=new Set,on=0,sn=function(e,t){this.id=on++,an.add(this),this.name=e,cn&&(t=cn),this.options=lt(t),this.method=rn(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,un(this)};sn._pubkey=!0;var cn;sn.prototype={postMessage:function(e){if(this.closed)throw Error(`BroadcastChannel.postMessage(): Cannot post message after channel has closed `+JSON.stringify(e));return ln(this,`message`,e)},postInternal:function(e){return ln(this,`internal`,e)},set onmessage(e){var t={time:this.method.microSeconds(),fn:e};pn(this,`message`,this._onML),e&&typeof e==`function`?(this._onML=t,fn(this,`message`,t)):this._onML=null},addEventListener:function(e,t){var n={time:this.method.microSeconds(),fn:t};fn(this,e,n)},removeEventListener:function(e,t){var n=this._addEL[e].find(function(e){return e.fn===t});pn(this,e,n)},close:function(){var e=this;if(!this.closed){an.delete(this),this.closed=!0;var t=this._prepP?this._prepP:We;return this._onML=null,this._addEL.message=[],t.then(function(){return Promise.all(Array.from(e._uMP))}).then(function(){return Promise.all(e._befC.map(function(e){return e()}))}).then(function(){return e.method.close(e._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function ln(e,t,n){var r={time:e.method.microSeconds(),type:t,data:n};return(e._prepP?e._prepP:We).then(function(){var t=e.method.postMessage(e._state,r);return e._uMP.add(t),t.catch().then(function(){return e._uMP.delete(t)}),t})}function un(e){var t=e.method.create(e.name,e.options);He(t)?(e._prepP=t,t.then(function(t){e._state=t})):e._state=t}function dn(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function fn(e,t,n){e._addEL[t].push(n),mn(e)}function pn(e,t,n){e._addEL[t]=e._addEL[t].filter(function(e){return e!==n}),hn(e)}function mn(e){if(!e._iL&&dn(e)){var t=function(t){e._addEL[t.type].forEach(function(e){t.time>=e.time&&e.fn(t.data)})},n=e.method.microSeconds();e._prepP?e._prepP.then(function(){e._iL=!0,e.method.onMessage(e._state,t,n)}):(e._iL=!0,e.method.onMessage(e._state,t,n))}}function hn(e){if(e._iL&&!dn(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}function gn(e){if(typeof WorkerGlobalScope==`function`&&self instanceof WorkerGlobalScope){var t=self.close.bind(self);self.close=function(){return e(),t()}}else{if(typeof window.addEventListener!=`function`)return;window.addEventListener(`beforeunload`,function(){e()},!0),window.addEventListener(`unload`,function(){e()},!0)}}function _n(e){process.on(`exit`,function(){return e()}),process.on(`beforeExit`,function(){return e().then(function(){return process.exit()})}),process.on(`SIGINT`,function(){return e().then(function(){return process.exit()})}),process.on(`uncaughtException`,function(t){return e().then(function(){console.trace(t),process.exit(101)})})}var vn=Object.prototype.toString.call(typeof process<`u`?process:0)===`[object process]`?_n:gn,yn=new Set,bn=!1;function xn(){bn||(bn=!0,vn(Cn))}function Sn(e){if(xn(),typeof e!=`function`)throw Error(`Listener is no function`);return yn.add(e),{remove:function(){return yn.delete(e)},run:function(){return yn.delete(e),e()}}}function Cn(){var e=[];return yn.forEach(function(t){e.push(t()),yn.delete(t)}),Promise.all(e)}function wn(e,t){var n={context:`leader`,action:t,token:e.token};return e.broadcastChannel.postInternal(n)}function Tn(e){e.isLeader=!0,e._hasLeader=!0;var t=Sn(function(){return e.die()});e._unl.push(t);var n=function(t){t.context===`leader`&&t.action===`apply`&&wn(e,`tell`),t.context===`leader`&&t.action===`tell`&&!e._dpLC&&(e._dpLC=!0,e._dpL(),wn(e,`tell`))};return e.broadcastChannel.addEventListener(`internal`,n),e._lstns.push(n),wn(e,`tell`)}var En=function(e,t){var n=this;this.broadcastChannel=e,e._befC.push(function(){return n.die()}),this._options=t,this.isLeader=!1,this.isDead=!1,this.token=qe(),this._lstns=[],this._unl=[],this._dpL=function(){},this._dpLC=!1,this._wKMC={},this.lN=`pubkey-bc||`+e.method.type+`||`+e.name};En.prototype={hasLeader:function(){var e=this;return navigator.locks.query().then(function(t){var n=t.held?t.held.filter(function(t){return t.name===e.lN}):[];return!!(n&&n.length>0)})},awaitLeadership:function(){var e=this;if(!this._wLMP){this._wKMC.c=new AbortController;var t=new Promise(function(t,n){e._wKMC.res=t,e._wKMC.rej=n});this._wLMP=new Promise(function(n,r){navigator.locks.request(e.lN,{signal:e._wKMC.c.signal},function(){return e._wKMC.c=void 0,Tn(e),n(),t}).catch(function(t){e._wKMC.rej&&e._wKMC.rej(t),r(t)})})}return this._wLMP},set onduplicate(e){},die:function(){var e=this;return this._lstns.forEach(function(t){return e.broadcastChannel.removeEventListener(`internal`,t)}),this._lstns=[],this._unl.forEach(function(e){return e.remove()}),this._unl=[],this.isLeader&&=!1,this.isDead=!0,this._wKMC.res&&this._wKMC.res(),this._wKMC.c&&this._wKMC.c.abort(`LeaderElectionWebLock.die() called`),wn(this,`death`)}};var Dn=function(e,t){var n=this;this.broadcastChannel=e,this._options=t,this.isLeader=!1,this._hasLeader=!1,this.isDead=!1,this.token=qe(),this._aplQ=We,this._aplQC=0,this._unl=[],this._lstns=[],this._dpL=function(){},this._dpLC=!1;var r=function(e){e.context===`leader`&&(e.action===`death`&&(n._hasLeader=!1),e.action===`tell`&&(n._hasLeader=!0))};this.broadcastChannel.addEventListener(`internal`,r),this._lstns.push(r)};Dn.prototype={hasLeader:function(){return Promise.resolve(this._hasLeader)},applyOnce:function(e){var t=this;if(this.isLeader)return Ge(0,!0);if(this.isDead)return Ge(0,!1);if(this._aplQC>1)return this._aplQ;var n=function(){if(t.isLeader)return Ue;var n=!1,r,i=new Promise(function(e){r=function(){n=!0,e()}}),a=function(e){e.context===`leader`&&e.token!=t.token&&(e.action===`apply`&&e.token>t.token&&r(),e.action===`tell`&&(r(),t._hasLeader=!0))};t.broadcastChannel.addEventListener(`internal`,a);var o=e?t._options.responseTime*4:t._options.responseTime;return wn(t,`apply`).then(function(){return Promise.race([Ge(o),i.then(function(){return Promise.reject(Error())})])}).then(function(){return wn(t,`apply`)}).then(function(){return Promise.race([Ge(o),i.then(function(){return Promise.reject(Error())})])}).catch(function(){}).then(function(){return t.broadcastChannel.removeEventListener(`internal`,a),n?!1:Tn(t).then(function(){return!0})})};return this._aplQC+=1,this._aplQ=this._aplQ.then(function(){return n()}).then(function(){--t._aplQC}),this._aplQ.then(function(){return t.isLeader})},awaitLeadership:function(){return this._aLP||=On(this),this._aLP},set onduplicate(e){this._dpL=e},die:function(){var e=this;return this._lstns.forEach(function(t){return e.broadcastChannel.removeEventListener(`internal`,t)}),this._lstns=[],this._unl.forEach(function(e){return e.remove()}),this._unl=[],this.isLeader&&=(this._hasLeader=!1,!1),this.isDead=!0,wn(this,`death`)}};function On(e){return e.isLeader?We:new Promise(function(t){var n=!1;function r(){n||(n=!0,e.broadcastChannel.removeEventListener(`internal`,a),t(!0))}e.applyOnce().then(function(){e.isLeader&&r()});var i=function(){return Ge(e._options.fallbackInterval).then(function(){if(!(e.isDead||n))if(e.isLeader)r();else return e.applyOnce(!0).then(function(){e.isLeader?r():i()})})};i();var a=function(t){t.context===`leader`&&t.action===`death`&&(e._hasLeader=!1,e.applyOnce().then(function(){e.isLeader&&r()}))};e.broadcastChannel.addEventListener(`internal`,a),e._lstns.push(a)})}function kn(e,t){return e||={},e=JSON.parse(JSON.stringify(e)),e.fallbackInterval||=3e3,e.responseTime||=t.method.averageResponseTime(t.options),e}function An(e,t){if(e._leaderElector)throw Error(`BroadcastChannel already has a leader-elector`);t=kn(t,e);var n=Xe()?new En(e,t):new Dn(e,t);return e._befC.push(function(){return n.die()}),e._leaderElector=n,n}function jn(e){let{room:t,defaultValue:n,onChange:r}=e,i=`USE_CROSS_TAB_STATE_${t.toUpperCase()}`,a=n,o=new sn(i),s=An(o),c=localStorage.getItem(i);if(c)try{a=JSON.parse(c)}catch{}return o.onmessage=e=>{a=e.data,r?.(a)},{get value(){return a},set value(e){if(!s.isLeader){console.warn(`[CrossTab] Non-leader tab cannot write to channel: ${i}`);return}a=e,localStorage.setItem(i,JSON.stringify(e)),o.postMessage(e),r?.(e)},get isLeader(){return s.isLeader},async awaitLeadership(){s&&await s.awaitLeadership()},close(){s&&s.die(),o.close()}}}typeof window<`u`&&((window.__svelte??={}).v??=new Set).add(`5`);let Mn={},Nn=Symbol();var Pn=Array.isArray,Fn=Array.prototype.indexOf,In=Array.from;Object.keys;var Ln=Object.defineProperty,Rn=Object.getOwnPropertyDescriptor,zn=Object.getOwnPropertyDescriptors,Bn=Object.prototype,Vn=Array.prototype,Hn=Object.getPrototypeOf,Un=Object.isExtensible;function Wn(e){return typeof e==`function`}let E=()=>{};function Gn(e){return e()}function Kn(e){for(var t=0;t<e.length;t++)e[t]()}function qn(){var e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}let Jn=1024,Yn=2048,Xn=4096,Zn=8192,Qn=65536,$n=1<<19,er=1<<20,tr=1<<21,nr=1<<23,rr=Symbol(`$state`),ir=Symbol(`legacy props`),ar=Symbol(``),or=new class extends Error{name=`StaleReactionError`;message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function sr(e){throw Error(`https://svelte.dev/e/lifecycle_outside_component`)}function cr(){throw Error(`https://svelte.dev/e/async_derived_orphan`)}function lr(e){throw Error(`https://svelte.dev/e/effect_in_teardown`)}function ur(){throw Error(`https://svelte.dev/e/effect_in_unowned_derived`)}function dr(e){throw Error(`https://svelte.dev/e/effect_orphan`)}function fr(){throw Error(`https://svelte.dev/e/effect_update_depth_exceeded`)}function pr(e){throw Error(`https://svelte.dev/e/props_invalid_value`)}function mr(){throw Error(`https://svelte.dev/e/state_descriptors_fixed`)}function hr(){throw Error(`https://svelte.dev/e/state_prototype_fixed`)}function gr(){throw Error(`https://svelte.dev/e/state_unsafe_mutation`)}function _r(){throw Error(`https://svelte.dev/e/svelte_boundary_reset_onerror`)}function vr(e){console.warn(`https://svelte.dev/e/hydration_mismatch`)}function yr(){console.warn(`https://svelte.dev/e/select_multiple_invalid_value`)}function br(){console.warn(`https://svelte.dev/e/svelte_boundary_reset_noop`)}let D=!1;function xr(e){D=e}let O;function Sr(e){if(e===null)throw vr(),Mn;return O=e}function Cr(){return Sr(Hi(O))}function k(e){if(D){if(Hi(O)!==null)throw vr(),Mn;O=e}}function wr(e=1){if(D){for(var t=e,n=O;t--;)n=Hi(n);O=n}}function Tr(e=!0){for(var t=0,n=O;;){if(n.nodeType===8){var r=n.data;if(r===`]`){if(t===0)return n;--t}else (r===`[`||r===`[!`)&&(t+=1)}var i=Hi(n);e&&n.remove(),n=i}}function Er(e){if(!e||e.nodeType!==8)throw vr(),Mn;return e.data}function Dr(e){return e===this.v}function Or(e,t){return e==e?e!==t||typeof e==`object`&&!!e||typeof e==`function`:t==t}function kr(e){return!Or(e,this.v)}let Ar=!1;function jr(){Ar=!0}let A=null;function Mr(e){A=e}function Nr(e){return zr(`getContext`).get(e)}function Pr(e,t){return zr(`setContext`).set(e,t),t}function Fr(e){return zr(`hasContext`).has(e)}function Ir(e,t=!1,n){A={p:A,c:null,e:null,s:e,x:null,l:Ar&&!t?{s:null,u:null,$:[]}:null}}function Lr(e){var t=A,n=t.e;if(n!==null){t.e=null;for(var r of n)na(r)}return e!==void 0&&(t.x=e),A=t.p,e??{}}function Rr(){return!Ar||A!==null&&A.l===null}function zr(e){return A===null&&sr(e),A.c??=new Map(Br(A)||void 0)}function Br(e){let t=e.p;for(;t!==null;){let e=t.c;if(e!==null)return e;t=t.p}return null}var Vr=[];function Hr(){var e=Vr;Vr=[],Kn(e)}function Ur(e){if(Vr.length===0&&!ni){var t=Vr;queueMicrotask(()=>{t===Vr&&Hr()})}Vr.push(e)}function Wr(){for(;Vr.length>0;)Hr()}var Gr=new WeakMap;function Kr(e){var t=B;if(t===null)return z.f|=nr,e;if(t.f&32768)qr(e,t);else{if(!(t.f&128))throw!t.parent&&e instanceof Error&&Jr(e),e;t.b.error(e)}}function qr(e,t){for(;t!==null;){if(t.f&128)try{t.b.error(e);return}catch(t){e=t}t=t.parent}throw e instanceof Error&&Jr(e),e}function Jr(e){let t=Gr.get(e);t&&(Ln(e,`message`,{value:t.message}),Ln(e,`stack`,{value:t.stack}))}var Yr=new Set;let j=null,Xr=null,Zr=null,Qr=new Set;var $r=[],ei=null,ti=!1;let ni=!1;var ri=class e{committed=!1;current=new Map;#previous=new Map;#callbacks=new Set;#pending=0;#blocking_pending=0;#deferred=null;#dirty_effects=[];#maybe_dirty_effects=[];skipped_effects=new Set;process(e){$r=[],Xr=null,this.apply();var t={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(let n of e)this.#traverse_effect_tree(n,t);this.#resolve(),this.#blocking_pending>0?(this.#defer_effects(t.effects),this.#defer_effects(t.render_effects),this.#defer_effects(t.block_effects)):(Xr=this,j=null,ci(t.render_effects),ci(t.effects),Xr=null),Zr=null}#traverse_effect_tree(e,t){e.f^=Jn;for(var n=e.first;n!==null;){var r=n.f,i=(r&96)!=0,a=i&&(r&1024)!=0||(r&8192)!=0||this.skipped_effects.has(n);if(n.f&128&&n.b?.is_pending()&&(t={parent:t,effect:n,effects:[],render_effects:[],block_effects:[]}),!a&&n.fn!==null){i?n.f^=Jn:r&4?t.effects.push(n):Ha(n)&&(n.f&16&&t.block_effects.push(n),qa(n));var o=n.first;if(o!==null){n=o;continue}}var s=n.parent;for(n=n.next;n===null&&s!==null;)s===t.effect&&(this.#defer_effects(t.effects),this.#defer_effects(t.render_effects),this.#defer_effects(t.block_effects),t=t.parent),n=s.next,s=s.parent}}#defer_effects(e){for(let t of e)(t.f&2048?this.#dirty_effects:this.#maybe_dirty_effects).push(t),Qa(t,Jn)}capture(e,t){this.#previous.has(e)||this.#previous.set(e,t),this.current.set(e,e.v),Zr?.set(e,e.v)}activate(){j=this}deactivate(){j=null,Zr=null}flush(){if($r.length>0){if(this.activate(),ai(),j!==null&&j!==this)return}else this.#resolve();this.deactivate();for(let e of Qr)if(Qr.delete(e),e(),j!==null)break}#resolve(){if(this.#blocking_pending===0){for(let e of this.#callbacks)e();this.#callbacks.clear()}this.#pending===0&&this.#commit()}#commit(){if(Yr.size>1){this.#previous.clear();var e=Zr,t=!0,n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(let e of Yr){if(e===this){t=!1;continue}let r=[];for(let[n,i]of this.current){if(e.current.has(n))if(t&&i!==e.current.get(n))e.current.set(n,i);else continue;r.push(n)}if(r.length===0)continue;let i=[...e.current.keys()].filter(e=>!this.current.has(e));if(i.length>0){for(let e of r)li(e,i);if($r.length>0){j=e,e.apply();for(let t of $r)e.#traverse_effect_tree(t,n);$r=[],e.deactivate()}}}j=null,Zr=e}this.committed=!0,Yr.delete(this),this.#deferred?.resolve()}increment(e){this.#pending+=1,e&&(this.#blocking_pending+=1)}decrement(e){--this.#pending,e&&--this.#blocking_pending;for(let e of this.#dirty_effects)Qa(e,Yn),di(e);for(let e of this.#maybe_dirty_effects)Qa(e,Xn),di(e);this.#dirty_effects=[],this.#maybe_dirty_effects=[],this.flush()}add_callback(e){this.#callbacks.add(e)}settled(){return(this.#deferred??=qn()).promise}static ensure(){if(j===null){let t=j=new e;Yr.add(j),ni||e.enqueue(()=>{j===t&&t.flush()})}return j}static enqueue(e){Ur(e)}apply(){}};function ii(e){var t=ni;ni=!0;try{var n;for(e&&(j!==null&&ai(),n=e());;){if(Wr(),$r.length===0&&(j?.flush(),$r.length===0))return ei=null,n;ai()}}finally{ni=t}}function ai(){var e=Ca;ti=!0;try{var t=0;for(wa(!0);$r.length>0;){var n=ri.ensure();t++>1e3&&oi(),n.process($r),Ei.clear()}}finally{ti=!1,wa(e),ei=null}}function oi(){try{fr()}catch(e){qr(e,ei)}}let si=null;function ci(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if(!(r.f&24576)&&Ha(r)&&(si=new Set,qa(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?ga(r):r.fn=null),si?.size>0)){Ei.clear();for(let e of si){if(e.f&24576)continue;let t=[e],n=e.parent;for(;n!==null;)si.has(n)&&(si.delete(n),t.push(n)),n=n.parent;for(let e=t.length-1;e>=0;e--){let n=t[e];n.f&24576||qa(n)}}si.clear()}}si=null}}function li(e,t){if(e.reactions!==null)for(let n of e.reactions){let e=n.f;e&2?li(n,t):e&4194320&&ui(n,t)&&(Qa(n,Yn),di(n))}}function ui(e,t){if(e.deps!==null){for(let n of e.deps)if(t.includes(n)||n.f&2&&ui(n,t))return!0}return!1}function di(e){for(var t=ei=e;t.parent!==null;){t=t.parent;var n=t.f;if(ti&&t===B&&n&16)return;if(n&96){if(!(n&1024))return;t.f^=Jn}}$r.push(t)}function fi(e){let t=0,n=Di(0),r;return()=>{$i()&&(V(n),ca(()=>(t===0&&(r=Xa(()=>e(()=>Ai(n)))),t+=1,()=>{Ur(()=>{--t,t===0&&(r?.(),r=void 0,Ai(n))})})))}}var pi=$n|65664;function mi(e,t,n){new hi(e,t,n)}var hi=class{parent;#pending=!1;#anchor;#hydrate_open=D?O:null;#props;#children;#effect;#main_effect=null;#pending_effect=null;#failed_effect=null;#offscreen_fragment=null;#local_pending_count=0;#pending_count=0;#is_creating_fallback=!1;#effect_pending=null;#effect_pending_update=()=>{this.#effect_pending&&ki(this.#effect_pending,this.#local_pending_count)};#effect_pending_subscriber=fi(()=>(this.#effect_pending=Di(this.#local_pending_count),()=>{this.#effect_pending=null}));constructor(e,t,n){this.#anchor=e,this.#props=t,this.#children=n,this.parent=B.b,this.#pending=!!this.#props.pending,this.#effect=la(()=>{if(B.b=this,D){let e=this.#hydrate_open;Cr(),e.nodeType===8&&e.data===`[!`?this.#hydrate_pending_content():this.#hydrate_resolved_content()}else{try{this.#main_effect=ua(()=>n(this.#anchor))}catch(e){this.error(e)}this.#pending_count>0?this.#show_pending_snippet():this.#pending=!1}},pi),D&&(this.#anchor=O)}#hydrate_resolved_content(){try{this.#main_effect=ua(()=>this.#children(this.#anchor))}catch(e){this.error(e)}this.#pending=!1}#hydrate_pending_content(){let e=this.#props.pending;e&&(this.#pending_effect=ua(()=>e(this.#anchor)),ri.enqueue(()=>{this.#main_effect=this.#run(()=>(ri.ensure(),ua(()=>this.#children(this.#anchor)))),this.#pending_count>0?this.#show_pending_snippet():(_a(this.#pending_effect,()=>{this.#pending_effect=null}),this.#pending=!1)}))}is_pending(){return this.#pending||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#props.pending}#run(e){var t=B,n=z,r=A;ka(this.#effect),Oa(this.#effect),Mr(this.#effect.ctx);try{return e()}catch(e){return Kr(e),null}finally{ka(t),Oa(n),Mr(r)}}#show_pending_snippet(){let e=this.#props.pending;this.#main_effect!==null&&(this.#offscreen_fragment=document.createDocumentFragment(),Sa(this.#main_effect,this.#offscreen_fragment)),this.#pending_effect===null&&(this.#pending_effect=ua(()=>e(this.#anchor)))}#update_pending_count(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#update_pending_count(e);return}this.#pending_count+=e,this.#pending_count===0&&(this.#pending=!1,this.#pending_effect&&_a(this.#pending_effect,()=>{this.#pending_effect=null}),this.#offscreen_fragment&&=(this.#anchor.before(this.#offscreen_fragment),null))}update_pending_count(e){this.#update_pending_count(e),this.#local_pending_count+=e,Qr.add(this.#effect_pending_update)}get_effect_pending(){return this.#effect_pending_subscriber(),V(this.#effect_pending)}error(e){var t=this.#props.onerror;let n=this.#props.failed;if(this.#is_creating_fallback||!t&&!n)throw e;this.#main_effect&&=(ma(this.#main_effect),null),this.#pending_effect&&=(ma(this.#pending_effect),null),this.#failed_effect&&=(ma(this.#failed_effect),null),D&&(Sr(this.#hydrate_open),wr(),Sr(Tr()));var r=!1,i=!1;let a=()=>{if(r){br();return}r=!0,i&&_r(),ri.ensure(),this.#local_pending_count=0,this.#failed_effect!==null&&_a(this.#failed_effect,()=>{this.#failed_effect=null}),this.#pending=this.has_pending_snippet(),this.#main_effect=this.#run(()=>(this.#is_creating_fallback=!1,ua(()=>this.#children(this.#anchor)))),this.#pending_count>0?this.#show_pending_snippet():this.#pending=!1};var o=z;try{Oa(null),i=!0,t?.(e,a),i=!1}catch(e){qr(e,this.#effect&&this.#effect.parent)}finally{Oa(o)}n&&Ur(()=>{this.#failed_effect=this.#run(()=>{this.#is_creating_fallback=!0;try{return ua(()=>{n(this.#anchor,()=>e,()=>a)})}catch(e){return qr(e,this.#effect.parent),null}finally{this.#is_creating_fallback=!1}})})}};function gi(e,t,n){let r=Rr()?yi:xi;if(t.length===0){n(e.map(r));return}var i=j,a=B,o=_i(),s=D;Promise.all(t.map(e=>bi(e))).then(t=>{o();try{n([...e.map(r),...t])}catch(e){a.f&16384||qr(e,a)}s&&xr(!1),i?.deactivate(),vi()}).catch(e=>{qr(e,a)})}function _i(){var e=B,t=z,n=A,r=j,i=D;if(i)var a=O;return function(){ka(e),Oa(t),Mr(n),r?.activate(),i&&(xr(!0),Sr(a))}}function vi(){ka(null),Oa(null),Mr(null)}function yi(e){var t=2|Yn,n=z!==null&&z.f&2?z:null;return B===null||n!==null&&n.f&256?t|=256:B.f|=$n,{ctx:A,deps:null,effects:null,equals:Dr,f:t,fn:e,reactions:null,rv:0,v:Nn,wv:0,parent:n??B,ac:null}}function bi(e,t){let n=B;n===null&&cr();var r=n.b,i=void 0,a=Di(Nn),o=!z,s=new Map;return sa(()=>{var t=qn();i=t.promise;try{Promise.resolve(e()).then(t.resolve,t.reject).then(()=>{n===j&&n.committed&&n.deactivate(),vi()})}catch(e){t.reject(e),vi()}var n=j;if(o){var c=!r.is_pending();r.update_pending_count(1),n.increment(c),s.get(n)?.reject(or),s.delete(n),s.set(n,t)}let l=(e,t=void 0)=>{if(n.activate(),t)t!==or&&(a.f|=nr,ki(a,t));else{a.f&8388608&&(a.f^=nr),ki(a,e);for(let[e,t]of s){if(s.delete(e),e===n)break;t.reject(or)}}o&&(r.update_pending_count(-1),n.decrement(c))};t.promise.then(l,e=>l(null,e||`unknown`))}),ea(()=>{for(let e of s.values())e.reject(or)}),new Promise(e=>{function t(n){function r(){n===i?e(a):t(i)}n.then(r,r)}t(i)})}function M(e){let t=yi(e);return ja(t),t}function xi(e){let t=yi(e);return t.equals=kr,t}function Si(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)ma(t[n])}}function Ci(e){for(var t=e.parent;t!==null;){if(!(t.f&2))return t;t=t.parent}return null}function wi(e){var t,n=B;ka(Ci(e));try{Si(e),t=Wa(e)}finally{ka(n)}return t}function Ti(e){var t=wi(e);if(e.equals(t)||(e.v=t,e.wv=Va()),!Ta)if(Zr!==null)Zr.set(e,e.v);else{var n=(Ba||e.f&256)&&e.deps!==null?Xn:Jn;Qa(e,n)}}let Ei=new Map;function Di(e,t){return{f:0,v:e,reactions:null,equals:Dr,rv:0,wv:0}}function N(e,t){let n=Di(e,t);return ja(n),n}function Oi(e,t=!1,n=!0){let r=Di(e);return t||(r.equals=kr),Ar&&n&&A!==null&&A.l!==null&&(A.l.s??=[]).push(r),r}function P(e,t,n=!1){z!==null&&(!Da||z.f&131072)&&Rr()&&z.f&4325394&&!Aa?.includes(e)&&gr();let r=n?Mi(t):t;return ki(e,r)}function ki(e,t){if(!e.equals(t)){var n=e.v;Ta?Ei.set(e,t):Ei.set(e,n),e.v=t,ri.ensure().capture(e,n),e.f&2&&(e.f&2048&&wi(e),Qa(e,e.f&256?Xn:Jn)),e.wv=Va(),ji(e,Yn),Rr()&&B!==null&&B.f&1024&&!(B.f&96)&&(Pa===null?Fa([e]):Pa.push(e))}return t}function Ai(e){P(e,e.v+1)}function ji(e,t){var n=e.reactions;if(n!==null)for(var r=Rr(),i=n.length,a=0;a<i;a++){var o=n[a],s=o.f;if(!(!r&&o===B)){var c=(s&Yn)===0;c&&Qa(o,t),s&2?ji(o,Xn):c&&(s&16&&si!==null&&si.add(o),di(o))}}}function Mi(e){if(typeof e!=`object`||!e||rr in e)return e;let t=Hn(e);if(t!==Bn&&t!==Vn)return e;var n=new Map,r=Pn(e),i=N(0),a=null,o=Ra,s=e=>{if(Ra===o)return e();var t=z,n=Ra;Oa(null),za(o);var r=e();return Oa(t),za(n),r};return r&&n.set(`length`,N(e.length,a)),new Proxy(e,{defineProperty(e,t,r){(!(`value`in r)||r.configurable===!1||r.enumerable===!1||r.writable===!1)&&mr();var i=n.get(t);return i===void 0?i=s(()=>{var e=N(r.value,a);return n.set(t,e),e}):P(i,r.value,!0),!0},deleteProperty(e,t){var r=n.get(t);if(r===void 0){if(t in e){let e=s(()=>N(Nn,a));n.set(t,e),Ai(i)}}else P(r,Nn),Ai(i);return!0},get(t,r,i){if(r===rr)return e;var o=n.get(r),c=r in t;if(o===void 0&&(!c||Rn(t,r)?.writable)&&(o=s(()=>{var e=Mi(c?t[r]:Nn);return N(e,a)}),n.set(r,o)),o!==void 0){var l=V(o);return l===Nn?void 0:l}return Reflect.get(t,r,i)},getOwnPropertyDescriptor(e,t){var r=Reflect.getOwnPropertyDescriptor(e,t);if(r&&`value`in r){var i=n.get(t);i&&(r.value=V(i))}else if(r===void 0){var a=n.get(t),o=a?.v;if(a!==void 0&&o!==Nn)return{enumerable:!0,configurable:!0,value:o,writable:!0}}return r},has(e,t){if(t===rr)return!0;var r=n.get(t),i=r!==void 0&&r.v!==Nn||Reflect.has(e,t);return(r!==void 0||B!==null&&(!i||Rn(e,t)?.writable))&&(r===void 0&&(r=s(()=>{var n=i?Mi(e[t]):Nn;return N(n,a)}),n.set(t,r)),V(r)===Nn)?!1:i},set(e,t,o,c){var l=n.get(t),u=t in e;if(r&&t===`length`)for(var d=o;d<l.v;d+=1){var f=n.get(d+``);f===void 0?d in e&&(f=s(()=>N(Nn,a)),n.set(d+``,f)):P(f,Nn)}if(l===void 0)(!u||Rn(e,t)?.writable)&&(l=s(()=>N(void 0,a)),P(l,Mi(o)),n.set(t,l));else{u=l.v!==Nn;var p=s(()=>Mi(o));P(l,p)}var m=Reflect.getOwnPropertyDescriptor(e,t);if(m?.set&&m.set.call(c,o),!u){if(r&&typeof t==`string`){var h=n.get(`length`),g=Number(t);Number.isInteger(g)&&g>=h.v&&P(h,g+1)}Ai(i)}return!0},ownKeys(e){V(i);var t=Reflect.ownKeys(e).filter(e=>{var t=n.get(e);return t===void 0||t.v!==Nn});for(var[r,a]of n)a.v!==Nn&&!(r in e)&&t.push(r);return t},setPrototypeOf(){hr()}})}function Ni(e){try{if(typeof e==`object`&&e&&rr in e)return e[rr]}catch{}return e}function Pi(e,t){return Object.is(Ni(e),Ni(t))}var Fi,Ii,Li,Ri;function zi(){if(Fi===void 0){Fi=window,document,Ii=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Li=Rn(t,`firstChild`).get,Ri=Rn(t,`nextSibling`).get,Un(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Un(n)&&(n.__t=void 0)}}function Bi(e=``){return document.createTextNode(e)}function Vi(e){return Li.call(e)}function Hi(e){return Ri.call(e)}function F(e,t){if(!D)return Vi(e);var n=Vi(O);if(n===null)n=O.appendChild(Bi());else if(t&&n.nodeType!==3){var r=Bi();return n?.before(r),Sr(r),r}return Sr(n),n}function I(e,t=!1){if(!D){var n=Vi(e);return n instanceof Comment&&n.data===``?Hi(n):n}if(t&&O?.nodeType!==3){var r=Bi();return O?.before(r),Sr(r),r}return O}function L(e,t=1,n=!1){let r=D?O:e;for(var i;t--;)i=r,r=Hi(r);if(!D)return r;if(n&&r?.nodeType!==3){var a=Bi();return r===null?i?.after(a):r.before(a),Sr(a),a}return Sr(r),r}function Ui(e){e.textContent=``}function Wi(){return!1}function Gi(e,t){if(t){let t=document.body;e.autofocus=!0,Ur(()=>{document.activeElement===t&&e.focus()})}}var Ki=!1;function qi(){Ki||(Ki=!0,document.addEventListener(`reset`,e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(let t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Ji(e){var t=z,n=B;Oa(null),ka(null);try{return e()}finally{Oa(t),ka(n)}}function Yi(e,t,n,r=n){e.addEventListener(t,()=>Ji(n));let i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),qi()}function Xi(e){B===null&&z===null&&dr(e),z!==null&&z.f&256&&B===null&&ur(),Ta&&lr(e)}function Zi(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Qi(e,t,n,r=!0){var i=B;i!==null&&i.f&8192&&(e|=Zn);var a={ctx:A,deps:null,nodes_start:null,nodes_end:null,f:e|Yn,first:null,fn:t,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{qa(a),a.f|=32768}catch(e){throw ma(a),e}else t!==null&&di(a);if(r){var o=a;if(n&&o.deps===null&&o.teardown===null&&o.nodes_start===null&&o.first===o.last&&!(o.f&524288)&&(o=o.first),o!==null&&(o.parent=i,i!==null&&Zi(o,i),z!==null&&z.f&2&&!(e&64))){var s=z;(s.effects??=[]).push(o)}}return a}function $i(){return z!==null&&!Da}function ea(e){let t=Qi(8,null,!1);return Qa(t,Jn),t.teardown=e,t}function ta(e){Xi(`$effect`);var t=B.f;if(!z&&t&32&&!(t&32768)){var n=A;(n.e??=[]).push(e)}else return na(e)}function na(e){return Qi(4|er,e,!1)}function ra(e){return Xi(`$effect.pre`),Qi(8|er,e,!0)}function ia(e){ri.ensure();let t=Qi(64|$n,e,!0);return()=>{ma(t)}}function aa(e){ri.ensure();let t=Qi(64|$n,e,!0);return(e={})=>new Promise(n=>{e.outro?_a(t,()=>{ma(t),n(void 0)}):(ma(t),n(void 0))})}function oa(e){return Qi(4,e,!1)}function sa(e){return Qi(4194304|$n,e,!0)}function ca(e,t=0){return Qi(8|t,e,!0)}function R(e,t=[],n=[]){gi(t,n,t=>{Qi(8,()=>e(...t.map(V)),!0)})}function la(e,t=0){return Qi(16|t,e,!0)}function ua(e,t=!0){return Qi(32|$n,e,!0,t)}function da(e){var t=e.teardown;if(t!==null){let e=Ta,n=z;Ea(!0),Oa(null);try{t.call(null)}finally{Ea(e),Oa(n)}}}function fa(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){let e=n.ac;e!==null&&Ji(()=>{e.abort(or)});var r=n.next;n.f&64?n.parent=null:ma(n,t),n=r}}function pa(e){for(var t=e.first;t!==null;){var n=t.next;t.f&32||ma(t),t=n}}function ma(e,t=!0){var n=!1;(t||e.f&262144)&&e.nodes_start!==null&&e.nodes_end!==null&&(ha(e.nodes_start,e.nodes_end),n=!0),fa(e,t&&!n),Ka(e,0),Qa(e,16384);var r=e.transitions;if(r!==null)for(let e of r)e.stop();da(e);var i=e.parent;i!==null&&i.first!==null&&ga(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function ha(e,t){for(;e!==null;){var n=e===t?null:Hi(e);e.remove(),e=n}}function ga(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function _a(e,t,n=!0){var r=[];ya(e,r,!0),va(r,()=>{n&&ma(e),t&&t()})}function va(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function ya(e,t,n){if(!(e.f&8192)){if(e.f^=Zn,e.transitions!==null)for(let r of e.transitions)(r.is_global||n)&&t.push(r);for(var r=e.first;r!==null;){var i=r.next,a=(r.f&65536)!=0||(r.f&32)!=0;ya(r,t,a?n:!1),r=i}}}function ba(e){xa(e,!0)}function xa(e,t){if(e.f&8192){e.f^=Zn,e.f&1024||(Qa(e,Yn),di(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&65536)!=0||(n.f&32)!=0;xa(n,i?t:!1),n=r}if(e.transitions!==null)for(let n of e.transitions)(n.is_global||t)&&n.in()}}function Sa(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var i=n===r?null:Hi(n);t.append(n),n=i}}let Ca=!1;function wa(e){Ca=e}let Ta=!1;function Ea(e){Ta=e}let z=null,Da=!1;function Oa(e){z=e}let B=null;function ka(e){B=e}let Aa=null;function ja(e){z!==null&&(Aa===null?Aa=[e]:Aa.push(e))}var Ma=null,Na=0;let Pa=null;function Fa(e){Pa=e}let Ia=1;var La=0;let Ra=La;function za(e){Ra=e}let Ba=!1;function Va(){return++Ia}function Ha(e){var t=e.f;if(t&2048)return!0;if(t&4096){var n=e.deps,r=(t&256)!=0;if(n!==null){var i,a,o=(t&512)!=0,s=r&&B!==null&&!Ba,c=n.length;if((o||s)&&(B===null||!(B.f&16384))){var l=e,u=l.parent;for(i=0;i<c;i++)a=n[i],(o||!a?.reactions?.includes(l))&&(a.reactions??=[]).push(l);o&&(l.f^=512),s&&u!==null&&!(u.f&256)&&(l.f^=256)}for(i=0;i<c;i++)if(a=n[i],Ha(a)&&Ti(a),a.wv>e.wv)return!0}(!r||B!==null&&!Ba)&&Qa(e,Jn)}return!1}function Ua(e,t,n=!0){var r=e.reactions;if(r!==null&&!Aa?.includes(e))for(var i=0;i<r.length;i++){var a=r[i];a.f&2?Ua(a,t,!1):t===a&&(n?Qa(a,Yn):a.f&1024&&Qa(a,Xn),di(a))}}function Wa(e){var t=Ma,n=Na,r=Pa,i=z,a=Ba,o=Aa,s=A,c=Da,l=Ra,u=e.f;Ma=null,Na=0,Pa=null,Ba=(u&256)!=0&&(Da||!Ca||z===null),z=u&96?null:e,Aa=null,Mr(e.ctx),Da=!1,Ra=++La,e.ac!==null&&(Ji(()=>{e.ac.abort(or)}),e.ac=null);try{e.f|=tr;var d=e.fn,f=d(),p=e.deps;if(Ma!==null){var m;if(Ka(e,Na),p!==null&&Na>0)for(p.length=Na+Ma.length,m=0;m<Ma.length;m++)p[Na+m]=Ma[m];else e.deps=p=Ma;if(!Ba||u&2&&e.reactions!==null)for(m=Na;m<p.length;m++)(p[m].reactions??=[]).push(e)}else p!==null&&Na<p.length&&(Ka(e,Na),p.length=Na);if(Rr()&&Pa!==null&&!Da&&p!==null&&!(e.f&6146))for(m=0;m<Pa.length;m++)Ua(Pa[m],e);return i!==null&&i!==e&&(La++,Pa!==null&&(r===null?r=Pa:r.push(...Pa))),e.f&8388608&&(e.f^=nr),f}catch(e){return Kr(e)}finally{e.f^=tr,Ma=t,Na=n,Pa=r,z=i,Ba=a,Aa=o,Mr(s),Da=c,Ra=l}}function Ga(e,t){let n=t.reactions;if(n!==null){var r=Fn.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&t.f&2&&(Ma===null||!Ma.includes(t))&&(Qa(t,Xn),t.f&768||(t.f^=512),Si(t),Ka(t,0))}function Ka(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Ga(e,n[r])}function qa(e){var t=e.f;if(!(t&16384)){Qa(e,Jn);var n=B,r=Ca;B=e,Ca=!0;try{t&16?pa(e):fa(e),da(e);var i=Wa(e);e.teardown=typeof i==`function`?i:null,e.wv=Ia}finally{Ca=r,B=n}}}async function Ja(){await Promise.resolve(),ii()}function V(e){var t=(e.f&2)!=0;if(null?.add(e),z!==null&&!Da){if(!(B!==null&&B.f&16384)&&!Aa?.includes(e)){var n=z.deps;if(z.f&2097152)e.rv<La&&(e.rv=La,Ma===null&&n!==null&&n[Na]===e?Na++:Ma===null?Ma=[e]:(!Ba||!Ma.includes(e))&&Ma.push(e));else{(z.deps??=[]).push(e);var r=e.reactions;r===null?e.reactions=[z]:r.includes(z)||r.push(z)}}}else if(t&&e.deps===null&&e.effects===null){var i=e,a=i.parent;a!==null&&!(a.f&256)&&(i.f^=256)}if(Ta){if(Ei.has(e))return Ei.get(e);if(t){i=e;var o=i.v;return(!(i.f&1024)&&i.reactions!==null||Ya(i))&&(o=wi(i)),Ei.set(i,o),o}}else if(t){if(i=e,Zr?.has(i))return Zr.get(i);Ha(i)&&Ti(i)}if(Zr?.has(e))return Zr.get(e);if(e.f&8388608)throw e.v;return e.v}function Ya(e){if(e.v===Nn)return!0;if(e.deps===null)return!1;for(let t of e.deps)if(Ei.has(t)||t.f&2&&Ya(t))return!0;return!1}function Xa(e){var t=Da;try{return Da=!0,e()}finally{Da=t}}var Za=~(Xn|3072);function Qa(e,t){e.f=e.f&Za|t}function $a(e){if(!(typeof e!=`object`||!e||e instanceof EventTarget)){if(rr in e)eo(e);else if(!Array.isArray(e))for(let t in e){let n=e[t];typeof n==`object`&&n&&rr in n&&eo(n)}}}function eo(e,t=new Set){if(typeof e==`object`&&e&&!(e instanceof EventTarget)&&!t.has(e)){for(let n in t.add(e),e instanceof Date&&e.getTime(),e)try{eo(e[n],t)}catch{}let n=Hn(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){let t=zn(n);for(let n in t){let r=t[n].get;if(r)try{r.call(e)}catch{}}}}}let to=new Set,no=new Set;function ro(e,t,n,r={}){function i(e){if(r.capture||co.call(t,e),!e.cancelBubble)return Ji(()=>n?.call(this,e))}return e.startsWith(`pointer`)||e.startsWith(`touch`)||e===`wheel`?Ur(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function io(e,t,n,r={}){var i=ro(t,e,n,r);return()=>{e.removeEventListener(t,i,r)}}function ao(e,t,n,r,i){var a={capture:r,passive:i},o=ro(e,t,n,a);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&ea(()=>{t.removeEventListener(e,o,a)})}function oo(e){for(var t=0;t<e.length;t++)to.add(e[t]);for(var n of no)n(e)}var so=null;function co(e){var t=this,n=t.ownerDocument,r=e.type,i=e.composedPath?.()||[],a=i[0]||e.target;so=e;var o=0,s=so===e&&e.__root;if(s){var c=i.indexOf(s);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var l=i.indexOf(t);if(l===-1)return;c<=l&&(o=c)}if(a=i[o]||e.target,a!==t){Ln(e,`currentTarget`,{configurable:!0,get(){return a||n}});var u=z,d=B;Oa(null),ka(null);try{for(var f,p=[];a!==null;){var m=a.assignedSlot||a.parentNode||a.host||null;try{var h=a[`__`+r];if(h!=null&&(!a.disabled||e.target===a))if(Pn(h)){var[g,..._]=h;g.apply(a,[e,..._])}else h.call(a,e)}catch(e){f?p.push(e):f=e}if(e.cancelBubble||m===t||m===null)break;a=m}if(f){for(let e of p)queueMicrotask(()=>{throw e});throw f}}finally{e.__root=t,delete e.currentTarget,Oa(u),ka(d)}}}function lo(e){var t=document.createElement(`template`);return t.innerHTML=e.replaceAll(`<!>`,`<!---->`),t.content}function uo(e,t){var n=B;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function H(e,t){var n=(t&1)!=0,r=(t&2)!=0,i,a=!e.startsWith(`<!>`);return()=>{if(D)return uo(O,null),O;i===void 0&&(i=lo(a?e:`<!>`+e),n||(i=Vi(i)));var t=r||Ii?document.importNode(i,!0):i.cloneNode(!0);if(n){var o=Vi(t),s=t.lastChild;uo(o,s)}else uo(t,t);return t}}function fo(e,t,n=`svg`){var r=!e.startsWith(`<!>`),i=(t&1)!=0,a=`<${n}>${r?e:`<!>`+e}</${n}>`,o;return()=>{if(D)return uo(O,null),O;if(!o){var e=lo(a),t=Vi(e);if(i)for(o=document.createDocumentFragment();Vi(t);)o.appendChild(Vi(t));else o=Vi(t)}var n=o.cloneNode(!0);if(i){var r=Vi(n),s=n.lastChild;uo(r,s)}else uo(n,n);return n}}function po(e,t){return fo(e,t,`svg`)}function mo(e=``){if(!D){var t=Bi(e+``);return uo(t,t),t}var n=O;return n.nodeType!==3&&(n.before(n=Bi()),Sr(n)),uo(n,n),n}function U(){if(D)return uo(O,null),O;var e=document.createDocumentFragment(),t=document.createComment(``),n=Bi();return e.append(t,n),uo(t,n),e}function W(e,t){if(D){B.nodes_end=O,Cr();return}e!==null&&e.before(t)}function ho(e){return e.endsWith(`capture`)&&e!==`gotpointercapture`&&e!==`lostpointercapture`}var go=[`beforeinput`,`click`,`change`,`dblclick`,`contextmenu`,`focusin`,`focusout`,`input`,`keydown`,`keyup`,`mousedown`,`mousemove`,`mouseout`,`mouseover`,`mouseup`,`pointerdown`,`pointermove`,`pointerout`,`pointerover`,`pointerup`,`touchend`,`touchmove`,`touchstart`];function _o(e){return go.includes(e)}var vo=`allowfullscreen.async.autofocus.autoplay.checked.controls.default.disabled.formnovalidate.indeterminate.inert.ismap.loop.multiple.muted.nomodule.novalidate.open.playsinline.readonly.required.reversed.seamless.selected.webkitdirectory.defer.disablepictureinpicture.disableremoteplayback`.split(`.`),yo={formnovalidate:`formNoValidate`,ismap:`isMap`,nomodule:`noModule`,playsinline:`playsInline`,readonly:`readOnly`,defaultvalue:`defaultValue`,defaultchecked:`defaultChecked`,srcobject:`srcObject`,novalidate:`noValidate`,allowfullscreen:`allowFullscreen`,disablepictureinpicture:`disablePictureInPicture`,disableremoteplayback:`disableRemotePlayback`};function bo(e){return e=e.toLowerCase(),yo[e]??e}[...vo];var xo=[`touchstart`,`touchmove`];function So(e){return xo.includes(e)}let Co=!0;function G(e,t){var n=t==null?``:typeof t==`object`?t+``:t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+``)}function wo(e,t){return Eo(e,t)}var To=new Map;function Eo(e,{target:t,anchor:n,props:r={},events:i,context:a,intro:o=!0}){zi();var s=new Set,c=e=>{for(var n=0;n<e.length;n++){var r=e[n];if(!s.has(r)){s.add(r);var i=So(r);t.addEventListener(r,co,{passive:i});var a=To.get(r);a===void 0?(document.addEventListener(r,co,{passive:i}),To.set(r,1)):To.set(r,a+1)}}};c(In(to)),no.add(c);var l=void 0,u=aa(()=>{var u=n??t.appendChild(Bi());return mi(u,{pending:()=>{}},t=>{if(a){Ir({});var n=A;n.c=a}if(i&&(r.$$events=i),D&&uo(t,null),Co=o,l=e(t,r)||{},Co=!0,D&&(B.nodes_end=O,O===null||O.nodeType!==8||O.data!==`]`))throw vr(),Mn;a&&Lr()}),()=>{for(var e of s){t.removeEventListener(e,co);var r=To.get(e);--r===0?(document.removeEventListener(e,co),To.delete(e)):To.set(e,r)}no.delete(c),u!==n&&u.parentNode?.removeChild(u)}});return Do.set(l,u),l}var Do=new WeakMap,Oo=class{anchor;#batches=new Map;#onscreen=new Map;#offscreen=new Map;#transition=!0;constructor(e,t=!0){this.anchor=e,this.#transition=t}#commit=()=>{var e=j;if(this.#batches.has(e)){var t=this.#batches.get(e),n=this.#onscreen.get(t);if(n)ba(n);else{var r=this.#offscreen.get(t);r&&(this.#onscreen.set(t,r.effect),this.#offscreen.delete(t),r.fragment.lastChild.remove(),this.anchor.before(r.fragment),n=r.effect)}for(let[t,n]of this.#batches){if(this.#batches.delete(t),t===e)break;let r=this.#offscreen.get(n);r&&(ma(r.effect),this.#offscreen.delete(n))}for(let[e,r]of this.#onscreen){if(e===t)continue;let i=()=>{if(Array.from(this.#batches.values()).includes(e)){var t=document.createDocumentFragment();Sa(r,t),t.append(Bi()),this.#offscreen.set(e,{effect:r,fragment:t})}else ma(r);this.#onscreen.delete(e)};this.#transition||!n?_a(r,i,!1):i()}}};ensure(e,t){var n=j,r=Wi();if(t&&!this.#onscreen.has(e)&&!this.#offscreen.has(e))if(r){var i=document.createDocumentFragment(),a=Bi();i.append(a),this.#offscreen.set(e,{effect:ua(()=>t(a)),fragment:i})}else this.#onscreen.set(e,ua(()=>t(this.anchor)));if(this.#batches.set(n,e),r){for(let[t,r]of this.#onscreen)t===e?n.skipped_effects.delete(r):n.skipped_effects.add(r);for(let[t,r]of this.#offscreen)t===e?n.skipped_effects.delete(r.effect):n.skipped_effects.add(r.effect);n.add_callback(this.#commit)}else D&&(this.anchor=O),this.#commit()}};function ko(e,t,...n){var r=new Oo(e);la(()=>{let e=t()??null;r.ensure(e,e&&(t=>e(t,...n)))},Qn)}function Ao(e){A===null&&sr(`onMount`),Ar&&A.l!==null?Mo(A).m.push(e):ta(()=>{let t=Xa(e);if(typeof t==`function`)return t})}function jo(e){A===null&&sr(`onDestroy`),Ao(()=>()=>Xa(e))}function Mo(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}function K(e,t,n=!1){D&&Cr();var r=new Oo(e),i=n?Qn:0;function a(t,n){if(D){let a=Er(e)===`[!`;if(t===a){var i=Tr();Sr(i),r.anchor=i,xr(!1),r.ensure(t,n),xr(!0);return}}r.ensure(t,n)}la(()=>{var e=!1;t((t,n=!0)=>{e=!0,a(n,t)}),e||a(!1,null)},i)}let No=null;function Po(e,t){return t}function Fo(e,t,n){for(var r=e.items,i=[],a=t.length,o=0;o<a;o++)ya(t[o].e,i,!0);var s=a>0&&i.length===0&&n!==null;if(s){var c=n.parentNode;Ui(c),c.append(n),r.clear(),Vo(e,t[0].prev,t[a-1].next)}va(i,()=>{for(var n=0;n<a;n++){var i=t[n];s||(r.delete(i.k),Vo(e,i.prev,i.next)),ma(i.e,!s)}})}function Io(e,t,n,r,i,a=null){var o=e,s={flags:t,items:new Map,first:null};if(t&4){var c=e;o=D?Sr(Vi(c)):c.appendChild(Bi())}D&&Cr();var l=null,u=!1,d=new Map,f=xi(()=>{var e=n();return Pn(e)?e:e==null?[]:In(e)}),p,m;function h(){Lo(m,p,s,d,o,i,t,r,n),a!==null&&(p.length===0?l?ba(l):l=ua(()=>a(o)):l!==null&&_a(l,()=>{l=null}))}la(()=>{m??=B,p=V(f);var e=p.length;if(u&&e===0)return;u=e===0;let c=!1;if(D&&Er(o)===`[!`!=(e===0)&&(o=Tr(),Sr(o),xr(!1),c=!0),D){for(var g=null,_,v=0;v<e;v++){if(O.nodeType===8&&O.data===`]`){o=O,c=!0,xr(!1);break}var y=p[v],b=r(y,v);_=zo(O,s,g,null,y,b,v,i,t,n),s.items.set(b,_),g=_}e>0&&Sr(Tr())}if(D)e===0&&a&&(l=ua(()=>a(o)));else if(Wi()){var x=new Set,S=j;for(v=0;v<e;v+=1){y=p[v],b=r(y,v);var C=s.items.get(b)??d.get(b);C?t&3&&Ro(C,y,v,t):(_=zo(null,s,null,null,y,b,v,i,t,n,!0),d.set(b,_)),x.add(b)}for(let[e,t]of s.items)x.has(e)||S.skipped_effects.add(t.e);S.add_callback(h)}else h();c&&xr(!0),V(f)}),D&&(o=O)}function Lo(e,t,n,r,i,a,o,s,c){var l=(o&8)!=0,u=(o&3)!=0,d=t.length,f=n.items,p=n.first,m,h=null,g,_=[],v=[],y,b,x,S;if(l)for(S=0;S<d;S+=1)y=t[S],b=s(y,S),x=f.get(b),x!==void 0&&(x.a?.measure(),(g??=new Set).add(x));for(S=0;S<d;S+=1){if(y=t[S],b=s(y,S),x=f.get(b),x===void 0){var C=r.get(b);if(C!==void 0){r.delete(b),f.set(b,C);var ee=h?h.next:p;Vo(n,h,C),Vo(n,C,ee),Bo(C,ee,i),h=C}else{var te=p?p.e.nodes_start:i;h=zo(te,n,h,h===null?n.first:h.next,y,b,S,a,o,c)}f.set(b,h),_=[],v=[],p=h.next;continue}if(u&&Ro(x,y,S,o),x.e.f&8192&&(ba(x.e),l&&(x.a?.unfix(),(g??=new Set).delete(x))),x!==p){if(m!==void 0&&m.has(x)){if(_.length<v.length){var ne=v[0],w;h=ne.prev;var re=_[0],ie=_[_.length-1];for(w=0;w<_.length;w+=1)Bo(_[w],ne,i);for(w=0;w<v.length;w+=1)m.delete(v[w]);Vo(n,re.prev,ie.next),Vo(n,h,re),Vo(n,ie,ne),p=ne,h=ie,--S,_=[],v=[]}else m.delete(x),Bo(x,p,i),Vo(n,x.prev,x.next),Vo(n,x,h===null?n.first:h.next),Vo(n,h,x),h=x;continue}for(_=[],v=[];p!==null&&p.k!==b;)p.e.f&8192||(m??=new Set).add(p),v.push(p),p=p.next;if(p===null)continue;x=p}_.push(x),h=x,p=x.next}if(p!==null||m!==void 0){for(var ae=m===void 0?[]:In(m);p!==null;)p.e.f&8192||ae.push(p),p=p.next;var oe=ae.length;if(oe>0){var se=o&4&&d===0?i:null;if(l){for(S=0;S<oe;S+=1)ae[S].a?.measure();for(S=0;S<oe;S+=1)ae[S].a?.fix()}Fo(n,ae,se)}}l&&Ur(()=>{if(g!==void 0)for(x of g)x.a?.apply()}),e.first=n.first&&n.first.e,e.last=h&&h.e;for(var ce of r.values())ma(ce.e);r.clear()}function Ro(e,t,n,r){r&1&&ki(e.v,t),r&2?ki(e.i,n):e.i=n}function zo(e,t,n,r,i,a,o,s,c,l,u){var d=No,f=(c&1)!=0,p=(c&16)==0,m=f?p?Oi(i,!1,!1):Di(i):i,h=c&2?Di(o):o,g={i:h,v:m,k:a,a:null,e:null,prev:n,next:r};No=g;try{return e===null&&document.createDocumentFragment().append(e=Bi()),g.e=ua(()=>s(e,m,h,l),D),g.e.prev=n&&n.e,g.e.next=r&&r.e,n===null?u||(t.first=g):(n.next=g,n.e.next=g.e),r!==null&&(r.prev=g,r.e.prev=g.e),g}finally{No=d}}function Bo(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,a=e.e.nodes_start;a!==null&&a!==r;){var o=Hi(a);i.before(a),a=o}}function Vo(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Ho(e,t,n=!1,r=!1,i=!1){var a=e,o=``;R(()=>{var e=B;if(o===(o=t()??``)){D&&Cr();return}if(e.nodes_start!==null&&(ha(e.nodes_start,e.nodes_end),e.nodes_start=e.nodes_end=null),o!==``){if(D){for(var i=O.data,s=Cr(),c=s;s!==null&&(s.nodeType!==8||s.data!==``);)c=s,s=Hi(s);if(s===null)throw vr(),Mn;uo(O,c),a=Sr(s);return}var l=o+``;n?l=`<svg>${l}</svg>`:r&&(l=`<math>${l}</math>`);var u=lo(l);if((n||r)&&(u=Vi(u)),uo(Vi(u),u.lastChild),n||r)for(;Vi(u);)a.before(Vi(u));else a.before(u)}})}function Uo(e,t,n){D&&Cr();var r=new Oo(e);la(()=>{var e=t()??null;r.ensure(e,e&&(t=>n(t,e)))},Qn)}function Wo(e,t){oa(()=>{var n=e.getRootNode(),r=n.host?n:n.head??n.ownerDocument.head;if(!r.querySelector(`#`+t.hash)){let e=document.createElement(`style`);e.id=t.hash,e.textContent=t.code,r.appendChild(e)}})}function Go(e,t){var n=void 0,r;la(()=>{n!==(n=t())&&(r&&=(ma(r),null),n&&(r=ua(()=>{oa(()=>n(e))})))})}function Ko(e){var t,n,r=``;if(typeof e==`string`||typeof e==`number`)r+=e;else if(typeof e==`object`)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Ko(e[t]))&&(r&&(r+=` `),r+=n)}else for(n in e)e[n]&&(r&&(r+=` `),r+=n);return r}function qo(){for(var e,t,n=0,r=``,i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Ko(e))&&(r&&(r+=` `),r+=t);return r}function Jo(e){return typeof e==`object`?qo(e):e??``}var Yo=[...` 	
\r\f\xA0\v﻿`];function Xo(e,t,n){var r=e==null?``:``+e;if(t&&(r=r?r+` `+t:t),n){for(var i in n)if(n[i])r=r?r+` `+i:i;else if(r.length)for(var a=i.length,o=0;(o=r.indexOf(i,o))>=0;){var s=o+a;(o===0||Yo.includes(r[o-1]))&&(s===r.length||Yo.includes(r[s]))?r=(o===0?``:r.substring(0,o))+r.substring(s+1):o=s}}return r===``?null:r}function Zo(e,t=!1){var n=t?` !important;`:`;`,r=``;for(var i in e){var a=e[i];a!=null&&a!==``&&(r+=` `+i+`: `+a+n)}return r}function Qo(e){return e[0]!==`-`||e[1]!==`-`?e.toLowerCase():e}function $o(e,t){if(t){var n=``,r,i;if(Array.isArray(t)?(r=t[0],i=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,``).trim();var a=!1,o=0,s=!1,c=[];r&&c.push(...Object.keys(r).map(Qo)),i&&c.push(...Object.keys(i).map(Qo));var l=0,u=-1;let t=e.length;for(var d=0;d<t;d++){var f=e[d];if(s?f===`/`&&e[d-1]===`*`&&(s=!1):a?a===f&&(a=!1):f===`/`&&e[d+1]===`*`?s=!0:f===`"`||f===`'`?a=f:f===`(`?o++:f===`)`&&o--,!s&&a===!1&&o===0){if(f===`:`&&u===-1)u=d;else if(f===`;`||d===t-1){if(u!==-1){var p=Qo(e.substring(l,u).trim());if(!c.includes(p)){f!==`;`&&d++;var m=e.substring(l,d).trim();n+=` `+m+`;`}}l=d+1,u=-1}}}}return r&&(n+=Zo(r)),i&&(n+=Zo(i,!0)),n=n.trim(),n===``?null:n}return e==null?null:String(e)}function es(e,t,n,r,i,a){var o=e.__className;if(D||o!==n||o===void 0){var s=Xo(n,r,a);(!D||s!==e.getAttribute(`class`))&&(s==null?e.removeAttribute(`class`):t?e.className=s:e.setAttribute(`class`,s)),e.__className=n}else if(a&&i!==a)for(var c in a){var l=!!a[c];(i==null||l!==!!i[c])&&e.classList.toggle(c,l)}return a}function ts(e,t={},n,r){for(var i in n){var a=n[i];t[i]!==a&&(n[i]==null?e.style.removeProperty(i):e.style.setProperty(i,a,r))}}function ns(e,t,n,r){var i=e.__style;if(D||i!==t){var a=$o(t,r);(!D||a!==e.getAttribute(`style`))&&(a==null?e.removeAttribute(`style`):e.style.cssText=a),e.__style=t}else r&&(Array.isArray(r)?(ts(e,n?.[0],r[0]),ts(e,n?.[1],r[1],`important`)):ts(e,n,r));return r}function rs(e,t,n=!1){if(e.multiple){if(t==null)return;if(!Pn(t))return yr();for(var r of e.options)r.selected=t.includes(ss(r));return}for(r of e.options){var i=ss(r);if(Pi(i,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function os(e){var t=new MutationObserver(()=>{rs(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:[`value`]}),ea(()=>{t.disconnect()})}function ss(e){return`__value`in e?e.__value:e.value}let cs=Symbol(`class`),ls=Symbol(`style`);var us=Symbol(`is custom element`),ds=Symbol(`is html`);function fs(e){if(D){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute(`value`)){var n=e.value;q(e,`value`,null),e.value=n}if(e.hasAttribute(`checked`)){var r=e.checked;q(e,`checked`,null),e.checked=r}}};e.__on_r=n,Ur(n),qi()}}function ps(e,t){t?e.hasAttribute(`selected`)||e.setAttribute(`selected`,``):e.removeAttribute(`selected`)}function q(e,t,n,r){var i=gs(e);D&&(i[t]=e.getAttribute(t),t===`src`||t===`srcset`||t===`href`&&e.nodeName===`LINK`)||i[t]!==(i[t]=n)&&(t===`loading`&&(e[ar]=n),n==null?e.removeAttribute(t):typeof n!=`string`&&vs(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function ms(e,t,n,r,i=!1,a=!1){if(D&&i&&e.tagName===`INPUT`){var o=e;(o.type===`checkbox`?`defaultChecked`:`defaultValue`)in n||fs(o)}var s=gs(e),c=s[us],l=!s[ds];let u=D&&c;u&&xr(!1);var d=t||{},f=e.tagName===`OPTION`;for(var p in t)p in n||(n[p]=null);n.class?n.class=Jo(n.class):(r||n[cs])&&(n.class=null),n[ls]&&(n.style??=null);var m=vs(e);for(let i in n){let o=n[i];if(f&&i===`value`&&o==null){e.value=e.__value=``,d[i]=o;continue}if(i===`class`){var h=e.namespaceURI===`http://www.w3.org/1999/xhtml`;es(e,h,o,r,t?.[cs],n[cs]),d[i]=o,d[cs]=n[cs];continue}if(i===`style`){ns(e,o,t?.[ls],n[ls]),d[i]=o,d[ls]=n[ls];continue}var g=d[i];if(!(o===g&&!(o===void 0&&e.hasAttribute(i)))){d[i]=o;var _=i[0]+i[1];if(_!==`$$`)if(_===`on`){let t={},n=`$$`+i,r=i.slice(2);var v=_o(r);if(ho(r)&&(r=r.slice(0,-7),t.capture=!0),!v&&g){if(o!=null)continue;e.removeEventListener(r,d[n],t),d[n]=null}if(o!=null)if(v)e[`__${r}`]=o,oo([r]);else{function a(e){d[i].call(this,e)}d[n]=ro(r,e,a,t)}else v&&(e[`__${r}`]=void 0)}else if(i===`style`)q(e,i,o);else if(i===`autofocus`)Gi(e,!!o);else if(!c&&(i===`__value`||i===`value`&&o!=null))e.value=e.__value=o;else if(i===`selected`&&f)ps(e,o);else{var y=i;l||(y=bo(y));var b=y===`defaultValue`||y===`defaultChecked`;if(o==null&&!c&&!b)if(s[i]=null,y===`value`||y===`checked`){let n=e,r=t===void 0;if(y===`value`){let e=n.defaultValue;n.removeAttribute(y),n.defaultValue=e,n.value=n.__value=r?e:null}else{let e=n.defaultChecked;n.removeAttribute(y),n.defaultChecked=e,n.checked=r?e:!1}}else e.removeAttribute(i);else b||m.includes(y)&&(c||typeof o!=`string`)?(e[y]=o,y in s&&(s[y]=Nn)):typeof o!=`function`&&q(e,y,o,a)}}}return u&&xr(!0),d}function hs(e,t,n=[],r=[],i,a=!1,o=!1){gi(n,r,n=>{var r=void 0,s={},c=e.nodeName===`SELECT`,l=!1;if(la(()=>{var u=t(...n.map(V)),d=ms(e,r,u,i,a,o);l&&c&&`value`in u&&rs(e,u.value);for(let e of Object.getOwnPropertySymbols(s))u[e]||ma(s[e]);for(let t of Object.getOwnPropertySymbols(u)){var f=u[t];t.description===`@attach`&&(!r||f!==r[t])&&(s[t]&&ma(s[t]),s[t]=ua(()=>Go(e,()=>f))),d[t]=f}r=d}),c){var u=e;oa(()=>{rs(u,r.value,!0),os(u)})}l=!0})}function gs(e){return e.__attributes??={[us]:e.nodeName.includes(`-`),[ds]:e.namespaceURI===`http://www.w3.org/1999/xhtml`}}var _s=new Map;function vs(e){var t=e.getAttribute(`is`)||e.nodeName,n=_s.get(t);if(n)return n;_s.set(t,n=[]);for(var r,i=e,a=Element.prototype;a!==i;){for(var o in r=zn(i),r)r[o].set&&n.push(o);i=Hn(i)}return n}var ys=()=>performance.now();let bs={tick:e=>requestAnimationFrame(e),now:()=>ys(),tasks:new Set};function xs(){let e=bs.now();bs.tasks.forEach(t=>{t.c(e)||(bs.tasks.delete(t),t.f())}),bs.tasks.size!==0&&bs.tick(xs)}function Ss(e){let t;return bs.tasks.size===0&&bs.tick(xs),{promise:new Promise(n=>{bs.tasks.add(t={c:e,f:n})}),abort(){bs.tasks.delete(t)}}}function Cs(e,t){Ji(()=>{e.dispatchEvent(new CustomEvent(t))})}function ws(e){if(e===`float`)return`cssFloat`;if(e===`offset`)return`cssOffset`;if(e.startsWith(`--`))return e;let t=e.split(`-`);return t.length===1?t[0]:t[0]+t.slice(1).map(e=>e[0].toUpperCase()+e.slice(1)).join(``)}function Ts(e){let t={},n=e.split(`;`);for(let e of n){let[n,r]=e.split(`:`);if(!n||r===void 0)break;let i=ws(n.trim());t[i]=r.trim()}return t}var Es=e=>e;function Ds(e,t,n,r){var i=(e&1)!=0,a=(e&2)!=0,o=i&&a,s=(e&4)!=0,c=o?`both`:i?`in`:`out`,l,u=t.inert,d=t.style.overflow,f,p;function m(){return Ji(()=>l??=n()(t,r?.()??{},{direction:c}))}var h={is_global:s,in(){if(t.inert=u,!i){p?.abort(),p?.reset?.();return}a||f?.abort(),Cs(t,`introstart`),f=Os(t,m(),p,1,()=>{Cs(t,`introend`),f?.abort(),f=l=void 0,t.style.overflow=d})},out(e){if(!a){e?.(),l=void 0;return}t.inert=!0,Cs(t,`outrostart`),p=Os(t,m(),f,0,()=>{Cs(t,`outroend`),e?.()})},stop:()=>{f?.abort(),p?.abort()}},g=B;if((g.transitions??=[]).push(h),i&&Co){var _=s;if(!_){for(var v=g.parent;v&&v.f&65536;)for(;(v=v.parent)&&!(v.f&16););_=!v||(v.f&32768)!=0}_&&oa(()=>{Xa(()=>h.in())})}}function Os(e,t,n,r,i){var a=r===1;if(Wn(t)){var o,s=!1;return Ur(()=>{if(!s){var c=t({direction:a?`in`:`out`});o=Os(e,c,n,r,i)}}),{abort:()=>{s=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(n?.deactivate(),!t?.duration)return i(),{abort:E,deactivate:E,reset:E,t:()=>r};let{delay:c=0,css:l,tick:u,easing:d=Es}=t;var f=[];if(a&&n===void 0&&(u&&u(0,1),l)){var p=Ts(l(0,1));f.push(p,p)}var m=()=>1-r,h=e.animate(f,{duration:c,fill:`forwards`});return h.onfinish=()=>{h.cancel();var a=n?.t()??1-r;n?.abort();var o=r-a,s=t.duration*Math.abs(o),c=[];if(s>0){var f=!1;if(l)for(var p=Math.ceil(s/(1e3/60)),g=0;g<=p;g+=1){var _=a+o*d(g/p),v=Ts(l(_,1-_));c.push(v),f||=v.overflow===`hidden`}f&&(e.style.overflow=`hidden`),m=()=>{var e=h.currentTime;return a+o*d(e/s)},u&&Ss(()=>{if(h.playState!==`running`)return!1;var e=m();return u(e,1-e),!0})}h=e.animate(c,{duration:s,fill:`forwards`}),h.onfinish=()=>{m=()=>r,u?.(r,1-r),i()}},{abort:()=>{h&&(h.cancel(),h.effect=null,h.onfinish=E)},deactivate:()=>{i=E},reset:()=>{r===0&&u?.(1,0)},t:()=>m()}}function ks(e,t,n=t){var r=new WeakSet;Yi(e,`input`,async i=>{var a=i?e.defaultValue:e.value;if(a=As(e)?js(a):a,n(a),j!==null&&r.add(j),await Ja(),a!==(a=t())){var o=e.selectionStart,s=e.selectionEnd,c=e.value.length;if(e.value=a??``,s!==null){var l=e.value.length;o===s&&s===c&&l>c?(e.selectionStart=l,e.selectionEnd=l):(e.selectionStart=o,e.selectionEnd=Math.min(s,l))}}}),(D&&e.defaultValue!==e.value||Xa(t)==null&&e.value)&&(n(As(e)?js(e.value):e.value),j!==null&&r.add(j)),ca(()=>{var n=t();if(e===document.activeElement){var i=Xr??j;if(r.has(i))return}As(e)&&n===js(e.value)||e.type===`date`&&!n&&!e.value||n!==e.value&&(e.value=n??``)})}function As(e){var t=e.type;return t===`number`||t===`range`}function js(e){return e===``?null:+e}function Ms(e,t){return e===t||e?.[rr]===t}function Ns(e={},t,n,r){return oa(()=>{var i,a;return ca(()=>{i=a,a=r?.()||[],Xa(()=>{e!==n(...a)&&(t(e,...a),i&&Ms(n(...i),e)&&t(null,...i))})}),()=>{Ur(()=>{a&&Ms(n(...a),e)&&t(null,...a)})}}),e}function Ps(e=!1){let t=A,n=t.l.u;if(!n)return;let r=()=>$a(t.s);if(e){let e=0,n={},i=yi(()=>{let r=!1,i=t.s;for(let e in i)i[e]!==n[e]&&(n[e]=i[e],r=!0);return r&&e++,e});r=()=>V(i)}n.b.length&&ra(()=>{Fs(t,r),Kn(n.b)}),ta(()=>{let e=Xa(()=>n.m.map(Gn));return()=>{for(let t of e)typeof t==`function`&&t()}}),n.a.length&&ta(()=>{Fs(t,r),Kn(n.a)})}function Fs(e,t){if(e.l.s)for(let t of e.l.s)V(t);t()}function Is(e,t,n){if(e==null)return t(void 0),n&&n(void 0),E;let r=Xa(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}var Ls=[];function Rs(e,t){return{subscribe:zs(e,t).subscribe}}function zs(e,t=E){let n=null,r=new Set;function i(t){if(Or(e,t)&&(e=t,n)){let t=!Ls.length;for(let t of r)t[1](),Ls.push(t,e);if(t){for(let e=0;e<Ls.length;e+=2)Ls[e][0](Ls[e+1]);Ls.length=0}}}function a(t){i(t(e))}function o(o,s=E){let c=[o,s];return r.add(c),r.size===1&&(n=t(i,a)||E),o(e),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:i,update:a,subscribe:o}}function Bs(e,t,n){let r=!Array.isArray(e),i=r?[e]:e;if(!i.every(Boolean))throw Error(`derived() expects stores as input, got a falsy value`);let a=t.length<2;return Rs(n,(e,n)=>{let o=!1,s=[],c=0,l=E,u=()=>{if(c)return;l();let i=t(r?s[0]:s,e,n);a?e(i):l=typeof i==`function`?i:E},d=i.map((e,t)=>Is(e,e=>{s[t]=e,c&=~(1<<t),o&&u()},()=>{c|=1<<t}));return o=!0,u(),function(){Kn(d),l(),o=!1}})}function Vs(e){let t;return Is(e,e=>t=e)(),t}var Hs=!1,Us=Symbol();function Ws(e,t,n){let r=n[t]??={store:null,source:Oi(void 0),unsubscribe:E};if(r.store!==e&&!(Us in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=E;else{var i=!0;r.unsubscribe=Is(e,e=>{i?r.source.v=e:P(r.source,e)}),i=!1}return e&&Us in n?Vs(e):V(r.source)}function Gs(){let e={};function t(){ea(()=>{for(var t in e)e[t].unsubscribe();Ln(e,Us,{enumerable:!1,value:!0})})}return[e,t]}function Ks(e){var t=Hs;try{return Hs=!1,[e(),Hs]}finally{Hs=t}}var qs={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function Js(e,t,n){return new Proxy({props:e,exclude:t},qs)}var Ys={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Wn(r)&&(r=r()),typeof r==`object`&&r&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let i=e.props[r];Wn(i)&&(i=i());let a=Rn(i,t);if(a&&a.set)return a.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Wn(r)&&(r=r()),typeof r==`object`&&r&&t in r){let e=Rn(r,t);return e&&!e.configurable&&(e.configurable=!0),e}}},has(e,t){if(t===rr||t===ir)return!1;for(let n of e.props)if(Wn(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){let t=[];for(let n of e.props)if(Wn(n)&&(n=n()),n){for(let e in n)t.includes(e)||t.push(e);for(let e of Object.getOwnPropertySymbols(n))t.includes(e)||t.push(e)}return t}};function Xs(...e){return new Proxy({props:e},Ys)}function Zs(e,t,n,r){var i=!Ar||(n&2)!=0,a=(n&8)!=0,o=(n&16)!=0,s=r,c=!0,l=()=>(c&&(c=!1,s=o?Xa(r):r),s),u;if(a){var d=rr in e||ir in e;u=Rn(e,t)?.set??(d&&t in e?n=>e[t]=n:void 0)}var f,p=!1;a?[f,p]=Ks(()=>e[t]):f=e[t],f===void 0&&r!==void 0&&(f=l(),u&&(i&&pr(t),u(f)));var m=i?()=>{var n=e[t];return n===void 0?l():(c=!0,n)}:()=>{var n=e[t];return n!==void 0&&(s=void 0),n===void 0?s:n};if(i&&!(n&4))return m;if(u){var h=e.$$legacy;return(function(e,t){return arguments.length>0?((!i||!t||h||p)&&u(t?m():e),e):m()})}var g=!1,_=(n&1?yi:xi)(()=>(g=!1,m()));a&&V(_);var v=B;return(function(e,t){if(arguments.length>0){let n=t?V(_):i&&a?Mi(e):e;return P(_,n),g=!0,s!==void 0&&(s=n),e}return Ta&&g||v.f&16384?_.v:V(_)})}var Qs=Array(12).fill(0),$s=H(`<div class="sonner-loading-bar"></div>`),ec=H(`<div><div class="sonner-spinner"></div></div>`);function tc(e,t){Ir(t,!0);var n=ec(),r=F(n);Io(r,23,()=>Qs,(e,t)=>`spinner-bar-${t}`,(e,t)=>{var n=$s();W(e,n)}),k(r),k(n),R(e=>{es(n,1,e),q(n,`data-visible`,t.visible)},[()=>Jo([`sonner-loading-wrapper`,t.class].filter(Boolean).join(` `))]),W(e,n),Lr()}function nc(...e){return e.filter(Boolean).join(` `)}let rc=typeof document<`u`,ic=typeof window<`u`?window:void 0;typeof window<`u`&&window.document,typeof window<`u`&&window.navigator,typeof window<`u`&&window.location;function ac(e){let t=e.activeElement;for(;t?.shadowRoot;){let e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}URLSearchParams,Symbol.iterator,new class{#document;#subscribe;constructor(e={}){let{window:t=ic,document:n=t?.document}=e;t!==void 0&&(this.#document=n,this.#subscribe=fi(e=>{let n=io(t,`focusin`,e),r=io(t,`focusout`,e);return()=>{n(),r()}}))}get current(){return this.#subscribe?.(),this.#document?ac(this.#document):null}};var oc=class{#name;#key;constructor(e){this.#name=e,this.#key=Symbol(e)}get key(){return this.#key}exists(){return Fr(this.#key)}get(){let e=Nr(this.#key);if(e===void 0)throw Error(`Context "${this.#name}" not found`);return e}getOr(e){let t=Nr(this.#key);return t===void 0?e:t}set(e){return Pr(this.#key,e)}};function sc(e,t){switch(e){case`post`:ta(t);break;case`pre`:ra(t);break}}function cc(e,t,n,r={}){let{lazy:i=!1}=r,a=!i,o=Array.isArray(e)?[]:void 0;sc(t,()=>{let t=Array.isArray(e)?e.map(e=>e()):e();if(!a){a=!0,o=t;return}let r=Xa(()=>n(t,o));return o=t,r})}function lc(e,t,n){let r=ia(()=>{let i=!1;cc(e,t,(e,t)=>{if(i){r();return}let a=n(e,t);return i=!0,a},{lazy:!0})});ta(()=>r)}function uc(e,t,n){cc(e,`post`,t,n)}function dc(e,t,n){cc(e,`pre`,t,n)}uc.pre=dc;function fc(e,t){lc(e,`post`,t)}function pc(e,t){lc(e,`pre`,t)}fc.pre=pc;function mc(e,t){let n,r=null;return(...i)=>new Promise(a=>{r&&r(void 0),r=a,clearTimeout(n),n=setTimeout(async()=>{let t=await e(...i);r&&=(r(t),null)},t)})}function hc(e,t){let n=0,r=null;return(...i)=>{let a=Date.now();return n&&a-n<t?r??Promise.resolve(void 0):(n=a,r=e(...i),r)}}function gc(e,t,n={},r){let{lazy:i=!1,once:a=!1,initialValue:o,debounce:s,throttle:c}=n,l=N(Mi(o)),u=N(!1),d=N(void 0),f=N(Mi([])),p=()=>{V(f).forEach(e=>e()),P(f,[],!0)},m=e=>{P(f,[...V(f),e],!0)},h=async(e,n,r=!1)=>{try{P(u,!0),P(d,void 0),p();let i=new AbortController;m(()=>i.abort());let a=await t(e,n,{data:V(l),refetching:r,onCleanup:m,signal:i.signal});return P(l,a,!0),a}catch(e){e instanceof DOMException&&e.name===`AbortError`||P(d,e,!0);return}finally{P(u,!1)}},g=s?mc(h,s):c?hc(h,c):h,_=Array.isArray(e)?e:[e],v;return r((t,n)=>{a&&v||(v=t,g(Array.isArray(e)?t:t[0],Array.isArray(e)?n:n?.[0]))},{lazy:i}),{get current(){return V(l)},get loading(){return V(u)},get error(){return V(d)},mutate:e=>{P(l,e,!0)},refetch:t=>{let n=_.map(e=>e());return g(Array.isArray(e)?n:n[0],Array.isArray(e)?n:n[0],t??!0)}}}function _c(e,t,n){return gc(e,t,n,(t,n)=>{let r=Array.isArray(e)?e:[e];uc(()=>r.map(e=>e()),(e,n)=>{t(e,n??[])},n)})}function vc(e,t,n){return gc(e,t,n,(t,n)=>{let r=Array.isArray(e)?e:[e];uc.pre(()=>r.map(e=>e()),(e,n)=>{t(e,n??[])},n)})}_c.pre=vc,new oc(`richColorsContext`);let yc=new oc(`<Toaster/>`);var bc=0,xc=class{#toasts=N(Mi([]));get toasts(){return V(this.#toasts)}set toasts(e){P(this.#toasts,e,!0)}#heights=N(Mi([]));get heights(){return V(this.#heights)}set heights(e){P(this.#heights,e,!0)}#findToastIdx=e=>{let t=this.toasts.findIndex(t=>t.id===e);return t===-1?null:t};addToast=e=>{rc&&this.toasts.unshift(e)};updateToast=({id:e,data:t,type:n,message:r})=>{let i=this.toasts.findIndex(t=>t.id===e),a=this.toasts[i];this.toasts[i]={...a,...t,id:e,title:r,type:n,updated:!0}};create=e=>{let{message:t,...n}=e,r=typeof e?.id==`number`||e.id&&e.id?.length>0?e.id:bc++,i=e.dismissable===void 0?!0:e.dismissable,a=e.type===void 0?`default`:e.type;return Xa(()=>{this.toasts.find(e=>e.id===r)?this.updateToast({id:r,data:e,type:a,message:t,dismissable:i}):this.addToast({...n,id:r,title:t,dismissable:i,type:a})}),r};dismiss=e=>(Xa(()=>{if(e===void 0){this.toasts=this.toasts.map(e=>({...e,dismiss:!0}));return}let t=this.toasts.findIndex(t=>t.id===e);this.toasts[t]&&(this.toasts[t]={...this.toasts[t],dismiss:!0})}),e);remove=e=>{if(e===void 0){this.toasts=[];return}let t=this.#findToastIdx(e);if(t!==null)return this.toasts.splice(t,1),e};message=(e,t)=>this.create({...t,type:`default`,message:e});error=(e,t)=>this.create({...t,type:`error`,message:e});success=(e,t)=>this.create({...t,type:`success`,message:e});info=(e,t)=>this.create({...t,type:`info`,message:e});warning=(e,t)=>this.create({...t,type:`warning`,message:e});loading=(e,t)=>this.create({...t,type:`loading`,message:e});promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:`loading`,message:typeof t.loading==`string`?t.loading:t.loading()}));let r=e instanceof Promise?e:e(),i=n!==void 0;return r.then(e=>{if(typeof e==`object`&&e&&`ok`in e&&typeof e.ok==`boolean`&&!e.ok){i=!1;let t=Sc(e);this.create({id:n,type:`error`,message:t})}else if(t.success!==void 0){i=!1;let r=typeof t.success==`function`?t.success(e):t.success;this.create({id:n,type:`success`,message:r})}}).catch(e=>{if(t.error!==void 0){i=!1;let r=typeof t.error==`function`?t.error(e):t.error;this.create({id:n,type:`error`,message:r})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),t.finally?.()}),n};custom=(e,t)=>{let n=t?.id||bc++;return this.create({component:e,id:n,...t}),n};removeHeight=e=>{this.heights=this.heights.filter(t=>t.toastId!==e)};setHeight=e=>{let t=this.#findToastIdx(e.toastId);if(t===null){this.heights.push(e);return}this.heights[t]=e};reset=()=>{this.toasts=[],this.heights=[]}};function Sc(e){return e&&typeof e==`object`&&`status`in e?`HTTP error! Status: ${e.status}`:`Error! ${e}`}let J=new xc;function Cc(e,t){return J.create({message:e,...t})}var wc=class{#activeToasts=M(()=>J.toasts.filter(e=>!e.dismiss));get toasts(){return V(this.#activeToasts)}},Tc=Cc;let Ec=Object.assign(Tc,{success:J.success,info:J.info,warning:J.warning,error:J.error,custom:J.custom,message:J.message,promise:J.promise,dismiss:J.dismiss,loading:J.loading,getActiveToasts:()=>J.toasts.filter(e=>!e.dismiss)});function Dc(e){return e.label!==void 0}function Oc(){let e=N(Mi(typeof document<`u`?document.hidden:!1));return ta(()=>io(document,`visibilitychange`,()=>{P(e,document.hidden,!0)})),{get current(){return V(e)}}}var kc=4e3,Ac=14,jc=45,Mc=200,Nc=.05,Pc={toast:``,title:``,description:``,loader:``,closeButton:``,cancelButton:``,actionButton:``,action:``,warning:``,error:``,success:``,default:``,info:``,loading:``};function Fc(e){let[t,n]=e.split(`-`),r=[];return t&&r.push(t),n&&r.push(n),r}function Ic(e){return 1/(1.5+Math.abs(e)/20)}var Lc=H(`<div><!></div>`),Rc=(e,t,n,r,i)=>{V(t)||!V(n)||(r(),i.toast.onDismiss?.(i.toast))},zc=H(`<button data-close-button=""><!></button>`),Bc=H(`<div data-icon=""><!> <!></div>`),Vc=H(`<div data-description=""><!></div>`),Hc=(e,t,n,r)=>{Dc(t.toast.cancel)&&V(n)&&(t.toast.cancel?.onClick?.(e),r())},Uc=H(`<button data-button="" data-cancel=""> </button>`),Wc=(e,t,n)=>{Dc(t.toast.action)&&(t.toast.action?.onClick(e),!e.defaultPrevented&&n())},Gc=H(`<button data-button=""> </button>`),Kc=H(`<!> <div data-content=""><div data-title=""><!></div> <!></div> <!> <!>`,1),qc=H(`<li data-sonner-toast=""><!> <!></li>`);function Jc(e,t){Ir(t,!0);let n=e=>{var n=U(),r=I(n),i=e=>{var n=Lc(),r=F(n);ko(r,()=>t.loadingIcon),k(n),R(e=>{es(n,1,e),q(n,`data-visible`,V(S)===`loading`)},[()=>Jo(nc(V(ue)?.loader,t.toast?.classes?.loader,`sonner-loader`))]),W(e,n)},a=e=>{{let n=M(()=>nc(V(ue)?.loader,t.toast.classes?.loader)),r=M(()=>V(S)===`loading`);tc(e,{get class(){return V(n)},get visible(){return V(r)}})}};K(r,e=>{t.loadingIcon?e(i):e(a,!1)}),W(e,n)},r=Zs(t,`cancelButtonStyle`,3,``),i=Zs(t,`actionButtonStyle`,3,``),a=Zs(t,`descriptionClass`,3,``),o=Zs(t,`unstyled`,3,!1),s=Zs(t,`defaultRichColors`,3,!1),c={...Pc},l=N(!1),u=N(!1),d=N(!1),f=N(!1),p=N(!1),m=N(0),h=N(0),g=t.toast.duration||t.duration||kc,_=N(void 0),v=N(null),y=N(null),b=M(()=>t.index===0),x=M(()=>t.index+1<=t.visibleToasts),S=M(()=>t.toast.type),C=M(()=>t.toast.dismissable!==!1),ee=M(()=>t.toast.class||``),te=M(()=>t.toast.descriptionClass||``),ne=M(()=>J.heights.findIndex(e=>e.toastId===t.toast.id)||0),w=M(()=>t.toast.closeButton??t.closeButton),re=M(()=>t.toast.duration??t.duration??kc),ie=null,ae=M(()=>t.position.split(`-`)),oe=M(()=>J.heights.reduce((e,t,n)=>n>=V(ne)?e:e+t.height,0)),se=Oc(),ce=M(()=>t.toast.invert||t.invert),le=M(()=>V(S)===`loading`),ue=M(()=>({...c,...t.classes})),de=M(()=>t.toast.title),fe=M(()=>t.toast.description),pe=N(0),me=N(0),he=M(()=>Math.round(V(ne)*Ac+V(oe)));ta(()=>{V(de),V(fe);let e;e=t.expanded||t.expandByDefault?1:1-t.index*Nc;let n=Xa(()=>V(_));if(n===void 0)return;n.style.setProperty(`height`,`auto`);let r=n.offsetHeight,i=n.getBoundingClientRect().height,a=Math.round(i/e+2**-52&100)/100;n.style.removeProperty(`height`);let o;o=Math.abs(a-r)<1?a:r,P(h,o,!0),Xa(()=>{J.setHeight({toastId:t.toast.id,height:o})})});function ge(){P(u,!0),P(m,V(he),!0),J.removeHeight(t.toast.id),setTimeout(()=>{J.remove(t.toast.id)},Mc)}let _e,ve=M(()=>t.toast.promise&&V(S)===`loading`||t.toast.duration===1/0);function ye(){P(pe,new Date().getTime(),!0),_e=setTimeout(()=>{t.toast.onAutoClose?.(t.toast),ge()},g)}function be(){if(V(me)<V(pe)){let e=new Date().getTime()-V(pe);g-=e}P(me,new Date().getTime(),!0)}ta(()=>{t.toast.updated&&(clearTimeout(_e),g=V(re),ye())}),ta(()=>(V(ve)||(t.expanded||t.interacting||se.current?be():ye()),()=>clearTimeout(_e))),Ao(()=>{P(l,!0);let e=V(_)?.getBoundingClientRect().height;return P(h,e,!0),J.setHeight({toastId:t.toast.id,height:e}),()=>{J.removeHeight(t.toast.id)}}),ta(()=>{t.toast.delete&&Xa(()=>{ge(),t.toast.onDismiss?.(t.toast)})});let xe=e=>{if(V(le))return;P(m,V(he),!0);let t=e.target;t.setPointerCapture(e.pointerId),t.tagName!==`BUTTON`&&(P(d,!0),ie={x:e.clientX,y:e.clientY})},Se=()=>{if(V(f)||!V(C))return;ie=null;let e=Number(V(_)?.style.getPropertyValue(`--swipe-amount-x`).replace(`px`,``)||0),n=Number(V(_)?.style.getPropertyValue(`--swipe-amount-y`).replace(`px`,``)||0),r=new Date().getTime()-(null?.getTime()??0),i=V(v)===`x`?e:n,a=Math.abs(i)/r;if(Math.abs(i)>=jc||a>.11){P(m,V(he),!0),t.toast.onDismiss?.(t.toast),V(v)===`x`?P(y,e>0?`right`:`left`,!0):P(y,n>0?`down`:`up`,!0),ge(),P(f,!0);return}else V(_)?.style.setProperty(`--swipe-amount-x`,`0px`),V(_)?.style.setProperty(`--swipe-amount-y`,`0px`);P(p,!1),P(d,!1),P(v,null)},Ce=e=>{if(!ie||!V(C)||(window.getSelection()?.toString().length??-1)>0)return;let n=e.clientY-ie.y,r=e.clientX-ie.x,i=t.swipeDirections??Fc(t.position);!V(v)&&(Math.abs(r)>1||Math.abs(n)>1)&&P(v,Math.abs(r)>Math.abs(n)?`x`:`y`,!0);let a={x:0,y:0};if(V(v)===`y`){if(i.includes(`top`)||i.includes(`bottom`))if(i.includes(`top`)&&n<0||i.includes(`bottom`)&&n>0)a.y=n;else{let e=n*Ic(n);a.y=Math.abs(e)<Math.abs(n)?e:n}}else if(V(v)===`x`&&(i.includes(`left`)||i.includes(`right`)))if(i.includes(`left`)&&r<0||i.includes(`right`)&&r>0)a.x=r;else{let e=r*Ic(r);a.x=Math.abs(e)<Math.abs(r)?e:r}(Math.abs(a.x)>0||Math.abs(a.y)>0)&&P(p,!0),V(_)?.style.setProperty(`--swipe-amount-x`,`${a.x}px`),V(_)?.style.setProperty(`--swipe-amount-y`,`${a.y}px`)},we=()=>{P(d,!1),P(v,null),ie=null},Te=M(()=>t.toast.icon?t.toast.icon:V(S)===`success`?t.successIcon:V(S)===`error`?t.errorIcon:V(S)===`warning`?t.warningIcon:V(S)===`info`?t.infoIcon:V(S)===`loading`?t.loadingIcon:null);var T=qc();q(T,`tabindex`,0);let Ee;T.__pointermove=Ce,T.__pointerup=Se,T.__pointerdown=xe;var De=F(T),Oe=e=>{var n=zc();n.__click=[Rc,le,C,ge,t];var r=F(n);ko(r,()=>t.closeIcon??E),k(n),R(e=>{q(n,`aria-label`,t.closeButtonAriaLabel),q(n,`data-disabled`,V(le)),es(n,1,e)},[()=>Jo(nc(V(ue)?.closeButton,t.toast?.classes?.closeButton))]),W(e,n)};K(De,e=>{V(w)&&!t.toast.component&&V(S)!==`loading`&&t.closeIcon!==null&&e(Oe)});var ke=L(De,2),Ae=e=>{let n=M(()=>t.toast.component);var r=U(),i=I(r);Uo(i,()=>V(n),(e,n)=>{n(e,Xs(()=>t.toast.componentProps,{closeToast:ge}))}),W(e,r)},je=e=>{var o=Kc(),s=I(o),c=e=>{var r=Bc(),i=F(r),a=e=>{var r=U(),i=I(r),a=e=>{var n=U(),r=I(n);Uo(r,()=>t.toast.icon,(e,t)=>{t(e,{})}),W(e,n)},o=e=>{n(e)};K(i,e=>{t.toast.icon?e(a):e(o,!1)}),W(e,r)};K(i,e=>{(t.toast.promise||V(S)===`loading`)&&e(a)});var o=L(i,2),s=e=>{var n=U(),r=I(n),i=e=>{var n=U(),r=I(n);Uo(r,()=>t.toast.icon,(e,t)=>{t(e,{})}),W(e,n)},a=e=>{var n=U(),r=I(n),i=e=>{var n=U(),r=I(n);ko(r,()=>t.successIcon??E),W(e,n)},a=e=>{var n=U(),r=I(n),i=e=>{var n=U(),r=I(n);ko(r,()=>t.errorIcon??E),W(e,n)},a=e=>{var n=U(),r=I(n),i=e=>{var n=U(),r=I(n);ko(r,()=>t.warningIcon??E),W(e,n)},a=e=>{var n=U(),r=I(n),i=e=>{var n=U(),r=I(n);ko(r,()=>t.infoIcon??E),W(e,n)};K(r,e=>{V(S)===`info`&&e(i)},!0),W(e,n)};K(r,e=>{V(S)===`warning`?e(i):e(a,!1)},!0),W(e,n)};K(r,e=>{V(S)===`error`?e(i):e(a,!1)},!0),W(e,n)};K(r,e=>{V(S)===`success`?e(i):e(a,!1)},!0),W(e,n)};K(r,e=>{t.toast.icon?e(i):e(a,!1)}),W(e,n)};K(o,e=>{t.toast.type!==`loading`&&e(s)}),k(r),R(e=>es(r,1,e),[()=>Jo(nc(V(ue)?.icon,t.toast?.classes?.icon))]),W(e,r)};K(s,e=>{(V(S)||t.toast.icon||t.toast.promise)&&t.toast.icon!==null&&(V(Te)!==null||t.toast.icon)&&e(c)});var l=L(s,2),u=F(l),d=F(u),f=e=>{var n=U(),r=I(n),i=e=>{let n=M(()=>t.toast.title);var r=U(),i=I(r);Uo(i,()=>V(n),(e,n)=>{n(e,Xs(()=>t.toast.componentProps))}),W(e,r)},a=e=>{var n=mo();R(()=>G(n,t.toast.title)),W(e,n)};K(r,e=>{typeof t.toast.title==`string`?e(a,!1):e(i)}),W(e,n)};K(d,e=>{t.toast.title&&e(f)}),k(u);var p=L(u,2),m=e=>{var n=Vc(),r=F(n),i=e=>{let n=M(()=>t.toast.description);var r=U(),i=I(r);Uo(i,()=>V(n),(e,n)=>{n(e,Xs(()=>t.toast.componentProps))}),W(e,r)},o=e=>{var n=mo();R(()=>G(n,t.toast.description)),W(e,n)};K(r,e=>{typeof t.toast.description==`string`?e(o,!1):e(i)}),k(n),R(e=>es(n,1,e),[()=>Jo(nc(a(),V(te),V(ue)?.description,t.toast.classes?.description))]),W(e,n)};K(p,e=>{t.toast.description&&e(m)}),k(l);var h=L(l,2),g=e=>{var n=U(),i=I(n),a=e=>{var n=U(),r=I(n);Uo(r,()=>t.toast.cancel,(e,t)=>{t(e,{})}),W(e,n)},o=e=>{var n=U(),i=I(n),a=e=>{var n=Uc();n.__click=[Hc,t,C,ge];var i=F(n,!0);k(n),R(e=>{ns(n,t.toast.cancelButtonStyle??r()),es(n,1,e),G(i,t.toast.cancel.label)},[()=>Jo(nc(V(ue)?.cancelButton,t.toast?.classes?.cancelButton))]),W(e,n)};K(i,e=>{Dc(t.toast.cancel)&&e(a)},!0),W(e,n)};K(i,e=>{typeof t.toast.cancel==`function`?e(a):e(o,!1)}),W(e,n)};K(h,e=>{t.toast.cancel&&e(g)});var _=L(h,2),v=e=>{var n=U(),r=I(n),a=e=>{var n=U(),r=I(n);Uo(r,()=>t.toast.action,(e,t)=>{t(e,{})}),W(e,n)},o=e=>{var n=U(),r=I(n),a=e=>{var n=Gc();n.__click=[Wc,t,ge];var r=F(n,!0);k(n),R(e=>{ns(n,t.toast.actionButtonStyle??i()),es(n,1,e),G(r,t.toast.action.label)},[()=>Jo(nc(V(ue)?.actionButton,t.toast?.classes?.actionButton))]),W(e,n)};K(r,e=>{Dc(t.toast.action)&&e(a)},!0),W(e,n)};K(r,e=>{typeof t.toast.action==`function`?e(a):e(o,!1)}),W(e,n)};K(_,e=>{t.toast.action&&e(v)}),R(e=>es(u,1,e),[()=>Jo(nc(V(ue)?.title,t.toast?.classes?.title))]),W(e,o)};K(ke,e=>{t.toast.component?e(Ae):e(je,!1)}),k(T),Ns(T,e=>P(_,e),()=>V(_)),R((e,n,r,i)=>{es(T,1,e),q(T,`data-rich-colors`,t.toast.richColors??s()),q(T,`data-styled`,!(t.toast.component||t.toast.unstyled||o())),q(T,`data-mounted`,V(l)),q(T,`data-promise`,n),q(T,`data-swiped`,V(p)),q(T,`data-removed`,V(u)),q(T,`data-visible`,V(x)),q(T,`data-y-position`,V(ae)[0]),q(T,`data-x-position`,V(ae)[1]),q(T,`data-index`,t.index),q(T,`data-front`,V(b)),q(T,`data-swiping`,V(d)),q(T,`data-dismissable`,V(C)),q(T,`data-type`,V(S)),q(T,`data-invert`,V(ce)),q(T,`data-swipe-out`,V(f)),q(T,`data-swipe-direction`,V(y)),q(T,`data-expanded`,r),Ee=ns(T,`${t.style} ${t.toast.style}`,Ee,i)},[()=>Jo(nc(t.class,V(ee),V(ue)?.toast,t.toast?.classes?.toast,V(ue)?.[V(S)],t.toast?.classes?.[V(S)])),()=>!!t.toast.promise,()=>!!(t.expanded||t.expandByDefault&&V(l)),()=>({"--index":t.index,"--toasts-before":t.index,"--z-index":J.toasts.length-t.index,"--offset":`${V(u)?V(m):V(he)}px`,"--initial-height":t.expandByDefault?`auto`:`${V(h)}px`})]),ao(`dragend`,T,we),W(e,T),Lr()}oo([`pointermove`,`pointerup`,`pointerdown`,`click`]),jr();var Yc=po(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20" data-sonner-success-icon=""><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd"></path></svg>`);function Xc(e){var t=Yc();W(e,t)}var Zc=po(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20" data-sonner-error-icon=""><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>`);function Qc(e){var t=Zc();W(e,t)}var $c=po(`<svg viewBox="0 0 64 64" fill="currentColor" height="20" width="20" data-sonner-warning-icon="" xmlns="http://www.w3.org/2000/svg"><path d="M32.427,7.987c2.183,0.124 4,1.165 5.096,3.281l17.936,36.208c1.739,3.66 -0.954,8.585 -5.373,8.656l-36.119,0c-4.022,-0.064 -7.322,-4.631 -5.352,-8.696l18.271,-36.207c0.342,-0.65 0.498,-0.838 0.793,-1.179c1.186,-1.375 2.483,-2.111 4.748,-2.063Zm-0.295,3.997c-0.687,0.034 -1.316,0.419 -1.659,1.017c-6.312,11.979 -12.397,24.081 -18.301,36.267c-0.546,1.225 0.391,2.797 1.762,2.863c12.06,0.195 24.125,0.195 36.185,0c1.325,-0.064 2.321,-1.584 1.769,-2.85c-5.793,-12.184 -11.765,-24.286 -17.966,-36.267c-0.366,-0.651 -0.903,-1.042 -1.79,-1.03Z"></path><path d="M33.631,40.581l-3.348,0l-0.368,-16.449l4.1,0l-0.384,16.449Zm-3.828,5.03c0,-0.609 0.197,-1.113 0.592,-1.514c0.396,-0.4 0.935,-0.601 1.618,-0.601c0.684,0 1.223,0.201 1.618,0.601c0.395,0.401 0.593,0.905 0.593,1.514c0,0.587 -0.193,1.078 -0.577,1.473c-0.385,0.395 -0.929,0.593 -1.634,0.593c-0.705,0 -1.249,-0.198 -1.634,-0.593c-0.384,-0.395 -0.576,-0.886 -0.576,-1.473Z"></path></svg>`);function el(e){var t=$c();W(e,t)}var tl=po(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20" data-sonner-info-icon=""><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z" clip-rule="evenodd"></path></svg>`);function nl(e){var t=tl();W(e,t)}var rl=po(`<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-sonner-close-icon=""><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>`);function il(e){var t=rl();W(e,t)}var al=3,ol=`24px`,sl=`16px`,cl=4e3,ll=356,ul=14,dl=`dark`,fl=`light`;function pl(e,t){let n={};return[e,t].forEach((e,t)=>{let r=t===1,i=r?`--mobile-offset`:`--offset`,a=r?sl:ol;function o(e){[`top`,`right`,`bottom`,`left`].forEach(t=>{n[`${i}-${t}`]=typeof e==`number`?`${e}px`:e})}typeof e==`number`||typeof e==`string`?o(e):typeof e==`object`?[`top`,`right`,`bottom`,`left`].forEach(t=>{let r=e[t];r===void 0?n[`${i}-${t}`]=a:n[`${i}-${t}`]=typeof r==`number`?`${r}px`:r}):o(a)}),n}var ml=H(`<ol></ol>`),hl=H(`<section aria-live="polite" aria-relevant="additions text" aria-atomic="false" class="svelte-1fl1w17"><!></section>`),gl={hash:`svelte-1fl1w17`,code:`html[dir='ltr'],
	[data-sonner-toaster][dir='ltr'] {--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%);}html[dir='rtl'],
	[data-sonner-toaster][dir='rtl'] {--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%);}[data-sonner-toaster] {position:fixed;width:var(--width);font-family:ui-sans-serif,
			system-ui,
			-apple-system,
			BlinkMacSystemFont,
			Segoe UI,
			Roboto,
			Helvetica Neue,
			Arial,
			Noto Sans,
			sans-serif,
			Apple Color Emoji,
			Segoe UI Emoji,
			Segoe UI Symbol,
			Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform 400ms ease;}

	@media (hover: none) and (pointer: coarse) {[data-sonner-toaster][data-lifted='true'] {transform:none;}
	}[data-sonner-toaster][data-x-position='right'] {right:var(--offset-right);}[data-sonner-toaster][data-x-position='left'] {left:var(--offset-left);}[data-sonner-toaster][data-x-position='center'] {left:50%;transform:translateX(-50%);}[data-sonner-toaster][data-y-position='top'] {top:var(--offset-top);}[data-sonner-toaster][data-y-position='bottom'] {bottom:var(--offset-bottom);}[data-sonner-toast] {--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform 400ms,
			opacity 400ms,
			height 400ms,
			box-shadow 200ms;box-sizing:border-box;outline:none;overflow-wrap:anywhere;}[data-sonner-toast][data-styled='true'] {padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0px 4px 12px rgba(0, 0, 0, 0.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px;}[data-sonner-toast]:focus-visible {box-shadow:0px 4px 12px rgba(0, 0, 0, 0.1),
			0 0 0 2px rgba(0, 0, 0, 0.2);}[data-sonner-toast][data-y-position='top'] {top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap));}[data-sonner-toast][data-y-position='bottom'] {bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap));}[data-sonner-toast][data-styled='true'] [data-description] {font-weight:400;line-height:1.4;color:#3f3f3f;}[data-rich-colors='true'][data-sonner-toast][data-styled='true']
		[data-description] {color:inherit;}[data-sonner-toaster][data-sonner-theme='dark'] [data-description] {color:hsl(0, 0%, 91%);}[data-sonner-toast][data-styled='true'] [data-title] {font-weight:500;line-height:1.5;color:inherit;}[data-sonner-toast][data-styled='true'] [data-icon] {display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end);}[data-sonner-toast][data-promise='true'] [data-icon] > svg {opacity:0;transform:scale(0.8);transform-origin:center;
		animation: sonner-fade-in 300ms ease forwards;}[data-sonner-toast][data-styled='true'] [data-icon] > * {flex-shrink:0;}[data-sonner-toast][data-styled='true'] [data-icon] svg {margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end);}[data-sonner-toast][data-styled='true'] [data-content] {display:flex;flex-direction:column;gap:2px;}[data-sonner-toast][data-styled='true'] [data-button] {border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity 400ms,
			box-shadow 200ms;}[data-sonner-toast][data-styled='true'] [data-button]:focus-visible {box-shadow:0 0 0 2px rgba(0, 0, 0, 0.4);}[data-sonner-toast][data-styled='true'] [data-button]:first-of-type {margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);}[data-sonner-toast][data-styled='true'] [data-cancel] {color:var(--normal-text);background:rgba(0, 0, 0, 0.08);}[data-sonner-toaster][data-sonner-theme='dark']
		[data-sonner-toast][data-styled='true']
		[data-cancel] {background:rgba(255, 255, 255, 0.3);}[data-sonner-toast][data-styled='true'] [data-close-button] {position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity 100ms,
			background 200ms,
			border-color 200ms;}[data-sonner-toast][data-styled='true'] [data-close-button]:focus-visible {box-shadow:0px 4px 12px rgba(0, 0, 0, 0.1),
			0 0 0 2px rgba(0, 0, 0, 0.2);}[data-sonner-toast][data-styled='true'] [data-disabled='true'] {cursor:not-allowed;}[data-sonner-toast][data-styled='true']:hover [data-close-button]:hover {background:var(--gray2);border-color:var(--gray5);}[data-sonner-toast][data-swiping='true']::before {content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1;}[data-sonner-toast][data-y-position='top'][data-swiping='true']::before {bottom:50%;transform:scaleY(3) translateY(50%);}[data-sonner-toast][data-y-position='bottom'][data-swiping='true']::before {top:50%;transform:scaleY(3) translateY(-50%);}[data-sonner-toast][data-swiping='false'][data-removed='true']::before {content:'';position:absolute;inset:0;transform:scaleY(2);}[data-sonner-toast][data-expanded='true']::after {content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%;}[data-sonner-toast][data-mounted='true'] {--y: translateY(0);opacity:1;}[data-sonner-toast][data-expanded='false'][data-front='false'] {--scale: var(--toasts-before) * 0.05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before)))
			scale(calc(-1 * var(--scale)));height:var(--front-toast-height);}[data-sonner-toast] > * {transition:opacity 400ms;}[data-sonner-toast][data-x-position='right'] {right:0;}[data-sonner-toast][data-x-position='left'] {left:0;}[data-sonner-toast][data-expanded='false'][data-front='false'][data-styled='true']
		> * {opacity:0;}[data-sonner-toast][data-visible='false'] {opacity:0;pointer-events:none;}[data-sonner-toast][data-mounted='true'][data-expanded='true'] {--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height);}[data-sonner-toast][data-removed='true'][data-front='true'][data-swipe-out='false'] {--y: translateY(calc(var(--lift) * -100%));opacity:0;}[data-sonner-toast][data-removed='true'][data-front='false'][data-swipe-out='false'][data-expanded='true'] {--y: translateY(
			calc(var(--lift) * var(--offset) + var(--lift) * -100%)
		);opacity:0;}[data-sonner-toast][data-removed='true'][data-front='false'][data-swipe-out='false'][data-expanded='false'] {--y: translateY(40%);opacity:0;transition:transform 500ms,
			opacity 200ms;}[data-sonner-toast][data-removed='true'][data-front='false']::before {height:calc(var(--initial-height) + 20%);}[data-sonner-toast][data-swiping='true'] {transform:var(--y) translateY(var(--swipe-amount-y, 0px))
			translateX(var(--swipe-amount-x, 0px));transition:none;}[data-sonner-toast][data-swiped='true'] {user-select:none;}[data-sonner-toast][data-swipe-out='true'][data-y-position='bottom'],
	[data-sonner-toast][data-swipe-out='true'][data-y-position='top'] {animation-duration:200ms;animation-timing-function:ease-out;animation-fill-mode:forwards;}[data-sonner-toast][data-swipe-out='true'][data-swipe-direction='left'] {
		animation-name: swipe-out-left;}[data-sonner-toast][data-swipe-out='true'][data-swipe-direction='right'] {
		animation-name: swipe-out-right;}[data-sonner-toast][data-swipe-out='true'][data-swipe-direction='up'] {
		animation-name: swipe-out-up;}[data-sonner-toast][data-swipe-out='true'][data-swipe-direction='down'] {
		animation-name: swipe-out-down;}

	@keyframes swipe-out-left {
		from {
			transform: var(--y) translateX(var(--swipe-amount-x));
			opacity: 1;
		}

		to {
			transform: var(--y) translateX(calc(var(--swipe-amount-x) - 100%));
			opacity: 0;
		}
	}

	@keyframes swipe-out-right {
		from {
			transform: var(--y) translateX(var(--swipe-amount-x));
			opacity: 1;
		}

		to {
			transform: var(--y) translateX(calc(var(--swipe-amount-x) + 100%));
			opacity: 0;
		}
	}

	@keyframes swipe-out-up {
		from {
			transform: var(--y) translateY(var(--swipe-amount-y));
			opacity: 1;
		}

		to {
			transform: var(--y) translateY(calc(var(--swipe-amount-y) - 100%));
			opacity: 0;
		}
	}

	@keyframes swipe-out-down {
		from {
			transform: var(--y) translateY(var(--swipe-amount-y));
			opacity: 1;
		}

		to {
			transform: var(--y) translateY(calc(var(--swipe-amount-y) + 100%));
			opacity: 0;
		}
	}

	@media (max-width: 600px) {[data-sonner-toaster] {position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%;}[data-sonner-toaster][dir='rtl'] {left:calc(var(--mobile-offset-left) * -1);}[data-sonner-toaster] [data-sonner-toast] {left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2);}[data-sonner-toaster][data-x-position='left'] {left:var(--mobile-offset-left);}[data-sonner-toaster][data-y-position='bottom'] {bottom:var(--mobile-offset-bottom);}[data-sonner-toaster][data-y-position='top'] {top:var(--mobile-offset-top);}[data-sonner-toaster][data-x-position='center'] {left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none;}
	}[data-sonner-toaster][data-sonner-theme='light'] {--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 87%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 93%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 84%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%);}[data-sonner-toaster][data-sonner-theme='light']
		[data-sonner-toast][data-invert='true'] {--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);}[data-sonner-toaster][data-sonner-theme='dark']
		[data-sonner-toast][data-invert='true'] {--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12);}[data-sonner-toaster][data-sonner-theme='dark'] {--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 43%, 17%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 9%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%);}[data-sonner-toaster][data-sonner-theme='dark']
		[data-sonner-toast]
		[data-close-button] {background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text);}[data-sonner-toaster][data-sonner-theme='dark']
		[data-sonner-toast]
		[data-close-button]:hover {background:var(--normal-bg-hover);border-color:var(--normal-border-hover);}[data-rich-colors='true'][data-sonner-toast][data-type='success'] {background:var(--success-bg);border-color:var(--success-border);color:var(--success-text);}[data-rich-colors='true'][data-sonner-toast][data-type='success']
		[data-close-button] {background:var(--success-bg);border-color:var(--success-border);color:var(--success-text);}[data-rich-colors='true'][data-sonner-toast][data-type='info'] {background:var(--info-bg);border-color:var(--info-border);color:var(--info-text);}[data-rich-colors='true'][data-sonner-toast][data-type='info']
		[data-close-button] {background:var(--info-bg);border-color:var(--info-border);color:var(--info-text);}[data-rich-colors='true'][data-sonner-toast][data-type='warning'] {background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text);}[data-rich-colors='true'][data-sonner-toast][data-type='warning']
		[data-close-button] {background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text);}[data-rich-colors='true'][data-sonner-toast][data-type='error'] {background:var(--error-bg);border-color:var(--error-border);color:var(--error-text);}[data-rich-colors='true'][data-sonner-toast][data-type='error']
		[data-close-button] {background:var(--error-bg);border-color:var(--error-border);color:var(--error-text);}.sonner-loading-wrapper {--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10;}.sonner-loading-wrapper[data-visible='false'] {transform-origin:center;
		animation: sonner-fade-out 0.2s ease forwards;}.sonner-spinner {position:relative;top:50%;left:50%;height:var(--size);width:var(--size);}.sonner-loading-bar {
		animation: sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%;}.sonner-loading-bar:nth-child(1) {animation-delay:-1.2s;transform:rotate(0.0001deg) translate(146%);}.sonner-loading-bar:nth-child(2) {animation-delay:-1.1s;transform:rotate(30deg) translate(146%);}.sonner-loading-bar:nth-child(3) {animation-delay:-1s;transform:rotate(60deg) translate(146%);}.sonner-loading-bar:nth-child(4) {animation-delay:-0.9s;transform:rotate(90deg) translate(146%);}.sonner-loading-bar:nth-child(5) {animation-delay:-0.8s;transform:rotate(120deg) translate(146%);}.sonner-loading-bar:nth-child(6) {animation-delay:-0.7s;transform:rotate(150deg) translate(146%);}.sonner-loading-bar:nth-child(7) {animation-delay:-0.6s;transform:rotate(180deg) translate(146%);}.sonner-loading-bar:nth-child(8) {animation-delay:-0.5s;transform:rotate(210deg) translate(146%);}.sonner-loading-bar:nth-child(9) {animation-delay:-0.4s;transform:rotate(240deg) translate(146%);}.sonner-loading-bar:nth-child(10) {animation-delay:-0.3s;transform:rotate(270deg) translate(146%);}.sonner-loading-bar:nth-child(11) {animation-delay:-0.2s;transform:rotate(300deg) translate(146%);}.sonner-loading-bar:nth-child(12) {animation-delay:-0.1s;transform:rotate(330deg) translate(146%);}

	@keyframes sonner-fade-in {
		0% {
			opacity: 0;
			transform: scale(0.8);
		}
		100% {
			opacity: 1;
			transform: scale(1);
		}
	}

	@keyframes sonner-fade-out {
		0% {
			opacity: 1;
			transform: scale(1);
		}
		100% {
			opacity: 0;
			transform: scale(0.8);
		}
	}

	@keyframes sonner-spin {
		0% {
			opacity: 1;
		}
		100% {
			opacity: 0.15;
		}
	}

	@media (prefers-reduced-motion) {[data-sonner-toast],
		[data-sonner-toast] > *,
		.sonner-loading-bar {transition:none !important;
			animation: none !important;}
	}.sonner-loader {position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);transform-origin:center;transition:opacity 200ms,
			transform 200ms;}.sonner-loader[data-visible='false'] {opacity:0;transform:scale(0.8) translate(-50%, -50%);}`};function _l(e,t){Ir(t,!0),Wo(e,gl);function n(e){return e===`system`?typeof window<`u`&&window.matchMedia&&window.matchMedia(`(prefers-color-scheme: dark)`).matches?dl:fl:e}let r=Zs(t,`invert`,3,!1),i=Zs(t,`position`,3,`bottom-right`),a=Zs(t,`hotkey`,19,()=>[`altKey`,`KeyT`]),o=Zs(t,`expand`,3,!1),s=Zs(t,`closeButton`,3,!1),c=Zs(t,`offset`,3,ol),l=Zs(t,`mobileOffset`,3,sl),u=Zs(t,`theme`,3,`light`),d=Zs(t,`richColors`,3,!1),f=Zs(t,`duration`,3,cl),p=Zs(t,`visibleToasts`,3,al),m=Zs(t,`toastOptions`,19,()=>({})),h=Zs(t,`dir`,7,`auto`),g=Zs(t,`gap`,3,ul),_=Zs(t,`containerAriaLabel`,3,`Notifications`),v=Zs(t,`closeButtonAriaLabel`,3,`Close toast`),y=Js(t,`$$slots.$$events.$$legacy.invert.position.hotkey.expand.closeButton.offset.mobileOffset.theme.richColors.duration.visibleToasts.toastOptions.dir.gap.loadingIcon.successIcon.errorIcon.warningIcon.closeIcon.infoIcon.containerAriaLabel.class.closeButtonAriaLabel.onblur.onfocus.onmouseenter.onmousemove.onmouseleave.ondragend.onpointerdown.onpointerup`.split(`.`));function b(){if(h()!==`auto`)return h();if(typeof window>`u`||typeof document>`u`)return`ltr`;let e=document.documentElement.getAttribute(`dir`);return e===`auto`||!e?(Xa(()=>h(window.getComputedStyle(document.documentElement).direction??`ltr`)),h()):(Xa(()=>h(e)),e)}let x=M(()=>Array.from(new Set([i(),...J.toasts.filter(e=>e.position).map(e=>e.position)].filter(Boolean)))),S=N(!1),C=N(!1),ee=N(Mi(n(u()))),te=N(void 0),ne=N(null),w=N(!1),re=M(()=>a().join(`+`).replace(/Key/g,``).replace(/Digit/g,``));ta(()=>{J.toasts.length<=1&&P(S,!1)}),ta(()=>{let e=J.toasts.filter(e=>e.dismiss&&!e.delete);e.length>0&&(J.toasts=J.toasts.map(t=>e.find(e=>e.id===t.id)?{...t,delete:!0}:t))}),ta(()=>()=>{V(te)&&V(ne)&&(V(ne).focus({preventScroll:!0}),P(ne,null),P(w,!1))}),Ao(()=>(J.reset(),io(document,`keydown`,e=>{a().every(t=>e[t]||e.code===t)&&(P(S,!0),V(te)?.focus()),e.code===`Escape`&&(document.activeElement===V(te)||V(te)?.contains(document.activeElement))&&P(S,!1)}))),ta(()=>{if(u()!==`system`&&P(ee,u()),typeof window<`u`){u()===`system`&&(window.matchMedia&&window.matchMedia(`(prefers-color-scheme: dark)`).matches?P(ee,dl):P(ee,fl));let e=window.matchMedia(`(prefers-color-scheme: dark)`),t=({matches:e})=>{P(ee,e?dl:fl,!0)};`addEventListener`in e?e.addEventListener(`change`,t):e.addListener(t)}});let ie=e=>{t.onblur?.(e),V(w)&&!e.currentTarget.contains(e.relatedTarget)&&(P(w,!1),V(ne)&&(V(ne).focus({preventScroll:!0}),P(ne,null)))},ae=e=>{t.onfocus?.(e),!(e.target instanceof HTMLElement&&e.target.dataset.dismissable===`false`)&&(V(w)||(P(w,!0),P(ne,e.relatedTarget,!0)))},oe=e=>{t.onpointerdown?.(e),!(e.target instanceof HTMLElement&&e.target.dataset.dismissable===`false`)&&P(C,!0)},se=e=>{t.onmouseenter?.(e),P(S,!0)},ce=e=>{t.onmouseleave?.(e),V(C)||P(S,!1)},le=e=>{t.onmousemove?.(e),P(S,!0)},ue=e=>{t.ondragend?.(e),P(S,!1)},de=e=>{t.onpointerup?.(e),P(C,!1)};yc.set(new wc);var fe=hl();q(fe,`tabindex`,-1);var pe=F(fe),me=e=>{var n=U(),i=I(n);Io(i,18,()=>V(x),e=>e,(e,n,i,a)=>{let u=M(()=>{let[e,t]=n.split(`-`);return{y:e,x:t}}),h=M(()=>pl(c(),l()));var _=ml();hs(_,(e,n)=>({tabindex:-1,dir:e,class:t.class,"data-sonner-toaster":!0,"data-sonner-theme":V(ee),"data-y-position":V(u).y,"data-x-position":V(u).x,style:t.style,onblur:ie,onfocus:ae,onmouseenter:se,onmousemove:le,onmouseleave:ce,ondragend:ue,onpointerdown:oe,onpointerup:de,...y,[ls]:n}),[b,()=>({"--front-toast-height":`${J.heights[0]?.height}px`,"--width":`${ll}px`,"--gap":`${g()}px`,"--offset-top":V(h)[`--offset-top`],"--offset-right":V(h)[`--offset-right`],"--offset-bottom":V(h)[`--offset-bottom`],"--offset-left":V(h)[`--offset-left`],"--mobile-offset-top":V(h)[`--mobile-offset-top`],"--mobile-offset-right":V(h)[`--mobile-offset-right`],"--mobile-offset-bottom":V(h)[`--mobile-offset-bottom`],"--mobile-offset-left":V(h)[`--mobile-offset-left`]})],void 0,`svelte-1fl1w17`),Io(_,23,()=>J.toasts.filter(e=>!e.position&&V(i)===0||e.position===n),e=>e.id,(e,i,a,c)=>{{let c=e=>{var n=U(),r=I(n),i=e=>{var n=U(),r=I(n);ko(r,()=>t.successIcon??E),W(e,n)},a=e=>{var n=U(),r=I(n),i=e=>{Xc(e,{})};K(r,e=>{t.successIcon!==null&&e(i)},!0),W(e,n)};K(r,e=>{t.successIcon?e(i):e(a,!1)}),W(e,n)},l=e=>{var n=U(),r=I(n),i=e=>{var n=U(),r=I(n);ko(r,()=>t.errorIcon??E),W(e,n)},a=e=>{var n=U(),r=I(n),i=e=>{Qc(e,{})};K(r,e=>{t.errorIcon!==null&&e(i)},!0),W(e,n)};K(r,e=>{t.errorIcon?e(i):e(a,!1)}),W(e,n)},u=e=>{var n=U(),r=I(n),i=e=>{var n=U(),r=I(n);ko(r,()=>t.warningIcon??E),W(e,n)},a=e=>{var n=U(),r=I(n),i=e=>{el(e,{})};K(r,e=>{t.warningIcon!==null&&e(i)},!0),W(e,n)};K(r,e=>{t.warningIcon?e(i):e(a,!1)}),W(e,n)},h=e=>{var n=U(),r=I(n),i=e=>{var n=U(),r=I(n);ko(r,()=>t.infoIcon??E),W(e,n)},a=e=>{var n=U(),r=I(n),i=e=>{nl(e,{})};K(r,e=>{t.infoIcon!==null&&e(i)},!0),W(e,n)};K(r,e=>{t.infoIcon?e(i):e(a,!1)}),W(e,n)},g=e=>{var n=U(),r=I(n),i=e=>{var n=U(),r=I(n);ko(r,()=>t.closeIcon??E),W(e,n)},a=e=>{var n=U(),r=I(n),i=e=>{il(e,{})};K(r,e=>{t.closeIcon!==null&&e(i)},!0),W(e,n)};K(r,e=>{t.closeIcon?e(i):e(a,!1)}),W(e,n)},_=M(()=>m()?.duration??f()),y=M(()=>m()?.class??``),b=M(()=>m()?.descriptionClass||``),x=M(()=>m()?.style??``),ee=M(()=>m().classes||{}),te=M(()=>m().unstyled??!1),ne=M(()=>m()?.cancelButtonStyle??``),w=M(()=>m()?.actionButtonStyle??``),re=M(()=>m()?.closeButtonAriaLabel??v());Jc(e,{get index(){return V(a)},get toast(){return V(i)},get defaultRichColors(){return d()},get duration(){return V(_)},get class(){return V(y)},get descriptionClass(){return V(b)},get invert(){return r()},get visibleToasts(){return p()},get closeButton(){return s()},get interacting(){return V(C)},get position(){return n},get style(){return V(x)},get classes(){return V(ee)},get unstyled(){return V(te)},get cancelButtonStyle(){return V(ne)},get actionButtonStyle(){return V(w)},get closeButtonAriaLabel(){return V(re)},get expandByDefault(){return o()},get expanded(){return V(S)},get loadingIcon(){return t.loadingIcon},successIcon:c,errorIcon:l,warningIcon:u,infoIcon:h,closeIcon:g,$$slots:{successIcon:!0,errorIcon:!0,warningIcon:!0,infoIcon:!0,closeIcon:!0}})}}),k(_),Ns(_,e=>P(te,e),()=>V(te)),R(()=>_.dir=_.dir),W(e,_)}),W(e,n)};K(pe,e=>{J.toasts.length>0&&e(me)}),k(fe),R(()=>q(fe,`aria-label`,`${_()??``} ${V(re)??``}`)),W(e,fe),Lr()}var vl=null,yl=new Ve({concurrency:3}),bl=jn({room:`GITHUB_COPILOT_ENHANCED_INDEXEDDB_SYNC`,defaultValue:!0});let xl={async syncThread(e){try{console.debug(`[Sync] Syncing thread: ${e}`);let t=await Pe(e);await Se.saveThreadWithMessages(t.thread,t.messages),console.debug(`[Sync] Thread ${e} synced successfully`)}catch(t){throw console.error(`[Sync] Failed to sync thread ${e}:`,t),t}},async syncAllThreads(){if(await bl.awaitLeadership(),!bl.isLeader){console.warn(`[Sync] Only leader tab can perform sync, skipping...`);return}if(!bl.value){console.warn(`[Sync] Sync already in progress, skipping...`);return}bl.value=!1;try{console.info(`[Sync] Starting sync for all threads...`);let{threads:e}=await Ne();console.info(`[Sync] Found ${e.length} threads`),await Sl(e),console.info(`[Sync] All threads synced successfully`)}finally{bl.value=!0}},startAutoSync(e=30){this.stopAutoSync();let t=()=>{this.syncAllThreads().catch(e=>{Ec.error(`Auto sync failed`,{description:e instanceof Error?e.message:String(e)}),console.error(`[Sync] Auto sync failed:`,e)}).finally(()=>{vl=setTimeout(t,e*60*1e3)})};t(),console.info(`[Sync] Auto sync started, interval: ${e} minutes`)},stopAutoSync(){vl&&(clearTimeout(vl),vl=null,console.info(`[Sync] Auto sync stopped`))}};async function Sl(e){await Se.saveThreads(e);let t=(await Promise.allSettled(e.map(async e=>{try{let t=await Se.getThread(e.id),n=await Se.getMessages(e.id);if(t&&n&&new Date(t.updatedAt).getTime()>=new Date(e.updatedAt).getTime())return;let{messages:r}=await yl.add(()=>Pe(e.id)),{thread:i,messages:a}=await Se.saveThreadWithMessages(e,r);return console.debug(`[Sync] Thread ${e.id} cached to IndexedDB`),{threadStore:i,messageStore:a}}catch(t){throw console.error(`[Sync] Failed to cache thread ${e.id}, skipping...`,t),t}}))).filter(e=>e.status===`rejected`);t.length>0&&console.warn(`[Sync] ${t.length} threads failed to cache to IndexedDB`)}var Cl=e=>e;function wl(e){let t=e-1;return t*t*t+1}function Tl(e){let t=typeof e==`string`&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||`px`]:[e,`px`]}function El(e,{delay:t=0,duration:n=400,easing:r=Cl}={}){let i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:e=>`opacity: ${e*i}`}}function Dl(e,{delay:t=0,duration:n=400,easing:r=wl,x:i=0,y:a=0,opacity:o=0}={}){let s=getComputedStyle(e),c=+s.opacity,l=s.transform===`none`?``:s.transform,u=c*(1-o),[d,f]=Tl(i),[p,m]=Tl(a);return{delay:t,duration:n,easing:r,css:(e,t)=>`
			transform: ${l} translate(${(1-e)*d}${f}, ${(1-e)*p}${m});
			opacity: ${c-u*t}`}}var Ol=s(((e,t)=>{var n=function(e){return r(e)&&!i(e)};function r(e){return!!e&&typeof e==`object`}function i(e){var t=Object.prototype.toString.call(e);return t===`[object RegExp]`||t===`[object Date]`||o(e)}var a=typeof Symbol==`function`&&Symbol.for?Symbol.for(`react.element`):60103;function o(e){return e.$$typeof===a}function s(e){return Array.isArray(e)?[]:{}}function c(e,t){return t.clone!==!1&&t.isMergeableObject(e)?g(s(e),e,t):e}function l(e,t,n){return e.concat(t).map(function(e){return c(e,n)})}function u(e,t){if(!t.customMerge)return g;var n=t.customMerge(e);return typeof n==`function`?n:g}function d(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function f(e){return Object.keys(e).concat(d(e))}function p(e,t){try{return t in e}catch{return!1}}function m(e,t){return p(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function h(e,t,n){var r={};return n.isMergeableObject(e)&&f(e).forEach(function(t){r[t]=c(e[t],n)}),f(t).forEach(function(i){m(e,i)||(p(e,i)&&n.isMergeableObject(t[i])?r[i]=u(i,n)(e[i],t[i],n):r[i]=c(t[i],n))}),r}function g(e,t,r){r||={},r.arrayMerge=r.arrayMerge||l,r.isMergeableObject=r.isMergeableObject||n,r.cloneUnlessOtherwiseSpecified=c;var i=Array.isArray(t);return i===Array.isArray(e)?i?r.arrayMerge(e,t,r):h(e,t,r):c(t,r)}g.all=function(e,t){if(!Array.isArray(e))throw Error(`first argument should be an array`);return e.reduce(function(e,n){return g(e,n,t)},{})},t.exports=g})),kl=function(e,t){return kl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},kl(e,t)};function Al(e,t){if(typeof t!=`function`&&t!==null)throw TypeError(`Class extends value `+String(t)+` is not a constructor or null`);kl(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Y=function(){return Y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Y.apply(this,arguments)};function jl(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Ml(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||=Array.prototype.slice.call(t,0,r),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function Nl(e,t){var n=t&&t.cache?t.cache:Ul,r=t&&t.serializer?t.serializer:Vl;return(t&&t.strategy?t.strategy:Rl)(e,{cache:n,serializer:r})}function Pl(e){return e==null||typeof e==`number`||typeof e==`boolean`}function Fl(e,t,n,r){var i=Pl(r)?r:n(r),a=t.get(i);return a===void 0&&(a=e.call(this,r),t.set(i,a)),a}function Il(e,t,n){var r=Array.prototype.slice.call(arguments,3),i=n(r),a=t.get(i);return a===void 0&&(a=e.apply(this,r),t.set(i,a)),a}function Ll(e,t,n,r,i){return n.bind(t,e,r,i)}function Rl(e,t){var n=e.length===1?Fl:Il;return Ll(e,this,n,t.cache.create(),t.serializer)}function zl(e,t){return Ll(e,this,Il,t.cache.create(),t.serializer)}function Bl(e,t){return Ll(e,this,Fl,t.cache.create(),t.serializer)}var Vl=function(){return JSON.stringify(arguments)},Hl=function(){function e(){this.cache=Object.create(null)}return e.prototype.get=function(e){return this.cache[e]},e.prototype.set=function(e,t){this.cache[e]=t},e}(),Ul={create:function(){return new Hl}},Wl={variadic:zl,monadic:Bl},X;(function(e){e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]=`EXPECT_ARGUMENT_CLOSING_BRACE`,e[e.EMPTY_ARGUMENT=2]=`EMPTY_ARGUMENT`,e[e.MALFORMED_ARGUMENT=3]=`MALFORMED_ARGUMENT`,e[e.EXPECT_ARGUMENT_TYPE=4]=`EXPECT_ARGUMENT_TYPE`,e[e.INVALID_ARGUMENT_TYPE=5]=`INVALID_ARGUMENT_TYPE`,e[e.EXPECT_ARGUMENT_STYLE=6]=`EXPECT_ARGUMENT_STYLE`,e[e.INVALID_NUMBER_SKELETON=7]=`INVALID_NUMBER_SKELETON`,e[e.INVALID_DATE_TIME_SKELETON=8]=`INVALID_DATE_TIME_SKELETON`,e[e.EXPECT_NUMBER_SKELETON=9]=`EXPECT_NUMBER_SKELETON`,e[e.EXPECT_DATE_TIME_SKELETON=10]=`EXPECT_DATE_TIME_SKELETON`,e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]=`UNCLOSED_QUOTE_IN_ARGUMENT_STYLE`,e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]=`EXPECT_SELECT_ARGUMENT_OPTIONS`,e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]=`EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE`,e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]=`INVALID_PLURAL_ARGUMENT_OFFSET_VALUE`,e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]=`EXPECT_SELECT_ARGUMENT_SELECTOR`,e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]=`EXPECT_PLURAL_ARGUMENT_SELECTOR`,e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]=`EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT`,e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]=`EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT`,e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]=`INVALID_PLURAL_ARGUMENT_SELECTOR`,e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]=`DUPLICATE_PLURAL_ARGUMENT_SELECTOR`,e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]=`DUPLICATE_SELECT_ARGUMENT_SELECTOR`,e[e.MISSING_OTHER_CLAUSE=22]=`MISSING_OTHER_CLAUSE`,e[e.INVALID_TAG=23]=`INVALID_TAG`,e[e.INVALID_TAG_NAME=25]=`INVALID_TAG_NAME`,e[e.UNMATCHED_CLOSING_TAG=26]=`UNMATCHED_CLOSING_TAG`,e[e.UNCLOSED_TAG=27]=`UNCLOSED_TAG`})(X||={});var Z;(function(e){e[e.literal=0]=`literal`,e[e.argument=1]=`argument`,e[e.number=2]=`number`,e[e.date=3]=`date`,e[e.time=4]=`time`,e[e.select=5]=`select`,e[e.plural=6]=`plural`,e[e.pound=7]=`pound`,e[e.tag=8]=`tag`})(Z||={});var Gl;(function(e){e[e.number=0]=`number`,e[e.dateTime=1]=`dateTime`})(Gl||={});function Kl(e){return e.type===Z.literal}function ql(e){return e.type===Z.argument}function Jl(e){return e.type===Z.number}function Yl(e){return e.type===Z.date}function Xl(e){return e.type===Z.time}function Zl(e){return e.type===Z.select}function Ql(e){return e.type===Z.plural}function $l(e){return e.type===Z.pound}function eu(e){return e.type===Z.tag}function tu(e){return!!(e&&typeof e==`object`&&e.type===Gl.number)}function nu(e){return!!(e&&typeof e==`object`&&e.type===Gl.dateTime)}var ru=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,iu=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function au(e){var t={};return e.replace(iu,function(e){var n=e.length;switch(e[0]){case`G`:t.era=n===4?`long`:n===5?`narrow`:`short`;break;case`y`:t.year=n===2?`2-digit`:`numeric`;break;case`Y`:case`u`:case`U`:case`r`:throw RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case`q`:case`Q`:throw RangeError("`q/Q` (quarter) patterns are not supported");case`M`:case`L`:t.month=[`numeric`,`2-digit`,`short`,`long`,`narrow`][n-1];break;case`w`:case`W`:throw RangeError("`w/W` (week) patterns are not supported");case`d`:t.day=[`numeric`,`2-digit`][n-1];break;case`D`:case`F`:case`g`:throw RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case`E`:t.weekday=n===4?`long`:n===5?`narrow`:`short`;break;case`e`:if(n<4)throw RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=[`short`,`long`,`narrow`,`short`][n-4];break;case`c`:if(n<4)throw RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=[`short`,`long`,`narrow`,`short`][n-4];break;case`a`:t.hour12=!0;break;case`b`:case`B`:throw RangeError("`b/B` (period) patterns are not supported, use `a` instead");case`h`:t.hourCycle=`h12`,t.hour=[`numeric`,`2-digit`][n-1];break;case`H`:t.hourCycle=`h23`,t.hour=[`numeric`,`2-digit`][n-1];break;case`K`:t.hourCycle=`h11`,t.hour=[`numeric`,`2-digit`][n-1];break;case`k`:t.hourCycle=`h24`,t.hour=[`numeric`,`2-digit`][n-1];break;case`j`:case`J`:case`C`:throw RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case`m`:t.minute=[`numeric`,`2-digit`][n-1];break;case`s`:t.second=[`numeric`,`2-digit`][n-1];break;case`S`:case`A`:throw RangeError("`S/A` (second) patterns are not supported, use `s` instead");case`z`:t.timeZoneName=n<4?`short`:`long`;break;case`Z`:case`O`:case`v`:case`V`:case`X`:case`x`:throw RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return``}),t}var ou=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function su(e){if(e.length===0)throw Error(`Number skeleton cannot be empty`);for(var t=e.split(ou).filter(function(e){return e.length>0}),n=[],r=0,i=t;r<i.length;r++){var a=i[r].split(`/`);if(a.length===0)throw Error(`Invalid number skeleton`);for(var o=a[0],s=a.slice(1),c=0,l=s;c<l.length;c++)if(l[c].length===0)throw Error(`Invalid number skeleton`);n.push({stem:o,options:s})}return n}function cu(e){return e.replace(/^(.*?)-/,``)}var lu=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,uu=/^(@+)?(\+|#+)?[rs]?$/g,du=/(\*)(0+)|(#+)(0+)|(0+)/g,fu=/^(0+)$/;function pu(e){var t={};return e[e.length-1]===`r`?t.roundingPriority=`morePrecision`:e[e.length-1]===`s`&&(t.roundingPriority=`lessPrecision`),e.replace(uu,function(e,n,r){return typeof r==`string`?r===`+`?t.minimumSignificantDigits=n.length:n[0]===`#`?t.maximumSignificantDigits=n.length:(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length+(typeof r==`string`?r.length:0)):(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length),``}),t}function mu(e){switch(e){case`sign-auto`:return{signDisplay:`auto`};case`sign-accounting`:case`()`:return{currencySign:`accounting`};case`sign-always`:case`+!`:return{signDisplay:`always`};case`sign-accounting-always`:case`()!`:return{signDisplay:`always`,currencySign:`accounting`};case`sign-except-zero`:case`+?`:return{signDisplay:`exceptZero`};case`sign-accounting-except-zero`:case`()?`:return{signDisplay:`exceptZero`,currencySign:`accounting`};case`sign-never`:case`+_`:return{signDisplay:`never`}}}function hu(e){var t;if(e[0]===`E`&&e[1]===`E`?(t={notation:`engineering`},e=e.slice(2)):e[0]===`E`&&(t={notation:`scientific`},e=e.slice(1)),t){var n=e.slice(0,2);if(n===`+!`?(t.signDisplay=`always`,e=e.slice(2)):n===`+?`&&(t.signDisplay=`exceptZero`,e=e.slice(2)),!fu.test(e))throw Error(`Malformed concise eng/scientific notation`);t.minimumIntegerDigits=e.length}return t}function gu(e){return mu(e)||{}}function _u(e){for(var t={},n=0,r=e;n<r.length;n++){var i=r[n];switch(i.stem){case`percent`:case`%`:t.style=`percent`;continue;case`%x100`:t.style=`percent`,t.scale=100;continue;case`currency`:t.style=`currency`,t.currency=i.options[0];continue;case`group-off`:case`,_`:t.useGrouping=!1;continue;case`precision-integer`:case`.`:t.maximumFractionDigits=0;continue;case`measure-unit`:case`unit`:t.style=`unit`,t.unit=cu(i.options[0]);continue;case`compact-short`:case`K`:t.notation=`compact`,t.compactDisplay=`short`;continue;case`compact-long`:case`KK`:t.notation=`compact`,t.compactDisplay=`long`;continue;case`scientific`:t=Y(Y(Y({},t),{notation:`scientific`}),i.options.reduce(function(e,t){return Y(Y({},e),gu(t))},{}));continue;case`engineering`:t=Y(Y(Y({},t),{notation:`engineering`}),i.options.reduce(function(e,t){return Y(Y({},e),gu(t))},{}));continue;case`notation-simple`:t.notation=`standard`;continue;case`unit-width-narrow`:t.currencyDisplay=`narrowSymbol`,t.unitDisplay=`narrow`;continue;case`unit-width-short`:t.currencyDisplay=`code`,t.unitDisplay=`short`;continue;case`unit-width-full-name`:t.currencyDisplay=`name`,t.unitDisplay=`long`;continue;case`unit-width-iso-code`:t.currencyDisplay=`symbol`;continue;case`scale`:t.scale=parseFloat(i.options[0]);continue;case`rounding-mode-floor`:t.roundingMode=`floor`;continue;case`rounding-mode-ceiling`:t.roundingMode=`ceil`;continue;case`rounding-mode-down`:t.roundingMode=`trunc`;continue;case`rounding-mode-up`:t.roundingMode=`expand`;continue;case`rounding-mode-half-even`:t.roundingMode=`halfEven`;continue;case`rounding-mode-half-down`:t.roundingMode=`halfTrunc`;continue;case`rounding-mode-half-up`:t.roundingMode=`halfExpand`;continue;case`integer-width`:if(i.options.length>1)throw RangeError(`integer-width stems only accept a single optional option`);i.options[0].replace(du,function(e,n,r,i,a,o){if(n)t.minimumIntegerDigits=r.length;else if(i&&a)throw Error(`We currently do not support maximum integer digits`);else if(o)throw Error(`We currently do not support exact integer digits`);return``});continue}if(fu.test(i.stem)){t.minimumIntegerDigits=i.stem.length;continue}if(lu.test(i.stem)){if(i.options.length>1)throw RangeError(`Fraction-precision stems only accept a single optional option`);i.stem.replace(lu,function(e,n,r,i,a,o){return r===`*`?t.minimumFractionDigits=n.length:i&&i[0]===`#`?t.maximumFractionDigits=i.length:a&&o?(t.minimumFractionDigits=a.length,t.maximumFractionDigits=a.length+o.length):(t.minimumFractionDigits=n.length,t.maximumFractionDigits=n.length),``});var a=i.options[0];a===`w`?t=Y(Y({},t),{trailingZeroDisplay:`stripIfInteger`}):a&&(t=Y(Y({},t),pu(a)));continue}if(uu.test(i.stem)){t=Y(Y({},t),pu(i.stem));continue}var o=mu(i.stem);o&&(t=Y(Y({},t),o));var s=hu(i.stem);s&&(t=Y(Y({},t),s))}return t}var vu={"001":[`H`,`h`],419:[`h`,`H`,`hB`,`hb`],AC:[`H`,`h`,`hb`,`hB`],AD:[`H`,`hB`],AE:[`h`,`hB`,`hb`,`H`],AF:[`H`,`hb`,`hB`,`h`],AG:[`h`,`hb`,`H`,`hB`],AI:[`H`,`h`,`hb`,`hB`],AL:[`h`,`H`,`hB`],AM:[`H`,`hB`],AO:[`H`,`hB`],AR:[`h`,`H`,`hB`,`hb`],AS:[`h`,`H`],AT:[`H`,`hB`],AU:[`h`,`hb`,`H`,`hB`],AW:[`H`,`hB`],AX:[`H`],AZ:[`H`,`hB`,`h`],BA:[`H`,`hB`,`h`],BB:[`h`,`hb`,`H`,`hB`],BD:[`h`,`hB`,`H`],BE:[`H`,`hB`],BF:[`H`,`hB`],BG:[`H`,`hB`,`h`],BH:[`h`,`hB`,`hb`,`H`],BI:[`H`,`h`],BJ:[`H`,`hB`],BL:[`H`,`hB`],BM:[`h`,`hb`,`H`,`hB`],BN:[`hb`,`hB`,`h`,`H`],BO:[`h`,`H`,`hB`,`hb`],BQ:[`H`],BR:[`H`,`hB`],BS:[`h`,`hb`,`H`,`hB`],BT:[`h`,`H`],BW:[`H`,`h`,`hb`,`hB`],BY:[`H`,`h`],BZ:[`H`,`h`,`hb`,`hB`],CA:[`h`,`hb`,`H`,`hB`],CC:[`H`,`h`,`hb`,`hB`],CD:[`hB`,`H`],CF:[`H`,`h`,`hB`],CG:[`H`,`hB`],CH:[`H`,`hB`,`h`],CI:[`H`,`hB`],CK:[`H`,`h`,`hb`,`hB`],CL:[`h`,`H`,`hB`,`hb`],CM:[`H`,`h`,`hB`],CN:[`H`,`hB`,`hb`,`h`],CO:[`h`,`H`,`hB`,`hb`],CP:[`H`],CR:[`h`,`H`,`hB`,`hb`],CU:[`h`,`H`,`hB`,`hb`],CV:[`H`,`hB`],CW:[`H`,`hB`],CX:[`H`,`h`,`hb`,`hB`],CY:[`h`,`H`,`hb`,`hB`],CZ:[`H`],DE:[`H`,`hB`],DG:[`H`,`h`,`hb`,`hB`],DJ:[`h`,`H`],DK:[`H`],DM:[`h`,`hb`,`H`,`hB`],DO:[`h`,`H`,`hB`,`hb`],DZ:[`h`,`hB`,`hb`,`H`],EA:[`H`,`h`,`hB`,`hb`],EC:[`h`,`H`,`hB`,`hb`],EE:[`H`,`hB`],EG:[`h`,`hB`,`hb`,`H`],EH:[`h`,`hB`,`hb`,`H`],ER:[`h`,`H`],ES:[`H`,`hB`,`h`,`hb`],ET:[`hB`,`hb`,`h`,`H`],FI:[`H`],FJ:[`h`,`hb`,`H`,`hB`],FK:[`H`,`h`,`hb`,`hB`],FM:[`h`,`hb`,`H`,`hB`],FO:[`H`,`h`],FR:[`H`,`hB`],GA:[`H`,`hB`],GB:[`H`,`h`,`hb`,`hB`],GD:[`h`,`hb`,`H`,`hB`],GE:[`H`,`hB`,`h`],GF:[`H`,`hB`],GG:[`H`,`h`,`hb`,`hB`],GH:[`h`,`H`],GI:[`H`,`h`,`hb`,`hB`],GL:[`H`,`h`],GM:[`h`,`hb`,`H`,`hB`],GN:[`H`,`hB`],GP:[`H`,`hB`],GQ:[`H`,`hB`,`h`,`hb`],GR:[`h`,`H`,`hb`,`hB`],GT:[`h`,`H`,`hB`,`hb`],GU:[`h`,`hb`,`H`,`hB`],GW:[`H`,`hB`],GY:[`h`,`hb`,`H`,`hB`],HK:[`h`,`hB`,`hb`,`H`],HN:[`h`,`H`,`hB`,`hb`],HR:[`H`,`hB`],HU:[`H`,`h`],IC:[`H`,`h`,`hB`,`hb`],ID:[`H`],IE:[`H`,`h`,`hb`,`hB`],IL:[`H`,`hB`],IM:[`H`,`h`,`hb`,`hB`],IN:[`h`,`H`],IO:[`H`,`h`,`hb`,`hB`],IQ:[`h`,`hB`,`hb`,`H`],IR:[`hB`,`H`],IS:[`H`],IT:[`H`,`hB`],JE:[`H`,`h`,`hb`,`hB`],JM:[`h`,`hb`,`H`,`hB`],JO:[`h`,`hB`,`hb`,`H`],JP:[`H`,`K`,`h`],KE:[`hB`,`hb`,`H`,`h`],KG:[`H`,`h`,`hB`,`hb`],KH:[`hB`,`h`,`H`,`hb`],KI:[`h`,`hb`,`H`,`hB`],KM:[`H`,`h`,`hB`,`hb`],KN:[`h`,`hb`,`H`,`hB`],KP:[`h`,`H`,`hB`,`hb`],KR:[`h`,`H`,`hB`,`hb`],KW:[`h`,`hB`,`hb`,`H`],KY:[`h`,`hb`,`H`,`hB`],KZ:[`H`,`hB`],LA:[`H`,`hb`,`hB`,`h`],LB:[`h`,`hB`,`hb`,`H`],LC:[`h`,`hb`,`H`,`hB`],LI:[`H`,`hB`,`h`],LK:[`H`,`h`,`hB`,`hb`],LR:[`h`,`hb`,`H`,`hB`],LS:[`h`,`H`],LT:[`H`,`h`,`hb`,`hB`],LU:[`H`,`h`,`hB`],LV:[`H`,`hB`,`hb`,`h`],LY:[`h`,`hB`,`hb`,`H`],MA:[`H`,`h`,`hB`,`hb`],MC:[`H`,`hB`],MD:[`H`,`hB`],ME:[`H`,`hB`,`h`],MF:[`H`,`hB`],MG:[`H`,`h`],MH:[`h`,`hb`,`H`,`hB`],MK:[`H`,`h`,`hb`,`hB`],ML:[`H`],MM:[`hB`,`hb`,`H`,`h`],MN:[`H`,`h`,`hb`,`hB`],MO:[`h`,`hB`,`hb`,`H`],MP:[`h`,`hb`,`H`,`hB`],MQ:[`H`,`hB`],MR:[`h`,`hB`,`hb`,`H`],MS:[`H`,`h`,`hb`,`hB`],MT:[`H`,`h`],MU:[`H`,`h`],MV:[`H`,`h`],MW:[`h`,`hb`,`H`,`hB`],MX:[`h`,`H`,`hB`,`hb`],MY:[`hb`,`hB`,`h`,`H`],MZ:[`H`,`hB`],NA:[`h`,`H`,`hB`,`hb`],NC:[`H`,`hB`],NE:[`H`],NF:[`H`,`h`,`hb`,`hB`],NG:[`H`,`h`,`hb`,`hB`],NI:[`h`,`H`,`hB`,`hb`],NL:[`H`,`hB`],NO:[`H`,`h`],NP:[`H`,`h`,`hB`],NR:[`H`,`h`,`hb`,`hB`],NU:[`H`,`h`,`hb`,`hB`],NZ:[`h`,`hb`,`H`,`hB`],OM:[`h`,`hB`,`hb`,`H`],PA:[`h`,`H`,`hB`,`hb`],PE:[`h`,`H`,`hB`,`hb`],PF:[`H`,`h`,`hB`],PG:[`h`,`H`],PH:[`h`,`hB`,`hb`,`H`],PK:[`h`,`hB`,`H`],PL:[`H`,`h`],PM:[`H`,`hB`],PN:[`H`,`h`,`hb`,`hB`],PR:[`h`,`H`,`hB`,`hb`],PS:[`h`,`hB`,`hb`,`H`],PT:[`H`,`hB`],PW:[`h`,`H`],PY:[`h`,`H`,`hB`,`hb`],QA:[`h`,`hB`,`hb`,`H`],RE:[`H`,`hB`],RO:[`H`,`hB`],RS:[`H`,`hB`,`h`],RU:[`H`],RW:[`H`,`h`],SA:[`h`,`hB`,`hb`,`H`],SB:[`h`,`hb`,`H`,`hB`],SC:[`H`,`h`,`hB`],SD:[`h`,`hB`,`hb`,`H`],SE:[`H`],SG:[`h`,`hb`,`H`,`hB`],SH:[`H`,`h`,`hb`,`hB`],SI:[`H`,`hB`],SJ:[`H`],SK:[`H`],SL:[`h`,`hb`,`H`,`hB`],SM:[`H`,`h`,`hB`],SN:[`H`,`h`,`hB`],SO:[`h`,`H`],SR:[`H`,`hB`],SS:[`h`,`hb`,`H`,`hB`],ST:[`H`,`hB`],SV:[`h`,`H`,`hB`,`hb`],SX:[`H`,`h`,`hb`,`hB`],SY:[`h`,`hB`,`hb`,`H`],SZ:[`h`,`hb`,`H`,`hB`],TA:[`H`,`h`,`hb`,`hB`],TC:[`h`,`hb`,`H`,`hB`],TD:[`h`,`H`,`hB`],TF:[`H`,`h`,`hB`],TG:[`H`,`hB`],TH:[`H`,`h`],TJ:[`H`,`h`],TL:[`H`,`hB`,`hb`,`h`],TM:[`H`,`h`],TN:[`h`,`hB`,`hb`,`H`],TO:[`h`,`H`],TR:[`H`,`hB`],TT:[`h`,`hb`,`H`,`hB`],TW:[`hB`,`hb`,`h`,`H`],TZ:[`hB`,`hb`,`H`,`h`],UA:[`H`,`hB`,`h`],UG:[`hB`,`hb`,`H`,`h`],UM:[`h`,`hb`,`H`,`hB`],US:[`h`,`hb`,`H`,`hB`],UY:[`h`,`H`,`hB`,`hb`],UZ:[`H`,`hB`,`h`],VA:[`H`,`h`,`hB`],VC:[`h`,`hb`,`H`,`hB`],VE:[`h`,`H`,`hB`,`hb`],VG:[`h`,`hb`,`H`,`hB`],VI:[`h`,`hb`,`H`,`hB`],VN:[`H`,`h`],VU:[`h`,`H`],WF:[`H`,`hB`],WS:[`h`,`H`],XK:[`H`,`hB`,`h`],YE:[`h`,`hB`,`hb`,`H`],YT:[`H`,`hB`],ZA:[`H`,`h`,`hb`,`hB`],ZM:[`h`,`hb`,`H`,`hB`],ZW:[`H`,`h`],"af-ZA":[`H`,`h`,`hB`,`hb`],"ar-001":[`h`,`hB`,`hb`,`H`],"ca-ES":[`H`,`h`,`hB`],"en-001":[`h`,`hb`,`H`,`hB`],"en-HK":[`h`,`hb`,`H`,`hB`],"en-IL":[`H`,`h`,`hb`,`hB`],"en-MY":[`h`,`hb`,`H`,`hB`],"es-BR":[`H`,`h`,`hB`,`hb`],"es-ES":[`H`,`h`,`hB`,`hb`],"es-GQ":[`H`,`h`,`hB`,`hb`],"fr-CA":[`H`,`h`,`hB`],"gl-ES":[`H`,`h`,`hB`],"gu-IN":[`hB`,`hb`,`h`,`H`],"hi-IN":[`hB`,`h`,`H`],"it-CH":[`H`,`h`,`hB`],"it-IT":[`H`,`h`,`hB`],"kn-IN":[`hB`,`h`,`H`],"ml-IN":[`hB`,`h`,`H`],"mr-IN":[`hB`,`hb`,`h`,`H`],"pa-IN":[`hB`,`hb`,`h`,`H`],"ta-IN":[`hB`,`h`,`hb`,`H`],"te-IN":[`hB`,`h`,`H`],"zu-ZA":[`H`,`hB`,`hb`,`h`]};function yu(e,t){for(var n=``,r=0;r<e.length;r++){var i=e.charAt(r);if(i===`j`){for(var a=0;r+1<e.length&&e.charAt(r+1)===i;)a++,r++;var o=1+(a&1),s=a<2?1:3+(a>>1),c=`a`,l=bu(t);for((l==`H`||l==`k`)&&(s=0);s-- >0;)n+=c;for(;o-- >0;)n=l+n}else i===`J`?n+=`H`:n+=i}return n}function bu(e){var t=e.hourCycle;if(t===void 0&&e.hourCycles&&e.hourCycles.length&&(t=e.hourCycles[0]),t)switch(t){case`h24`:return`k`;case`h23`:return`H`;case`h12`:return`h`;case`h11`:return`K`;default:throw Error(`Invalid hourCycle`)}var n=e.language,r;return n!==`root`&&(r=e.maximize().region),(vu[r||``]||vu[n||``]||vu[`${n}-001`]||vu[`001`])[0]}var xu=RegExp(`^${ru.source}*`),Su=RegExp(`${ru.source}*\$`);function Q(e,t){return{start:e,end:t}}var Cu=!!String.prototype.startsWith&&`_a`.startsWith(`a`,1),wu=!!String.fromCodePoint,Tu=!!Object.fromEntries,Eu=!!String.prototype.codePointAt,Du=!!String.prototype.trimStart,Ou=!!String.prototype.trimEnd,ku=Number.isSafeInteger?Number.isSafeInteger:function(e){return typeof e==`number`&&isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<=9007199254740991},Au=!0;try{Au=Lu(`([^\\p{White_Space}\\p{Pattern_Syntax}]*)`,`yu`).exec(`a`)?.[0]===`a`}catch{Au=!1}var ju=Cu?function(e,t,n){return e.startsWith(t,n)}:function(e,t,n){return e.slice(n,n+t.length)===t},Mu=wu?String.fromCodePoint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=``,r=e.length,i=0,a;r>i;){if(a=e[i++],a>1114111)throw RangeError(a+` is not a valid code point`);n+=a<65536?String.fromCharCode(a):String.fromCharCode(((a-=65536)>>10)+55296,a%1024+56320)}return n},Nu=Tu?Object.fromEntries:function(e){for(var t={},n=0,r=e;n<r.length;n++){var i=r[n],a=i[0];t[a]=i[1]}return t},Pu=Eu?function(e,t){return e.codePointAt(t)}:function(e,t){var n=e.length;if(!(t<0||t>=n)){var r=e.charCodeAt(t),i;return r<55296||r>56319||t+1===n||(i=e.charCodeAt(t+1))<56320||i>57343?r:(r-55296<<10)+(i-56320)+65536}},Fu=Du?function(e){return e.trimStart()}:function(e){return e.replace(xu,``)},Iu=Ou?function(e){return e.trimEnd()}:function(e){return e.replace(Su,``)};function Lu(e,t){return new RegExp(e,t)}var Ru;if(Au){var zu=Lu(`([^\\p{White_Space}\\p{Pattern_Syntax}]*)`,`yu`);Ru=function(e,t){return zu.lastIndex=t,zu.exec(e)[1]??``}}else Ru=function(e,t){for(var n=[];;){var r=Pu(e,t);if(r===void 0||Wu(r)||Gu(r))break;n.push(r),t+=r>=65536?2:1}return Mu.apply(void 0,n)};var Bu=function(){function e(e,t){t===void 0&&(t={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!t.ignoreTag,this.locale=t.locale,this.requiresOtherClause=!!t.requiresOtherClause,this.shouldParseSkeletons=!!t.shouldParseSkeletons}return e.prototype.parse=function(){if(this.offset()!==0)throw Error(`parser can only be used once`);return this.parseMessage(0,``,!1)},e.prototype.parseMessage=function(e,t,n){for(var r=[];!this.isEOF();){var i=this.char();if(i===123){var a=this.parseArgument(e,n);if(a.err)return a;r.push(a.val)}else if(i===125&&e>0)break;else if(i===35&&(t===`plural`||t===`selectordinal`)){var o=this.clonePosition();this.bump(),r.push({type:Z.pound,location:Q(o,this.clonePosition())})}else if(i===60&&!this.ignoreTag&&this.peek()===47){if(n)break;return this.error(X.UNMATCHED_CLOSING_TAG,Q(this.clonePosition(),this.clonePosition()))}else if(i===60&&!this.ignoreTag&&Vu(this.peek()||0)){var a=this.parseTag(e,t);if(a.err)return a;r.push(a.val)}else{var a=this.parseLiteral(e,t);if(a.err)return a;r.push(a.val)}}return{val:r,err:null}},e.prototype.parseTag=function(e,t){var n=this.clonePosition();this.bump();var r=this.parseTagName();if(this.bumpSpace(),this.bumpIf(`/>`))return{val:{type:Z.literal,value:`<${r}/>`,location:Q(n,this.clonePosition())},err:null};if(this.bumpIf(`>`)){var i=this.parseMessage(e+1,t,!0);if(i.err)return i;var a=i.val,o=this.clonePosition();if(this.bumpIf(`</`)){if(this.isEOF()||!Vu(this.char()))return this.error(X.INVALID_TAG,Q(o,this.clonePosition()));var s=this.clonePosition(),c=this.parseTagName();return r===c?(this.bumpSpace(),this.bumpIf(`>`)?{val:{type:Z.tag,value:r,children:a,location:Q(n,this.clonePosition())},err:null}:this.error(X.INVALID_TAG,Q(o,this.clonePosition()))):this.error(X.UNMATCHED_CLOSING_TAG,Q(s,this.clonePosition()))}else return this.error(X.UNCLOSED_TAG,Q(n,this.clonePosition()))}else return this.error(X.INVALID_TAG,Q(n,this.clonePosition()))},e.prototype.parseTagName=function(){var e=this.offset();for(this.bump();!this.isEOF()&&Uu(this.char());)this.bump();return this.message.slice(e,this.offset())},e.prototype.parseLiteral=function(e,t){for(var n=this.clonePosition(),r=``;;){var i=this.tryParseQuote(t);if(i){r+=i;continue}var a=this.tryParseUnquoted(e,t);if(a){r+=a;continue}var o=this.tryParseLeftAngleBracket();if(o){r+=o;continue}break}var s=Q(n,this.clonePosition());return{val:{type:Z.literal,value:r,location:s},err:null}},e.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!Hu(this.peek()||0))?(this.bump(),`<`):null},e.prototype.tryParseQuote=function(e){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),`'`;case 123:case 60:case 62:case 125:break;case 35:if(e===`plural`||e===`selectordinal`)break;return null;default:return null}this.bump();var t=[this.char()];for(this.bump();!this.isEOF();){var n=this.char();if(n===39)if(this.peek()===39)t.push(39),this.bump();else{this.bump();break}else t.push(n);this.bump()}return Mu.apply(void 0,t)},e.prototype.tryParseUnquoted=function(e,t){if(this.isEOF())return null;var n=this.char();return n===60||n===123||n===35&&(t===`plural`||t===`selectordinal`)||n===125&&e>0?null:(this.bump(),Mu(n))},e.prototype.parseArgument=function(e,t){var n=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(X.EXPECT_ARGUMENT_CLOSING_BRACE,Q(n,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(X.EMPTY_ARGUMENT,Q(n,this.clonePosition()));var r=this.parseIdentifierIfPossible().value;if(!r)return this.error(X.MALFORMED_ARGUMENT,Q(n,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(X.EXPECT_ARGUMENT_CLOSING_BRACE,Q(n,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:Z.argument,value:r,location:Q(n,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(X.EXPECT_ARGUMENT_CLOSING_BRACE,Q(n,this.clonePosition())):this.parseArgumentOptions(e,t,r,n);default:return this.error(X.MALFORMED_ARGUMENT,Q(n,this.clonePosition()))}},e.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),t=this.offset(),n=Ru(this.message,t),r=t+n.length;this.bumpTo(r);var i=this.clonePosition(),a=Q(e,i);return{value:n,location:a}},e.prototype.parseArgumentOptions=function(e,t,n,r){var i=this.clonePosition(),a=this.parseIdentifierIfPossible().value,o=this.clonePosition();switch(a){case``:return this.error(X.EXPECT_ARGUMENT_TYPE,Q(i,o));case`number`:case`date`:case`time`:this.bumpSpace();var s=null;if(this.bumpIf(`,`)){this.bumpSpace();var c=this.clonePosition(),l=this.parseSimpleArgStyleIfPossible();if(l.err)return l;var u=Iu(l.val);if(u.length===0)return this.error(X.EXPECT_ARGUMENT_STYLE,Q(this.clonePosition(),this.clonePosition()));var d=Q(c,this.clonePosition());s={style:u,styleLocation:d}}var f=this.tryParseArgumentClose(r);if(f.err)return f;var p=Q(r,this.clonePosition());if(s&&ju(s?.style,`::`,0)){var m=Fu(s.style.slice(2));if(a===`number`){var l=this.parseNumberSkeletonFromString(m,s.styleLocation);return l.err?l:{val:{type:Z.number,value:n,location:p,style:l.val},err:null}}else{if(m.length===0)return this.error(X.EXPECT_DATE_TIME_SKELETON,p);var h=m;this.locale&&(h=yu(m,this.locale));var u={type:Gl.dateTime,pattern:h,location:s.styleLocation,parsedOptions:this.shouldParseSkeletons?au(h):{}};return{val:{type:a===`date`?Z.date:Z.time,value:n,location:p,style:u},err:null}}}return{val:{type:a===`number`?Z.number:a===`date`?Z.date:Z.time,value:n,location:p,style:s?.style??null},err:null};case`plural`:case`selectordinal`:case`select`:var g=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(`,`))return this.error(X.EXPECT_SELECT_ARGUMENT_OPTIONS,Q(g,Y({},g)));this.bumpSpace();var _=this.parseIdentifierIfPossible(),v=0;if(a!==`select`&&_.value===`offset`){if(!this.bumpIf(`:`))return this.error(X.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Q(this.clonePosition(),this.clonePosition()));this.bumpSpace();var l=this.tryParseDecimalInteger(X.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,X.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(l.err)return l;this.bumpSpace(),_=this.parseIdentifierIfPossible(),v=l.val}var y=this.tryParsePluralOrSelectOptions(e,a,t,_);if(y.err)return y;var f=this.tryParseArgumentClose(r);if(f.err)return f;var b=Q(r,this.clonePosition());return a===`select`?{val:{type:Z.select,value:n,options:Nu(y.val),location:b},err:null}:{val:{type:Z.plural,value:n,options:Nu(y.val),offset:v,pluralType:a===`plural`?`cardinal`:`ordinal`,location:b},err:null};default:return this.error(X.INVALID_ARGUMENT_TYPE,Q(i,o))}},e.prototype.tryParseArgumentClose=function(e){return this.isEOF()||this.char()!==125?this.error(X.EXPECT_ARGUMENT_CLOSING_BRACE,Q(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},e.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,t=this.clonePosition();!this.isEOF();)switch(this.char()){case 39:this.bump();var n=this.clonePosition();if(!this.bumpUntil(`'`))return this.error(X.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,Q(n,this.clonePosition()));this.bump();break;case 123:e+=1,this.bump();break;case 125:if(e>0)--e;else return{val:this.message.slice(t.offset,this.offset()),err:null};break;default:this.bump();break}return{val:this.message.slice(t.offset,this.offset()),err:null}},e.prototype.parseNumberSkeletonFromString=function(e,t){var n=[];try{n=su(e)}catch{return this.error(X.INVALID_NUMBER_SKELETON,t)}return{val:{type:Gl.number,tokens:n,location:t,parsedOptions:this.shouldParseSkeletons?_u(n):{}},err:null}},e.prototype.tryParsePluralOrSelectOptions=function(e,t,n,r){for(var i,a=!1,o=[],s=new Set,c=r.value,l=r.location;;){if(c.length===0){var u=this.clonePosition();if(t!==`select`&&this.bumpIf(`=`)){var d=this.tryParseDecimalInteger(X.EXPECT_PLURAL_ARGUMENT_SELECTOR,X.INVALID_PLURAL_ARGUMENT_SELECTOR);if(d.err)return d;l=Q(u,this.clonePosition()),c=this.message.slice(u.offset,this.offset())}else break}if(s.has(c))return this.error(t===`select`?X.DUPLICATE_SELECT_ARGUMENT_SELECTOR:X.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,l);c===`other`&&(a=!0),this.bumpSpace();var f=this.clonePosition();if(!this.bumpIf(`{`))return this.error(t===`select`?X.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:X.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,Q(this.clonePosition(),this.clonePosition()));var p=this.parseMessage(e+1,t,n);if(p.err)return p;var m=this.tryParseArgumentClose(f);if(m.err)return m;o.push([c,{value:p.val,location:Q(f,this.clonePosition())}]),s.add(c),this.bumpSpace(),i=this.parseIdentifierIfPossible(),c=i.value,l=i.location}return o.length===0?this.error(t===`select`?X.EXPECT_SELECT_ARGUMENT_SELECTOR:X.EXPECT_PLURAL_ARGUMENT_SELECTOR,Q(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!a?this.error(X.MISSING_OTHER_CLAUSE,Q(this.clonePosition(),this.clonePosition())):{val:o,err:null}},e.prototype.tryParseDecimalInteger=function(e,t){var n=1,r=this.clonePosition();this.bumpIf(`+`)||this.bumpIf(`-`)&&(n=-1);for(var i=!1,a=0;!this.isEOF();){var o=this.char();if(o>=48&&o<=57)i=!0,a=a*10+(o-48),this.bump();else break}var s=Q(r,this.clonePosition());return i?(a*=n,ku(a)?{val:a,err:null}:this.error(t,s)):this.error(e,s)},e.prototype.offset=function(){return this.position.offset},e.prototype.isEOF=function(){return this.offset()===this.message.length},e.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},e.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error(`out of bound`);var t=Pu(this.message,e);if(t===void 0)throw Error(`Offset ${e} is at invalid UTF-16 code unit boundary`);return t},e.prototype.error=function(e,t){return{val:null,err:{kind:e,message:this.message,location:t}}},e.prototype.bump=function(){if(!this.isEOF()){var e=this.char();e===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},e.prototype.bumpIf=function(e){if(ju(this.message,e,this.offset())){for(var t=0;t<e.length;t++)this.bump();return!0}return!1},e.prototype.bumpUntil=function(e){var t=this.offset(),n=this.message.indexOf(e,t);return n>=0?(this.bumpTo(n),!0):(this.bumpTo(this.message.length),!1)},e.prototype.bumpTo=function(e){if(this.offset()>e)throw Error(`targetOffset ${e} must be greater than or equal to the current offset ${this.offset()}`);for(e=Math.min(e,this.message.length);;){var t=this.offset();if(t===e)break;if(t>e)throw Error(`targetOffset ${e} is at invalid UTF-16 code unit boundary`);if(this.bump(),this.isEOF())break}},e.prototype.bumpSpace=function(){for(;!this.isEOF()&&Wu(this.char());)this.bump()},e.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),t=this.offset();return this.message.charCodeAt(t+(e>=65536?2:1))??null},e}();function Vu(e){return e>=97&&e<=122||e>=65&&e<=90}function Hu(e){return Vu(e)||e===47}function Uu(e){return e===45||e===46||e>=48&&e<=57||e===95||e>=97&&e<=122||e>=65&&e<=90||e==183||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function Wu(e){return e>=9&&e<=13||e===32||e===133||e>=8206&&e<=8207||e===8232||e===8233}function Gu(e){return e>=33&&e<=35||e===36||e>=37&&e<=39||e===40||e===41||e===42||e===43||e===44||e===45||e>=46&&e<=47||e>=58&&e<=59||e>=60&&e<=62||e>=63&&e<=64||e===91||e===92||e===93||e===94||e===96||e===123||e===124||e===125||e===126||e===161||e>=162&&e<=165||e===166||e===167||e===169||e===171||e===172||e===174||e===176||e===177||e===182||e===187||e===191||e===215||e===247||e>=8208&&e<=8213||e>=8214&&e<=8215||e===8216||e===8217||e===8218||e>=8219&&e<=8220||e===8221||e===8222||e===8223||e>=8224&&e<=8231||e>=8240&&e<=8248||e===8249||e===8250||e>=8251&&e<=8254||e>=8257&&e<=8259||e===8260||e===8261||e===8262||e>=8263&&e<=8273||e===8274||e===8275||e>=8277&&e<=8286||e>=8592&&e<=8596||e>=8597&&e<=8601||e>=8602&&e<=8603||e>=8604&&e<=8607||e===8608||e>=8609&&e<=8610||e===8611||e>=8612&&e<=8613||e===8614||e>=8615&&e<=8621||e===8622||e>=8623&&e<=8653||e>=8654&&e<=8655||e>=8656&&e<=8657||e===8658||e===8659||e===8660||e>=8661&&e<=8691||e>=8692&&e<=8959||e>=8960&&e<=8967||e===8968||e===8969||e===8970||e===8971||e>=8972&&e<=8991||e>=8992&&e<=8993||e>=8994&&e<=9e3||e===9001||e===9002||e>=9003&&e<=9083||e===9084||e>=9085&&e<=9114||e>=9115&&e<=9139||e>=9140&&e<=9179||e>=9180&&e<=9185||e>=9186&&e<=9254||e>=9255&&e<=9279||e>=9280&&e<=9290||e>=9291&&e<=9311||e>=9472&&e<=9654||e===9655||e>=9656&&e<=9664||e===9665||e>=9666&&e<=9719||e>=9720&&e<=9727||e>=9728&&e<=9838||e===9839||e>=9840&&e<=10087||e===10088||e===10089||e===10090||e===10091||e===10092||e===10093||e===10094||e===10095||e===10096||e===10097||e===10098||e===10099||e===10100||e===10101||e>=10132&&e<=10175||e>=10176&&e<=10180||e===10181||e===10182||e>=10183&&e<=10213||e===10214||e===10215||e===10216||e===10217||e===10218||e===10219||e===10220||e===10221||e===10222||e===10223||e>=10224&&e<=10239||e>=10240&&e<=10495||e>=10496&&e<=10626||e===10627||e===10628||e===10629||e===10630||e===10631||e===10632||e===10633||e===10634||e===10635||e===10636||e===10637||e===10638||e===10639||e===10640||e===10641||e===10642||e===10643||e===10644||e===10645||e===10646||e===10647||e===10648||e>=10649&&e<=10711||e===10712||e===10713||e===10714||e===10715||e>=10716&&e<=10747||e===10748||e===10749||e>=10750&&e<=11007||e>=11008&&e<=11055||e>=11056&&e<=11076||e>=11077&&e<=11078||e>=11079&&e<=11084||e>=11085&&e<=11123||e>=11124&&e<=11125||e>=11126&&e<=11157||e===11158||e>=11159&&e<=11263||e>=11776&&e<=11777||e===11778||e===11779||e===11780||e===11781||e>=11782&&e<=11784||e===11785||e===11786||e===11787||e===11788||e===11789||e>=11790&&e<=11798||e===11799||e>=11800&&e<=11801||e===11802||e===11803||e===11804||e===11805||e>=11806&&e<=11807||e===11808||e===11809||e===11810||e===11811||e===11812||e===11813||e===11814||e===11815||e===11816||e===11817||e>=11818&&e<=11822||e===11823||e>=11824&&e<=11833||e>=11834&&e<=11835||e>=11836&&e<=11839||e===11840||e===11841||e===11842||e>=11843&&e<=11855||e>=11856&&e<=11857||e===11858||e>=11859&&e<=11903||e>=12289&&e<=12291||e===12296||e===12297||e===12298||e===12299||e===12300||e===12301||e===12302||e===12303||e===12304||e===12305||e>=12306&&e<=12307||e===12308||e===12309||e===12310||e===12311||e===12312||e===12313||e===12314||e===12315||e===12316||e===12317||e>=12318&&e<=12319||e===12320||e===12336||e===64830||e===64831||e>=65093&&e<=65094}function Ku(e){e.forEach(function(e){if(delete e.location,Zl(e)||Ql(e))for(var t in e.options)delete e.options[t].location,Ku(e.options[t].value);else Jl(e)&&tu(e.style)||(Yl(e)||Xl(e))&&nu(e.style)?delete e.style.location:eu(e)&&Ku(e.children)})}function qu(e,t){t===void 0&&(t={}),t=Y({shouldParseSkeletons:!0,requiresOtherClause:!0},t);var n=new Bu(e,t).parse();if(n.err){var r=SyntaxError(X[n.err.kind]);throw r.location=n.err.location,r.originalMessage=n.err.message,r}return t?.captureLocation||Ku(n.val),n.val}var Ju;(function(e){e.MISSING_VALUE=`MISSING_VALUE`,e.INVALID_VALUE=`INVALID_VALUE`,e.MISSING_INTL_API=`MISSING_INTL_API`})(Ju||={});var Yu=function(e){Al(t,e);function t(t,n,r){var i=e.call(this,t)||this;return i.code=n,i.originalMessage=r,i}return t.prototype.toString=function(){return`[formatjs Error: ${this.code}] ${this.message}`},t}(Error),Xu=function(e){Al(t,e);function t(t,n,r,i){return e.call(this,`Invalid values for "${t}": "${n}". Options are "${Object.keys(r).join(`", "`)}"`,Ju.INVALID_VALUE,i)||this}return t}(Yu),Zu=function(e){Al(t,e);function t(t,n,r){return e.call(this,`Value for "${t}" must be of type ${n}`,Ju.INVALID_VALUE,r)||this}return t}(Yu),Qu=function(e){Al(t,e);function t(t,n){return e.call(this,`The intl string context variable "${t}" was not provided to the string "${n}"`,Ju.MISSING_VALUE,n)||this}return t}(Yu),$u;(function(e){e[e.literal=0]=`literal`,e[e.object=1]=`object`})($u||={});function ed(e){return e.length<2?e:e.reduce(function(e,t){var n=e[e.length-1];return!n||n.type!==$u.literal||t.type!==$u.literal?e.push(t):n.value+=t.value,e},[])}function td(e){return typeof e==`function`}function nd(e,t,n,r,i,a,o){if(e.length===1&&Kl(e[0]))return[{type:$u.literal,value:e[0].value}];for(var s=[],c=0,l=e;c<l.length;c++){var u=l[c];if(Kl(u)){s.push({type:$u.literal,value:u.value});continue}if($l(u)){typeof a==`number`&&s.push({type:$u.literal,value:n.getNumberFormat(t).format(a)});continue}var d=u.value;if(!(i&&d in i))throw new Qu(d,o);var f=i[d];if(ql(u)){(!f||typeof f==`string`||typeof f==`number`)&&(f=typeof f==`string`||typeof f==`number`?String(f):``),s.push({type:typeof f==`string`?$u.literal:$u.object,value:f});continue}if(Yl(u)){var p=typeof u.style==`string`?r.date[u.style]:nu(u.style)?u.style.parsedOptions:void 0;s.push({type:$u.literal,value:n.getDateTimeFormat(t,p).format(f)});continue}if(Xl(u)){var p=typeof u.style==`string`?r.time[u.style]:nu(u.style)?u.style.parsedOptions:r.time.medium;s.push({type:$u.literal,value:n.getDateTimeFormat(t,p).format(f)});continue}if(Jl(u)){var p=typeof u.style==`string`?r.number[u.style]:tu(u.style)?u.style.parsedOptions:void 0;p&&p.scale&&(f*=p.scale||1),s.push({type:$u.literal,value:n.getNumberFormat(t,p).format(f)});continue}if(eu(u)){var m=u.children,h=u.value,g=i[h];if(!td(g))throw new Zu(h,`function`,o);var _=nd(m,t,n,r,i,a),v=g(_.map(function(e){return e.value}));Array.isArray(v)||(v=[v]),s.push.apply(s,v.map(function(e){return{type:typeof e==`string`?$u.literal:$u.object,value:e}}))}if(Zl(u)){var y=u.options[f]||u.options.other;if(!y)throw new Xu(u.value,f,Object.keys(u.options),o);s.push.apply(s,nd(y.value,t,n,r,i));continue}if(Ql(u)){var y=u.options[`=${f}`];if(!y){if(!Intl.PluralRules)throw new Yu(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,Ju.MISSING_INTL_API,o);var b=n.getPluralRules(t,{type:u.pluralType}).select(f-(u.offset||0));y=u.options[b]||u.options.other}if(!y)throw new Xu(u.value,f,Object.keys(u.options),o);s.push.apply(s,nd(y.value,t,n,r,i,f-(u.offset||0)));continue}}return ed(s)}function rd(e,t){return t?Y(Y(Y({},e||{}),t||{}),Object.keys(e).reduce(function(n,r){return n[r]=Y(Y({},e[r]),t[r]||{}),n},{})):e}function id(e,t){return t?Object.keys(e).reduce(function(n,r){return n[r]=rd(e[r],t[r]),n},Y({},e)):e}function ad(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}function od(e){return e===void 0&&(e={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:Nl(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,Ml([void 0],t,!1)))},{cache:ad(e.number),strategy:Wl.variadic}),getDateTimeFormat:Nl(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,Ml([void 0],t,!1)))},{cache:ad(e.dateTime),strategy:Wl.variadic}),getPluralRules:Nl(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,Ml([void 0],t,!1)))},{cache:ad(e.pluralRules),strategy:Wl.variadic})}}var sd=function(){function e(t,n,r,i){n===void 0&&(n=e.defaultLocale);var a=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(e){var t=a.formatToParts(e);if(t.length===1)return t[0].value;var n=t.reduce(function(e,t){return!e.length||t.type!==$u.literal||typeof e[e.length-1]!=`string`?e.push(t.value):e[e.length-1]+=t.value,e},[]);return n.length<=1?n[0]||``:n},this.formatToParts=function(e){return nd(a.ast,a.locales,a.formatters,a.formats,e,void 0,a.message)},this.resolvedOptions=function(){return{locale:a.resolvedLocale?.toString()||Intl.NumberFormat.supportedLocalesOf(a.locales)[0]}},this.getAst=function(){return a.ast},this.locales=n,this.resolvedLocale=e.resolveLocale(n),typeof t==`string`){if(this.message=t,!e.__parse)throw TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var o=i||{};o.formatters;var s=jl(o,[`formatters`]);this.ast=e.__parse(t,Y(Y({},s),{locale:this.resolvedLocale}))}else this.ast=t;if(!Array.isArray(this.ast))throw TypeError(`A message must be provided as a String or AST.`);this.formats=id(e.formats,r),this.formatters=i&&i.formatters||od(this.formatterCache)}return Object.defineProperty(e,`defaultLocale`,{get:function(){return e.memoizedDefaultLocale||=new Intl.NumberFormat().resolvedOptions().locale,e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.resolveLocale=function(e){if(Intl.Locale!==void 0){var t=Intl.NumberFormat.supportedLocalesOf(e);return t.length>0?new Intl.Locale(t[0]):new Intl.Locale(typeof e==`string`?e:e[0])}},e.__parse=qu,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:`currency`},percent:{style:`percent`}},date:{short:{month:`numeric`,day:`numeric`,year:`2-digit`},medium:{month:`short`,day:`numeric`,year:`numeric`},long:{month:`long`,day:`numeric`,year:`numeric`},full:{weekday:`long`,month:`long`,day:`numeric`,year:`numeric`}},time:{short:{hour:`numeric`,minute:`numeric`},medium:{hour:`numeric`,minute:`numeric`,second:`numeric`},long:{hour:`numeric`,minute:`numeric`,second:`numeric`,timeZoneName:`short`},full:{hour:`numeric`,minute:`numeric`,second:`numeric`,timeZoneName:`short`}}},e}(),cd=u(Ol());function ld(e,t){if(t==null)return;if(t in e)return e[t];let n=t.split(`.`),r=e;for(let e=0;e<n.length;e++)if(typeof r==`object`){if(e>0){let t=n.slice(e,n.length).join(`.`);if(t in r){r=r[t];break}}r=r[n[e]]}else r=void 0;return r}var ud={},dd=(e,t,n)=>n&&(t in ud||(ud[t]={}),e in ud[t]||(ud[t][e]=n),n),fd=(e,t)=>{if(t==null)return;if(t in ud&&e in ud[t])return ud[t][e];let n=Qd(t);for(let r=0;r<n.length;r++){let i=n[r],a=_d(i,e);if(a)return dd(e,t,a)}},pd,md=zs({});function hd(e){return pd[e]||null}function gd(e){return e in pd}function _d(e,t){if(!gd(e))return null;let n=hd(e);return ld(n,t)}function vd(e){if(e==null)return;let t=Qd(e);for(let e=0;e<t.length;e++){let n=t[e];if(gd(n))return n}}function yd(e,...t){delete ud[e],md.update(n=>(n[e]=cd.default.all([n[e]||{},...t]),n))}Bs([md],([e])=>Object.keys(e)),md.subscribe(e=>pd=e);var bd={};function xd(e){bd[e]=new Set}function Sd(e,t){bd[e].delete(t),bd[e].size===0&&delete bd[e]}function Cd(e){return bd[e]}function wd(e){return Qd(e).map(e=>{let t=Cd(e);return[e,t?[...t]:[]]}).filter(([,e])=>e.length>0)}function Td(e){return e==null?!1:Qd(e).some(e=>Cd(e)?.size)}function Ed(e,t){return Promise.all(t.map(t=>(Sd(e,t),t().then(e=>e.default||e)))).then(t=>yd(e,...t))}var Dd={};function Od(e){if(!Td(e))return e in Dd?Dd[e]:Promise.resolve();let t=wd(e);return Dd[e]=Promise.all(t.map(([e,t])=>Ed(e,t))).then(()=>{if(Td(e))return Od(e);delete Dd[e]}),Dd[e]}function kd(e,t){Cd(e)||xd(e);let n=Cd(e);Cd(e).has(t)||(gd(e)||md.update(t=>(t[e]={},t)),n.add(t))}var Ad=Object.getOwnPropertySymbols,jd=Object.prototype.hasOwnProperty,Md=Object.prototype.propertyIsEnumerable,Nd=(e,t)=>{var n={};for(var r in e)jd.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Ad)for(var r of Ad(e))t.indexOf(r)<0&&Md.call(e,r)&&(n[r]=e[r]);return n},Pd={number:{scientific:{notation:`scientific`},engineering:{notation:`engineering`},compactLong:{notation:`compact`,compactDisplay:`long`},compactShort:{notation:`compact`,compactDisplay:`short`}},date:{short:{month:`numeric`,day:`numeric`,year:`2-digit`},medium:{month:`short`,day:`numeric`,year:`numeric`},long:{month:`long`,day:`numeric`,year:`numeric`},full:{weekday:`long`,month:`long`,day:`numeric`,year:`numeric`}},time:{short:{hour:`numeric`,minute:`numeric`},medium:{hour:`numeric`,minute:`numeric`,second:`numeric`},long:{hour:`numeric`,minute:`numeric`,second:`numeric`,timeZoneName:`short`},full:{hour:`numeric`,minute:`numeric`,second:`numeric`,timeZoneName:`short`}}};function Fd({locale:e,id:t}){console.warn(`[svelte-i18n] The message "${t}" was not found in "${Qd(e).join(`", "`)}".${Td($d())?`

Note: there are at least one loader still registered to this locale that wasn't executed.`:``}`)}var Id={fallbackLocale:null,loadingDelay:200,formats:Pd,warnOnMissingMessages:!0,handleMissingMessage:void 0,ignoreTag:!0};function Ld(){return Id}function Rd(e){let t=e,{formats:n}=t,r=Nd(t,[`formats`]),i=e.fallbackLocale;if(e.initialLocale)try{sd.resolveLocale(e.initialLocale)&&(i=e.initialLocale)}catch{console.warn(`[svelte-i18n] The initial locale "${e.initialLocale}" is not a valid locale.`)}return r.warnOnMissingMessages&&(delete r.warnOnMissingMessages,r.handleMissingMessage==null?r.handleMissingMessage=Fd:console.warn(`[svelte-i18n] The "warnOnMissingMessages" option is deprecated. Please use the "handleMissingMessage" option instead.`)),Object.assign(Id,r,{initialLocale:i}),n&&(`number`in n&&Object.assign(Id.formats.number,n.number),`date`in n&&Object.assign(Id.formats.date,n.date),`time`in n&&Object.assign(Id.formats.time,n.time)),ef.set(i)}var zd=zs(!1),Bd=Object.defineProperty,Vd=Object.defineProperties,Hd=Object.getOwnPropertyDescriptors,Ud=Object.getOwnPropertySymbols,Wd=Object.prototype.hasOwnProperty,Gd=Object.prototype.propertyIsEnumerable,Kd=(e,t,n)=>t in e?Bd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qd=(e,t)=>{for(var n in t||={})Wd.call(t,n)&&Kd(e,n,t[n]);if(Ud)for(var n of Ud(t))Gd.call(t,n)&&Kd(e,n,t[n]);return e},Jd=(e,t)=>Vd(e,Hd(t)),Yd,Xd=zs(null);function Zd(e){return e.split(`-`).map((e,t,n)=>n.slice(0,t+1).join(`-`)).reverse()}function Qd(e,t=Ld().fallbackLocale){let n=Zd(e);return t?[...new Set([...n,...Zd(t)])]:n}function $d(){return Yd??void 0}Xd.subscribe(e=>{Yd=e??void 0,typeof window<`u`&&e!=null&&document.documentElement.setAttribute(`lang`,e)});var ef=Jd(qd({},Xd),{set:e=>{if(e&&vd(e)&&Td(e)){let{loadingDelay:t}=Ld(),n;return typeof window<`u`&&$d()!=null&&t?n=window.setTimeout(()=>zd.set(!0),t):zd.set(!0),Od(e).then(()=>{Xd.set(e)}).finally(()=>{clearTimeout(n),zd.set(!1)})}return Xd.set(e)}}),tf=()=>typeof window>`u`?null:window.navigator.language||window.navigator.languages[0],nf=e=>{let t=Object.create(null);return n=>{let r=JSON.stringify(n);return r in t?t[r]:t[r]=e(n)}},rf=Object.defineProperty,af=Object.getOwnPropertySymbols,sf=Object.prototype.hasOwnProperty,cf=Object.prototype.propertyIsEnumerable,lf=(e,t,n)=>t in e?rf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uf=(e,t)=>{for(var n in t||={})sf.call(t,n)&&lf(e,n,t[n]);if(af)for(var n of af(t))cf.call(t,n)&&lf(e,n,t[n]);return e},df=(e,t)=>{var n={};for(var r in e)sf.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&af)for(var r of af(e))t.indexOf(r)<0&&cf.call(e,r)&&(n[r]=e[r]);return n},ff=(e,t)=>{let{formats:n}=Ld();if(e in n&&t in n[e])return n[e][t];throw Error(`[svelte-i18n] Unknown "${t}" ${e} format.`)},pf=nf(e=>{var t=e,{locale:n,format:r}=t,i=df(t,[`locale`,`format`]);if(n==null)throw Error(`[svelte-i18n] A "locale" must be set to format numbers`);return r&&(i=ff(`number`,r)),new Intl.NumberFormat(n,i)}),mf=nf(e=>{var t=e,{locale:n,format:r}=t,i=df(t,[`locale`,`format`]);if(n==null)throw Error(`[svelte-i18n] A "locale" must be set to format dates`);return r?i=ff(`date`,r):Object.keys(i).length===0&&(i=ff(`date`,`short`)),new Intl.DateTimeFormat(n,i)}),hf=nf(e=>{var t=e,{locale:n,format:r}=t,i=df(t,[`locale`,`format`]);if(n==null)throw Error(`[svelte-i18n] A "locale" must be set to format time values`);return r?i=ff(`time`,r):Object.keys(i).length===0&&(i=ff(`time`,`short`)),new Intl.DateTimeFormat(n,i)}),gf=(e={})=>{var t=e,{locale:n=$d()}=t,r=df(t,[`locale`]);return pf(uf({locale:n},r))},_f=(e={})=>{var t=e,{locale:n=$d()}=t,r=df(t,[`locale`]);return mf(uf({locale:n},r))},vf=(e={})=>{var t=e,{locale:n=$d()}=t,r=df(t,[`locale`]);return hf(uf({locale:n},r))},yf=nf((e,t=$d())=>new sd(e,t,Ld().formats,{ignoreTag:Ld().ignoreTag})),bf=(e,t={})=>{var n;let r=t;typeof e==`object`&&(r=e,e=r.id);let{values:i,locale:a=$d(),default:o}=r;if(a==null)throw Error(`[svelte-i18n] Cannot format a message without first setting the initial locale.`);let s=fd(e,a);if(!s)s=(n=Ld()).handleMissingMessage?.call(n,{locale:a,id:e,defaultValue:o})??o??e;else if(typeof s!=`string`)return console.warn(`[svelte-i18n] Message with id "${e}" must be of type "string", found: "${typeof s}". Gettin its value through the "$format" method is deprecated; use the "json" method instead.`),s;if(!i)return s;let c=s;try{c=yf(s,a).format(i)}catch(t){t instanceof Error&&console.warn(`[svelte-i18n] Message "${e}" has syntax error:`,t.message)}return c},xf=(e,t)=>vf(t).format(e),Sf=(e,t)=>_f(t).format(e),Cf=(e,t)=>gf(t).format(e),wf=(e,t=$d())=>fd(e,t),Tf=Bs([ef,md],()=>bf);Bs([ef],()=>xf),Bs([ef],()=>Sf),Bs([ef],()=>Cf),Bs([ef,md],()=>wf);function Ef(e,t,n,r){e.addEventListener(t,n,r),jo(()=>{e.removeEventListener(t,n,r)})}function Df(e){return Array.isArray?Array.isArray(e):Rf(e)===`[object Array]`}var Of=1/0;function kf(e){if(typeof e==`string`)return e;let t=e+``;return t==`0`&&1/e==-Of?`-0`:t}function Af(e){return e==null?``:kf(e)}function jf(e){return typeof e==`string`}function Mf(e){return typeof e==`number`}function Nf(e){return e===!0||e===!1||Ff(e)&&Rf(e)==`[object Boolean]`}function Pf(e){return typeof e==`object`}function Ff(e){return Pf(e)&&e!==null}function If(e){return e!=null}function Lf(e){return!e.trim().length}function Rf(e){return e==null?e===void 0?`[object Undefined]`:`[object Null]`:Object.prototype.toString.call(e)}var zf=`Incorrect 'index' type`,Bf=e=>`Invalid value for key ${e}`,Vf=e=>`Pattern length exceeds max of ${e}.`,Hf=e=>`Missing ${e} property in key`,Uf=e=>`Property 'weight' in key '${e}' must be a positive integer`,Wf=Object.prototype.hasOwnProperty,Gf=class{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(e=>{let n=Kf(e);this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight}),this._keys.forEach(e=>{e.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function Kf(e){let t=null,n=null,r=null,i=1,a=null;if(jf(e)||Df(e))r=e,t=qf(e),n=Jf(e);else{if(!Wf.call(e,`name`))throw Error(Hf(`name`));let o=e.name;if(r=o,Wf.call(e,`weight`)&&(i=e.weight,i<=0))throw Error(Uf(o));t=qf(o),n=Jf(o),a=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:a}}function qf(e){return Df(e)?e:e.split(`.`)}function Jf(e){return Df(e)?e.join(`.`):e}function Yf(e,t){let n=[],r=!1,i=(e,t,a)=>{if(If(e))if(!t[a])n.push(e);else{let o=t[a],s=e[o];if(!If(s))return;if(a===t.length-1&&(jf(s)||Mf(s)||Nf(s)))n.push(Af(s));else if(Df(s)){r=!0;for(let e=0,n=s.length;e<n;e+=1)i(s[e],t,a+1)}else t.length&&i(s,t,a+1)}};return i(e,jf(t)?t.split(`.`):t,0),r?n:n[0]}var Xf={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Zf={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},Qf={location:0,threshold:.6,distance:100},$f={useExtendedSearch:!1,getFn:Yf,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},$={...Zf,...Xf,...Qf,...$f},ep=/[^ ]+/g;function tp(e=1,t=3){let n=new Map,r=10**t;return{get(t){let i=t.match(ep).length;if(n.has(i))return n.get(i);let a=1/i**(.5*e),o=parseFloat(Math.round(a*r)/r);return n.set(i,o),o},clear(){n.clear()}}}var np=class{constructor({getFn:e=$.getFn,fieldNormWeight:t=$.fieldNormWeight}={}){this.norm=tp(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((e,t)=>{this._keysMap[e.id]=t})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,jf(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){let t=this.size();jf(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)--this.records[t].i}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!If(e)||Lf(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach((t,r)=>{let i=t.getFn?t.getFn(e):this.getFn(e,t.path);if(If(i)){if(Df(i)){let e=[],t=[{nestedArrIndex:-1,value:i}];for(;t.length;){let{nestedArrIndex:n,value:r}=t.pop();if(If(r))if(jf(r)&&!Lf(r)){let t={v:r,i:n,n:this.norm.get(r)};e.push(t)}else Df(r)&&r.forEach((e,n)=>{t.push({nestedArrIndex:n,value:e})})}n.$[r]=e}else if(jf(i)&&!Lf(i)){let e={v:i,n:this.norm.get(i)};n.$[r]=e}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}};function rp(e,t,{getFn:n=$.getFn,fieldNormWeight:r=$.fieldNormWeight}={}){let i=new np({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(Kf)),i.setSources(t),i.create(),i}function ip(e,{getFn:t=$.getFn,fieldNormWeight:n=$.fieldNormWeight}={}){let{keys:r,records:i}=e,a=new np({getFn:t,fieldNormWeight:n});return a.setKeys(r),a.setIndexRecords(i),a}function ap(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=$.distance,ignoreLocation:a=$.ignoreLocation}={}){let o=t/e.length;if(a)return o;let s=Math.abs(r-n);return i?o+s/i:s?1:o}function op(e=[],t=$.minMatchCharLength){let n=[],r=-1,i=-1,a=0;for(let o=e.length;a<o;a+=1){let o=e[a];o&&r===-1?r=a:!o&&r!==-1&&(i=a-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[a-1]&&a-r>=t&&n.push([r,a-1]),n}var sp=32;function cp(e,t,n,{location:r=$.location,distance:i=$.distance,threshold:a=$.threshold,findAllMatches:o=$.findAllMatches,minMatchCharLength:s=$.minMatchCharLength,includeMatches:c=$.includeMatches,ignoreLocation:l=$.ignoreLocation}={}){if(t.length>sp)throw Error(Vf(sp));let u=t.length,d=e.length,f=Math.max(0,Math.min(r,d)),p=a,m=f,h=s>1||c,g=h?Array(d):[],_;for(;(_=e.indexOf(t,m))>-1;){let e=ap(t,{currentLocation:_,expectedLocation:f,distance:i,ignoreLocation:l});if(p=Math.min(e,p),m=_+u,h){let e=0;for(;e<u;)g[_+e]=1,e+=1}}m=-1;let v=[],y=1,b=u+d,x=1<<u-1;for(let r=0;r<u;r+=1){let a=0,s=b;for(;a<s;)ap(t,{errors:r,currentLocation:f+s,expectedLocation:f,distance:i,ignoreLocation:l})<=p?a=s:b=s,s=Math.floor((b-a)/2+a);b=s;let c=Math.max(1,f-s+1),_=o?d:Math.min(f+s,d)+u,S=Array(_+2);S[_+1]=(1<<r)-1;for(let a=_;a>=c;--a){let o=a-1,s=n[e.charAt(o)];if(h&&(g[o]=+!!s),S[a]=(S[a+1]<<1|1)&s,r&&(S[a]|=(v[a+1]|v[a])<<1|1|v[a+1]),S[a]&x&&(y=ap(t,{errors:r,currentLocation:o,expectedLocation:f,distance:i,ignoreLocation:l}),y<=p)){if(p=y,m=o,m<=f)break;c=Math.max(1,2*f-m)}}if(ap(t,{errors:r+1,currentLocation:f,expectedLocation:f,distance:i,ignoreLocation:l})>p)break;v=S}let S={isMatch:m>=0,score:Math.max(.001,y)};if(h){let e=op(g,s);e.length?c&&(S.indices=e):S.isMatch=!1}return S}function lp(e){let t={};for(let n=0,r=e.length;n<r;n+=1){let i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}var up=String.prototype.normalize?(e=>e.normalize(`NFD`).replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,``)):(e=>e),dp=class{constructor(e,{location:t=$.location,threshold:n=$.threshold,distance:r=$.distance,includeMatches:i=$.includeMatches,findAllMatches:a=$.findAllMatches,minMatchCharLength:o=$.minMatchCharLength,isCaseSensitive:s=$.isCaseSensitive,ignoreDiacritics:c=$.ignoreDiacritics,ignoreLocation:l=$.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:r,includeMatches:i,findAllMatches:a,minMatchCharLength:o,isCaseSensitive:s,ignoreDiacritics:c,ignoreLocation:l},e=s?e:e.toLowerCase(),e=c?up(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;let u=(e,t)=>{this.chunks.push({pattern:e,alphabet:lp(e),startIndex:t})},d=this.pattern.length;if(d>sp){let e=0,t=d%sp,n=d-t;for(;e<n;)u(this.pattern.substr(e,sp),e),e+=sp;if(t){let e=d-sp;u(this.pattern.substr(e),e)}}else u(this.pattern,0)}searchIn(e){let{isCaseSensitive:t,ignoreDiacritics:n,includeMatches:r}=this.options;if(e=t?e:e.toLowerCase(),e=n?up(e):e,this.pattern===e){let t={isMatch:!0,score:0};return r&&(t.indices=[[0,e.length-1]]),t}let{location:i,distance:a,threshold:o,findAllMatches:s,minMatchCharLength:c,ignoreLocation:l}=this.options,u=[],d=0,f=!1;this.chunks.forEach(({pattern:t,alphabet:n,startIndex:p})=>{let{isMatch:m,score:h,indices:g}=cp(e,t,n,{location:i+p,distance:a,threshold:o,findAllMatches:s,minMatchCharLength:c,includeMatches:r,ignoreLocation:l});m&&(f=!0),d+=h,m&&g&&(u=[...u,...g])});let p={isMatch:f,score:f?d/this.chunks.length:1};return f&&r&&(p.indices=u),p}},fp=class{constructor(e){this.pattern=e}static isMultiMatch(e){return pp(e,this.multiRegex)}static isSingleMatch(e){return pp(e,this.singleRegex)}search(){}};function pp(e,t){let n=e.match(t);return n?n[1]:null}var mp=class extends fp{constructor(e){super(e)}static get type(){return`exact`}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){let t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},hp=class extends fp{constructor(e){super(e)}static get type(){return`inverse-exact`}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){let t=e.indexOf(this.pattern)===-1;return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},gp=class extends fp{constructor(e){super(e)}static get type(){return`prefix-exact`}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){let t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},_p=class extends fp{constructor(e){super(e)}static get type(){return`inverse-prefix-exact`}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){let t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},vp=class extends fp{constructor(e){super(e)}static get type(){return`suffix-exact`}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){let t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},yp=class extends fp{constructor(e){super(e)}static get type(){return`inverse-suffix-exact`}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){let t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},bp=class extends fp{constructor(e,{location:t=$.location,threshold:n=$.threshold,distance:r=$.distance,includeMatches:i=$.includeMatches,findAllMatches:a=$.findAllMatches,minMatchCharLength:o=$.minMatchCharLength,isCaseSensitive:s=$.isCaseSensitive,ignoreDiacritics:c=$.ignoreDiacritics,ignoreLocation:l=$.ignoreLocation}={}){super(e),this._bitapSearch=new dp(e,{location:t,threshold:n,distance:r,includeMatches:i,findAllMatches:a,minMatchCharLength:o,isCaseSensitive:s,ignoreDiacritics:c,ignoreLocation:l})}static get type(){return`fuzzy`}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}},xp=class extends fp{constructor(e){super(e)}static get type(){return`include`}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,n,r=[],i=this.pattern.length;for(;(n=e.indexOf(this.pattern,t))>-1;)t=n+i,r.push([n,t-1]);let a=!!r.length;return{isMatch:a,score:a?0:1,indices:r}}},Sp=[mp,xp,gp,_p,yp,vp,hp,bp],Cp=Sp.length,wp=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Tp=`|`;function Ep(e,t={}){return e.split(Tp).map(e=>{let n=e.trim().split(wp).filter(e=>e&&!!e.trim()),r=[];for(let e=0,i=n.length;e<i;e+=1){let i=n[e],a=!1,o=-1;for(;!a&&++o<Cp;){let e=Sp[o],n=e.isMultiMatch(i);n&&(r.push(new e(n,t)),a=!0)}if(!a)for(o=-1;++o<Cp;){let e=Sp[o],n=e.isSingleMatch(i);if(n){r.push(new e(n,t));break}}}return r})}var Dp=new Set([bp.type,xp.type]),Op=class{constructor(e,{isCaseSensitive:t=$.isCaseSensitive,ignoreDiacritics:n=$.ignoreDiacritics,includeMatches:r=$.includeMatches,minMatchCharLength:i=$.minMatchCharLength,ignoreLocation:a=$.ignoreLocation,findAllMatches:o=$.findAllMatches,location:s=$.location,threshold:c=$.threshold,distance:l=$.distance}={}){this.query=null,this.options={isCaseSensitive:t,ignoreDiacritics:n,includeMatches:r,minMatchCharLength:i,findAllMatches:o,ignoreLocation:a,location:s,threshold:c,distance:l},e=t?e:e.toLowerCase(),e=n?up(e):e,this.pattern=e,this.query=Ep(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){let t=this.query;if(!t)return{isMatch:!1,score:1};let{includeMatches:n,isCaseSensitive:r,ignoreDiacritics:i}=this.options;e=r?e:e.toLowerCase(),e=i?up(e):e;let a=0,o=[],s=0;for(let r=0,i=t.length;r<i;r+=1){let i=t[r];o.length=0,a=0;for(let t=0,r=i.length;t<r;t+=1){let r=i[t],{isMatch:c,indices:l,score:u}=r.search(e);if(c){if(a+=1,s+=u,n){let e=r.constructor.type;Dp.has(e)?o=[...o,...l]:o.push(l)}}else{s=0,a=0,o.length=0;break}}if(a){let e={isMatch:!0,score:s/a};return n&&(e.indices=o),e}}return{isMatch:!1,score:1}}},kp=[];function Ap(...e){kp.push(...e)}function jp(e,t){for(let n=0,r=kp.length;n<r;n+=1){let r=kp[n];if(r.condition(e,t))return new r(e,t)}return new dp(e,t)}var Mp={AND:`$and`,OR:`$or`},Np={PATH:`$path`,PATTERN:`$val`},Pp=e=>!!(e[Mp.AND]||e[Mp.OR]),Fp=e=>!!e[Np.PATH],Ip=e=>!Df(e)&&Pf(e)&&!Pp(e),Lp=e=>({[Mp.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Rp(e,t,{auto:n=!0}={}){let r=e=>{let i=Object.keys(e),a=Fp(e);if(!a&&i.length>1&&!Pp(e))return r(Lp(e));if(Ip(e)){let r=a?e[Np.PATH]:i[0],o=a?e[Np.PATTERN]:e[r];if(!jf(o))throw Error(Bf(r));let s={keyId:Jf(r),pattern:o};return n&&(s.searcher=jp(o,t)),s}let o={children:[],operator:i[0]};return i.forEach(t=>{let n=e[t];Df(n)&&n.forEach(e=>{o.children.push(r(e))})}),o};return Pp(e)||(e=Lp(e)),r(e)}function zp(e,{ignoreFieldNorm:t=$.ignoreFieldNorm}){e.forEach(e=>{let n=1;e.matches.forEach(({key:e,norm:r,score:i})=>{let a=e?e.weight:null;n*=(i===0&&a?2**-52:i)**+((a||1)*(t?1:r))}),e.score=n})}function Bp(e,t){let n=e.matches;t.matches=[],If(n)&&n.forEach(e=>{if(!If(e.indices)||!e.indices.length)return;let{indices:n,value:r}=e,i={indices:n,value:r};e.key&&(i.key=e.key.src),e.idx>-1&&(i.refIndex=e.idx),t.matches.push(i)})}function Vp(e,t){t.score=e.score}function Hp(e,t,{includeMatches:n=$.includeMatches,includeScore:r=$.includeScore}={}){let i=[];return n&&i.push(Bp),r&&i.push(Vp),e.map(e=>{let{idx:n}=e,r={item:t[n],refIndex:n};return i.length&&i.forEach(t=>{t(e,r)}),r})}var Up=class{constructor(e,t={},n){this.options={...$,...t},this.options.useExtendedSearch,this._keyStore=new Gf(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof np))throw Error(zf);this._myIndex=t||rp(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){If(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){let t=[];for(let n=0,r=this._docs.length;n<r;n+=1){let i=this._docs[n];e(i,n)&&(this.removeAt(n),--n,--r,t.push(i))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){let{includeMatches:n,includeScore:r,shouldSort:i,sortFn:a,ignoreFieldNorm:o}=this.options,s=jf(e)?jf(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return zp(s,{ignoreFieldNorm:o}),i&&s.sort(a),Mf(t)&&t>-1&&(s=s.slice(0,t)),Hp(s,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(e){let t=jp(e,this.options),{records:n}=this._myIndex,r=[];return n.forEach(({v:e,i:n,n:i})=>{if(!If(e))return;let{isMatch:a,score:o,indices:s}=t.searchIn(e);a&&r.push({item:e,idx:n,matches:[{score:o,value:e,norm:i,indices:s}]})}),r}_searchLogical(e){let t=Rp(e,this.options),n=(e,t,r)=>{if(!e.children){let{keyId:n,searcher:i}=e,a=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:i});return a&&a.length?[{idx:r,item:t,matches:a}]:[]}let i=[];for(let a=0,o=e.children.length;a<o;a+=1){let o=e.children[a],s=n(o,t,r);if(s.length)i.push(...s);else if(e.operator===Mp.AND)return[]}return i},r=this._myIndex.records,i={},a=[];return r.forEach(({$:e,i:r})=>{if(If(e)){let o=n(t,e,r);o.length&&(i[r]||(i[r]={idx:r,item:e,matches:[]},a.push(i[r])),o.forEach(({matches:e})=>{i[r].matches.push(...e)}))}}),a}_searchObjectList(e){let t=jp(e,this.options),{keys:n,records:r}=this._myIndex,i=[];return r.forEach(({$:e,i:r})=>{if(!If(e))return;let a=[];n.forEach((n,r)=>{a.push(...this._findMatches({key:n,value:e[r],searcher:t}))}),a.length&&i.push({idx:r,item:e,matches:a})}),i}_findMatches({key:e,value:t,searcher:n}){if(!If(t))return[];let r=[];if(Df(t))t.forEach(({v:t,i,n:a})=>{if(!If(t))return;let{isMatch:o,score:s,indices:c}=n.searchIn(t);o&&r.push({score:s,key:e,value:t,idx:i,norm:a,indices:c})});else{let{v:i,n:a}=t,{isMatch:o,score:s,indices:c}=n.searchIn(i);o&&r.push({score:s,key:e,value:i,norm:a,indices:c})}return r}};Up.version=`7.1.0`,Up.createIndex=rp,Up.parseIndex=ip,Up.config=$,Up.parseQuery=Rp,Ap(Op);let Wp=new class{constructor(){this.fuse=null,this.searchableData=[]}async initializeIndex(e=!1){if(this.fuse&&!e)return;console.info(`[Search] Initializing search index...`);let[t,n]=await Promise.all([Se.getAllThreads(),Se.getAllMessages()]);this.searchableData=[];for(let e of n){let n=t.find(t=>t.id===e.threadId);if(n)for(let t of e.messages){let e=``;t.content&&typeof t.content==`string`&&(e=t.content),e.trim()&&this.searchableData.push({threadId:n.id,threadName:n.name,messageId:t.id,messageContent:e,messageRole:t.role,createdAt:t.createdAt})}}this.fuse=new Up(this.searchableData,{keys:[{name:`messageContent`,weight:.7},{name:`threadName`,weight:.3}],threshold:.3,includeScore:!0,includeMatches:!0,minMatchCharLength:2,ignoreLocation:!0}),console.info(`[Search] Index initialized with ${this.searchableData.length} messages`)}search(e){return!this.fuse||!e.trim()?[]:this.fuse.search(e).map(e=>{let t=e.item,n=t.messageContent;if(e.matches&&e.matches.length>0){let t=e.matches[0];if(t.indices&&t.indices.length>0){let[e,r]=t.indices[0],i=n.slice(e,r+1),a=Math.max(0,e-50),o=Math.min(n.length,r+50+1),s=a>0?`...`:``,c=o<n.length?`...`:``;n=s+n.slice(a,e)+`<mark>${i}</mark>`+n.slice(r+1,o)+c}}else n.length>200&&(n=n.slice(0,200)+`...`);return{threadId:t.threadId,threadName:t.threadName,messageId:t.messageId,messageContent:t.messageContent,messageRole:t.messageRole,createdAt:t.createdAt,highlightedContent:n}})}async reindex(){await this.initializeIndex(!0)}dispose(){this.fuse=null,this.searchableData=[]}};var Gp=po(`<svg><path fill="currentColor" d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5l-1.5 1.5l-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16A6.5 6.5 0 0 1 3 9.5A6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14S14 12 14 9.5S12 5 9.5 5"></path></svg>`);function Kp(e,t){let n=Js(t,[`$$slots`,`$$events`,`$$legacy`]);var r=Gp();hs(r,()=>({viewBox:`0 0 24 24`,width:`1.2em`,height:`1.2em`,...n})),W(e,r)}var qp=po(`<svg><path fill="currentColor" d="M12 8a4 4 0 0 1 4 4a4 4 0 0 1-4 4a4 4 0 0 1-4-4a4 4 0 0 1 4-4m0 2a2 2 0 0 0-2 2a2 2 0 0 0 2 2a2 2 0 0 0 2-2a2 2 0 0 0-2-2m-2 12c-.25 0-.46-.18-.5-.42l-.37-2.65c-.63-.25-1.17-.59-1.69-.99l-2.49 1.01c-.22.08-.49 0-.61-.22l-2-3.46a.493.493 0 0 1 .12-.64l2.11-1.66L4.5 12l.07-1l-2.11-1.63a.493.493 0 0 1-.12-.64l2-3.46c.12-.22.39-.31.61-.22l2.49 1c.52-.39 1.06-.73 1.69-.98l.37-2.65c.04-.24.25-.42.5-.42h4c.25 0 .46.18.5.42l.37 2.65c.63.25 1.17.59 1.69.98l2.49-1c.22-.09.49 0 .61.22l2 3.46c.13.22.07.49-.12.64L19.43 11l.07 1l-.07 1l2.11 1.63c.19.15.25.42.12.64l-2 3.46c-.12.22-.39.31-.61.22l-2.49-1c-.52.39-1.06.73-1.69.98l-.37 2.65c-.04.24-.25.42-.5.42zm1.25-18l-.37 2.61c-1.2.25-2.26.89-3.03 1.78L5.44 7.35l-.75 1.3L6.8 10.2a5.55 5.55 0 0 0 0 3.6l-2.12 1.56l.75 1.3l2.43-1.04c.77.88 1.82 1.52 3.01 1.76l.37 2.62h1.52l.37-2.61c1.19-.25 2.24-.89 3.01-1.77l2.43 1.04l.75-1.3l-2.12-1.55c.4-1.17.4-2.44 0-3.61l2.11-1.55l-.75-1.3l-2.41 1.04a5.42 5.42 0 0 0-3.03-1.77L12.75 4z"></path></svg>`);function Jp(e,t){let n=Js(t,[`$$slots`,`$$events`,`$$legacy`]);var r=qp();hs(r,()=>({viewBox:`0 0 24 24`,width:`1.2em`,height:`1.2em`,...n})),W(e,r)}function Yp(e,t,n,r){if(!V(t).trim()){P(n,[],!0),P(r,0);return}P(n,Wp.search(V(t)),!0),P(r,0)}function Xp(e,t,n,r,i,a){if(e.key===`Escape`){e.preventDefault(),V(t)&&(P(t,``),P(n,[],!0),P(r,0),e.stopPropagation());return}if(e.key===`ArrowDown`){e.preventDefault(),V(n).length>0&&(P(r,(V(r)+1)%V(n).length),i());return}if(e.key===`ArrowUp`){e.preventDefault(),V(n).length>0&&(P(r,(V(r)-1+V(n).length)%V(n).length),i());return}if(e.key===`Enter`){e.preventDefault(),V(n).length>0&&V(r)>=0&&a(V(n)[V(r)]);return}}var Zp=H(`<div class="search-empty svelte-1xn1b0j" role="status"><p> </p></div>`),Qp=(e,t,n)=>t(V(n)),$p=(e,t,n)=>e.key===`Enter`&&t(V(n)),em=H(`<li class="search-result-item svelte-1xn1b0j" role="option" tabindex="-1"><div class="result-header svelte-1xn1b0j"><span class="result-thread-name svelte-1xn1b0j"> </span> <span class="result-date svelte-1xn1b0j"> </span></div> <div class="result-content svelte-1xn1b0j"><!></div></li>`),tm=H(`<ul id="search-results" class="search-results svelte-1xn1b0j" role="listbox"></ul>`),nm=H(`<div class="search-content"><div class="search-input-wrapper svelte-1xn1b0j"><!> <label for="search-input" id="search-label" class="sr-only svelte-1xn1b0j"> </label> <input id="search-input" type="text" class="search-input svelte-1xn1b0j" role="combobox" aria-autocomplete="list" aria-controls="search-results"/> <button class="go-settings-button svelte-1xn1b0j"><!></button></div> <!> <!> <div class="search-footer svelte-1xn1b0j"><div class="search-tips svelte-1xn1b0j"><kbd class="svelte-1xn1b0j">↑</kbd> <kbd class="svelte-1xn1b0j">↓</kbd> <span> </span> <kbd class="svelte-1xn1b0j">↵</kbd> <span> </span> <kbd class="svelte-1xn1b0j">ESC</kbd> <span> </span></div> <div class="search-results-count svelte-1xn1b0j"> </div></div></div>`),rm={hash:`svelte-1xn1b0j`,code:`.search-input-wrapper.svelte-1xn1b0j {position:relative;display:flex;align-items:center;gap:12px;padding:0 16px;border-bottom:1px solid var(--input-border);color:var(--icon-color);}.search-input.svelte-1xn1b0j {flex:1;padding:0;background:none;border:none;outline:none;color:var(--text-primary);font-size:16px;font-family:inherit;padding:12px 0;}.search-input.svelte-1xn1b0j::placeholder {color:var(--text-placeholder);}.search-input.svelte-1xn1b0j:disabled {opacity:0.5;cursor:not-allowed;}.go-settings-button.svelte-1xn1b0j {background:none;border:none;color:var(--icon-color);cursor:pointer;padding:4px;border-radius:4px;display:flex;align-items:center;justify-content:center;}.search-empty.svelte-1xn1b0j {padding:32px 16px;text-align:center;color:var(--text-secondary);opacity:0.6;}.search-results.svelte-1xn1b0j {list-style:none;margin:0;padding:8px 0;overflow-y:auto;max-height:calc(70vh - 120px);}.search-result-item.svelte-1xn1b0j {display:flex;flex-direction:column;gap:4px;padding:12px 16px;cursor:pointer;}.search-result-item.svelte-1xn1b0j:hover {background-color:var(--hover-bg);}.search-result-item[data-selected='true'].svelte-1xn1b0j {background-color:var(--selected-bg);}.result-header.svelte-1xn1b0j {display:flex;align-items:center;justify-content:space-between;}.result-thread-name.svelte-1xn1b0j {max-width:90%;font-weight:600;color:var(--text-primary);font-size:13px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}.result-date.svelte-1xn1b0j {font-size:11px;color:var(--text-secondary);opacity:0.5;}.result-content.svelte-1xn1b0j {color:var(--text-primary);font-size:12px;opacity:0.6;word-break:break-all;height:1rem; /* 固定高度 */text-overflow:ellipsis;overflow:hidden;}.result-content.svelte-1xn1b0j mark {opacity:1;background-color:var(--highlight-bg);color:var(--highlight-text);border-radius:2px;}.search-footer.svelte-1xn1b0j {display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-top:1px solid var(--input-border);background-color:var(--dialog-bg);}.search-tips.svelte-1xn1b0j {display:flex;align-items:center;gap:8px;font-size:11px;color:var(--text-secondary);opacity:0.6;}.search-tips.svelte-1xn1b0j kbd:where(.svelte-1xn1b0j) {padding:2px 6px;background-color:var(--keybinding-bg);border:1px solid var(--keybinding-border);border-radius:3px;color:var(--keybinding-text);font-size:10px;font-family:monospace;}.search-results-count.svelte-1xn1b0j {font-size:11px;color:var(--text-secondary);opacity:0.6;}.sr-only.svelte-1xn1b0j {position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;}`};function im(e,t){Ir(t,!0),Wo(e,rm);let n=()=>Ws(Tf,`$_`,r),[r,i]=Gs(),a=N(``),o=N(Mi([])),s=N(0),c=N(!1),l=N(void 0),u=N(void 0);Ao(async()=>{P(c,!0);try{await Wp.initializeIndex()}catch(e){console.error(`[Search UI] Failed to initialize search index:`,e)}finally{P(c,!1)}}),jo(()=>{Wp.dispose()});function d(){setTimeout(()=>{V(l)?.focus()},100)}function f(){setTimeout(()=>{let e=V(u)?.querySelector(`[data-selected="true"]`);e&&e.scrollIntoView({block:`nearest`})},0)}function p(e){window.location.href=`/copilot/c/${e.threadId}`}function m(e){let t=new Date(e),n=new Date().getTime()-t.getTime(),r=Math.floor(n/(1e3*60*60*24));if(r===0)return Vs(Tf)(`date.today`);if(r===1)return Vs(Tf)(`date.yesterday`);if(r<7)return Vs(Tf)(`date.daysAgo`,{values:{count:r}});if(r<30){let e=Math.floor(r/7);return Vs(Tf)(`date.weeksAgo`,{values:{count:e}})}else return t.toLocaleDateString(Vs(Tf)(`date.locale`),{year:`numeric`,month:`2-digit`,day:`2-digit`})}var h={focusInput:d},g=nm(),_=F(g),v=F(_);Kp(v,{});var y=L(v,2),b=F(y,!0);k(y);var x=L(y,2);fs(x),x.__input=[Yp,a,o,s],x.__keydown=[Xp,a,o,s,f,p],Ns(x,e=>P(l,e),()=>V(l));var S=L(x,2);S.__click=function(...e){t.goSettings?.apply(this,e)};var C=F(S);Jp(C,{}),k(S),k(_);var ee=L(_,2),te=e=>{var t=Zp(),r=F(t),i=F(r,!0);k(r),k(t),R(e=>G(i,e),[()=>n()(`search.noResults`)]),W(e,t)};K(ee,e=>{V(a)&&V(o).length===0&&e(te)});var ne=L(ee,2),w=e=>{var t=tm();Io(t,21,()=>V(o),Po,(e,t,n)=>{var r=em();q(r,`id`,`result-${n}`),r.__click=[Qp,p,t],r.__keydown=[$p,p,t];var i=F(r),a=F(i),o=F(a,!0);k(a);var c=L(a,2),l=F(c,!0);k(c),k(i);var u=L(i,2),d=F(u);Ho(d,()=>V(t).highlightedContent||V(t).messageContent),k(u),k(r),R((e,i)=>{q(r,`aria-selected`,n===V(s)),q(r,`data-selected`,n===V(s)),q(a,`title`,V(t).threadName),G(o,V(t).threadName),q(c,`title`,e),G(l,i)},[()=>new Date(V(t).createdAt).toLocaleString(),()=>m(V(t).createdAt)]),W(e,r)}),k(t),Ns(t,e=>P(u,e),()=>V(u)),R(e=>q(t,`aria-label`,e),[()=>n()(`search.resultsLabel`)]),W(e,t)};K(ne,e=>{V(o).length>0&&e(w)});var re=L(ne,2),ie=F(re),ae=F(ie),oe=L(ae,2),se=L(oe,2),ce=F(se,!0);k(se);var le=L(se,2),ue=L(le,2),de=F(ue,!0);k(ue);var fe=L(ue,2),pe=L(fe,2),me=F(pe,!0);k(pe),k(ie);var he=L(ie,2),ge=F(he,!0);k(he),k(re),k(g),R((e,t,n,r,i,a,l,u,d,f,p)=>{G(b,e),q(x,`placeholder`,t),x.disabled=V(c),q(x,`aria-expanded`,V(o).length>0),q(x,`aria-activedescendant`,V(o).length>0?`result-${V(s)}`:void 0),q(S,`title`,n),q(ae,`aria-label`,r),q(oe,`aria-label`,i),G(ce,a),q(le,`aria-label`,l),G(de,u),q(fe,`aria-label`,d),G(me,f),G(ge,p)},[()=>n()(`search.label`),()=>V(c)?n()(`search.indexing`):n()(`search.placeholder`),()=>n()(`search.settingsTitle`),()=>n()(`search.shortcut.arrowUp`),()=>n()(`search.shortcut.arrowDown`),()=>n()(`search.tips.navigate`),()=>n()(`search.shortcut.enter`),()=>n()(`search.tips.select`),()=>n()(`search.shortcut.escapeKey`),()=>n()(`search.tips.close`),()=>n()(`search.resultsCount`,{values:{count:V(o).length}})]),ks(x,()=>V(a),e=>P(a,e)),W(e,g);var _e=Lr(h);return i(),_e}oo([`input`,`keydown`,`click`]);var am=`copilot-chat-history.json`,om=class{constructor(e){this.config=e}getAuthHeader(){return`Basic ${btoa(`${this.config.username}:${this.config.password}`)}`}getFileUrl(){return`${this.config.url.endsWith(`/`)?this.config.url:`${this.config.url}/`}${am}`}async fileExists(){try{return(await Ee(this.getFileUrl(),{method:`HEAD`,headers:{Authorization:this.getAuthHeader()}})).ok}catch(e){return console.error(`[WebDAV] Failed to check file existence:`,e),!1}}async upload(e){try{let t=await Ee(this.getFileUrl(),{method:`PUT`,headers:{Authorization:this.getAuthHeader(),"Content-Type":`application/json`},body:e});if(!t.ok)throw Error(`Upload failed with status: ${t.status}`);console.info(`[WebDAV] Data uploaded successfully`)}catch(e){throw console.error(`[WebDAV] Upload failed:`,e),e}}async download(){try{let e=await Ee(this.getFileUrl(),{method:`GET`,headers:{Authorization:this.getAuthHeader()}});if(!e.ok)throw Error(`Download failed with status: ${e.status}`);return console.info(`[WebDAV] Data downloaded successfully`),e.text()}catch(e){throw console.error(`[WebDAV] Download failed:`,e),e}}async delete(){try{let e=await Ee(this.getFileUrl(),{method:`DELETE`,headers:{Authorization:this.getAuthHeader()}});if(!e.ok)throw Error(`Delete failed with status: ${e.status}`);console.info(`[WebDAV] File deleted successfully`)}catch(e){throw console.error(`[WebDAV] Delete failed:`,e),e}}};async function sm(e){await GM.setValue(`webdav_url`,e.url),await GM.setValue(`webdav_username`,e.username),await GM.setValue(`webdav_password`,e.password)}async function cm(){let e=await GM.getValue(`webdav_url`,``),t=await GM.getValue(`webdav_username`,``),n=await GM.getValue(`webdav_password`,``);return!e||!t||!n?null:{url:e,username:t,password:n}}async function lm(){await GM.deleteValue(`webdav_url`),await GM.deleteValue(`webdav_username`),await GM.deleteValue(`webdav_password`)}let um=new class{constructor(){this.webdav=null}async initialize(e){return e||=await cm(),e?(this.webdav=new om(e),!0):(console.warn(`[WebDAV Sync] No configuration found`),!1)}async exportData(){let e=await Se.getAllThreads(),t=await Se.getAllMessages();return{version:`1.0.0`,exportedAt:new Date().toISOString(),threads:e,messages:t}}async importData(e){console.info(`[WebDAV Sync] Starting data import...`);for(let t of e.threads){let n=e.messages.find(e=>e.threadId===t.id);if(!n){console.warn(`[WebDAV Sync] Remote thread ${t.id} has no corresponding messages, skipping.`);continue}await Se.saveThreadWithMessages(t.data,n.messages)}console.info(`[WebDAV Sync] Data import completed`)}async upload(){if(!this.webdav&&!await this.initialize())return{success:!1,message:`WebDAV not configured`};try{if(await this.webdav.fileExists()&&(console.info(`[WebDAV Sync] Remote file exists, downloading and merging first...`),!(await this.download()).success))return{success:!1,message:`Failed to download remote data before upload`};let e=await this.exportData(),t=JSON.stringify(e);return await this.webdav.upload(t),{success:!0,message:`Data uploaded successfully`}}catch(e){return console.error(`[WebDAV Sync] Upload error:`,e),{success:!1,message:e instanceof Error?e.message:`Unknown error`}}}async download(){if(!this.webdav&&!await this.initialize())return{success:!1,message:`WebDAV not configured`};try{if(!await this.webdav.fileExists())return{success:!1,message:`Remote file does not exist`};let e=await this.webdav.download(),t=JSON.parse(e);return await this.importData(t),{success:!0,message:`Data downloaded and merged successfully`}}catch(e){return console.error(`[WebDAV Sync] Download error:`,e),{success:!1,message:e instanceof Error?e.message:`Unknown error`}}}async testConnection(){if(!this.webdav&&!await this.initialize())return{success:!1,message:`WebDAV not configured`};try{return await this.webdav.fileExists(),{success:!0,message:`Connection successful`}}catch(e){return console.error(`[WebDAV Sync] Connection test failed:`,e),{success:!1,message:e instanceof Error?e.message:`Unknown error`}}}};async function dm(e,t,n,r,i,a){try{await lm(),P(t,``),P(n,``),P(r,``),P(i,!1),Ec.success(d,{description:a()(`settings.webdav.configCleared`)})}catch(e){console.error(`Failed to clear config:`,e),Ec.error(d,{description:a()(`settings.webdav.uploadFailed`)})}}async function fm(e,t,n){P(t,!0);try{let e=await um.upload();e.success?Ec.success(d,{description:n()(`settings.webdav.uploadSuccess`)}):Ec.error(d,{description:`${n()(`settings.webdav.uploadFailed`)}: ${e.message}`})}catch(e){console.error(`Upload failed:`,e),Ec.error(d,{description:n()(`settings.webdav.uploadFailed`)})}finally{P(t,!1)}}async function pm(e,t,n){P(t,!0);try{let e=await um.download();e.success?Ec.success(d,{description:n()(`settings.webdav.downloadSuccess`)}):Ec.error(d,{description:`${n()(`settings.webdav.downloadFailed`)}: ${e.message}`})}catch(e){console.error(`Download failed:`,e),Ec.error(d,{description:n()(`settings.webdav.downloadFailed`)})}finally{P(t,!1)}}var mm=H(`<button type="submit" class="btn btn-primary svelte-1pgg3b7"> </button>`),hm=H(`<button type="submit" class="btn btn-primary svelte-1pgg3b7"> </button>`),gm=H(`<div class="sync-actions svelte-1pgg3b7"><button class="btn btn-primary svelte-1pgg3b7"> </button> <button class="btn btn-primary svelte-1pgg3b7"> </button></div>`),_m=H(`<div class="settings-section svelte-1pgg3b7"><h3 class="section-title svelte-1pgg3b7"> </h3> <p class="section-description svelte-1pgg3b7"> </p> <form><div class="form-group svelte-1pgg3b7"><label for="webdav-url" class="svelte-1pgg3b7"> </label> <input id="webdav-url" type="text" class="input svelte-1pgg3b7"/></div> <div class="form-group svelte-1pgg3b7"><label for="webdav-username" class="svelte-1pgg3b7"> </label> <input id="webdav-username" type="text" class="input svelte-1pgg3b7"/></div> <div class="form-group svelte-1pgg3b7"><label for="webdav-password" class="svelte-1pgg3b7"> </label> <input id="webdav-password" type="password" class="input svelte-1pgg3b7"/></div> <div class="button-group svelte-1pgg3b7"><!> <!> <button type="button" class="btn btn-secondary svelte-1pgg3b7"> </button></div></form> <!></div>`),vm={hash:`svelte-1pgg3b7`,code:`.settings-section.svelte-1pgg3b7 {
    /* Light theme colors */--text-primary: #1e1e1e;--text-secondary: #616161;--bg-secondary: #f9f9f9;--border-color: #e5e5e5;--input-bg: #ffffff;--input-border: #d4d4d4;--input-focus: #0078d4;--btn-secondary-bg: #f3f3f3;--btn-secondary-hover: #e8e8e8;--success-bg: #dff6dd;--success-text: #107c10;--error-bg: #fde7e9;--error-text: #e81123;}

  @media (prefers-color-scheme: dark) {.settings-section.svelte-1pgg3b7 {
      /* Dark theme colors */--text-primary: #cccccc;--text-secondary: #999999;--bg-secondary: #1e1e1e;--border-color: #454545;--input-bg: #3c3c3c;--input-border: #555555;--input-focus: #0078d4;--btn-secondary-bg: #3c3c3c;--btn-secondary-hover: #505050;--success-bg: #1a3d1a;--success-text: #6ccb5f;--error-bg: #3d1a1f;--error-text: #ff6b6b;}
  }.settings-section.svelte-1pgg3b7 {margin-bottom:32px;padding:20px;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;}.section-title.svelte-1pgg3b7 {margin:0 0 8px 0;font-size:16px;font-weight:600;color:var(--text-primary);}.section-description.svelte-1pgg3b7 {margin:0 0 20px 0;color:var(--text-secondary);font-size:12px;}.form-group.svelte-1pgg3b7 {margin-bottom:16px;}.form-group.svelte-1pgg3b7 label:where(.svelte-1pgg3b7) {display:block;margin-bottom:6px;font-size:13px;font-weight:500;color:var(--text-primary);}.input.svelte-1pgg3b7 {width:50%;padding:8px 12px;font-size:13px;color:var(--text-primary);background:var(--input-bg);border:1px solid var(--input-border);border-radius:4px;outline:none;transition:border-color 0.2s;}.input.svelte-1pgg3b7:focus {border-color:var(--input-focus);}.input.svelte-1pgg3b7::placeholder {color:var(--text-secondary);}.button-group.svelte-1pgg3b7 {display:flex;gap:8px;margin-bottom:16px;}.sync-actions.svelte-1pgg3b7 {display:flex;gap:8px;margin-top:16px;padding-top:16px;border-top:1px solid var(--border-color);}.btn.svelte-1pgg3b7 {padding:8px 16px;font-size:13px;font-weight:500;border:none;border-radius:4px;cursor:pointer;transition:background-color 0.2s;}.btn.svelte-1pgg3b7:disabled {opacity:0.5;cursor:not-allowed;}.btn-primary.svelte-1pgg3b7 {color:#ffffff;background:var(--input-focus);}.btn-primary.svelte-1pgg3b7:hover:not(:disabled) {background:#005a9e;}.btn-secondary.svelte-1pgg3b7 {color:var(--text-primary);background:var(--btn-secondary-bg);}.btn-secondary.svelte-1pgg3b7:hover:not(:disabled) {background:var(--btn-secondary-hover);}`};function ym(e,t){Ir(t,!0),Wo(e,vm);let n=()=>Ws(Tf,`$_`,r),[r,i]=Gs(),a=N(``),o=N(``),s=N(``),c=N(!1),l=N(!1),u=N(!1),f=N(!1),p=N(!1);Ao(async()=>{let e=await cm();e&&(P(a,e.url,!0),P(o,e.username,!0),P(s,e.password,!0),P(p,!0))});async function m(){if(!V(a)||!V(o)){Ec.error(d,{description:n()(`settings.webdav.notConfigured`)});return}P(c,!0);try{let e={url:V(a),username:V(o),password:V(s)};await sm(e),await um.initialize(),Ec.success(d,{description:n()(`settings.webdav.configSaved`)})}catch(e){console.error(`Failed to save config:`,e),Ec.error(d,{description:n()(`settings.webdav.uploadFailed`)})}finally{P(c,!1)}}async function h(e){if(e?.preventDefault(),!V(a)||!V(o)){Ec.error(d,{description:n()(`settings.webdav.notConfigured`)});return}P(l,!0);try{await um.initialize({url:V(a),username:V(o),password:V(s)});let e=await um.testConnection();e.success?(P(p,!0),Ec.success(d,{description:n()(`settings.webdav.connectionSuccessful`)})):(P(p,!1),Ec.error(d,{description:`${n()(`settings.webdav.connectionFailed`)}: ${e.message}`}))}catch(e){console.error(`Connection test failed:`,e),P(p,!1),Ec.error(d,{description:n()(`settings.webdav.connectionFailed`)})}finally{P(l,!1)}}async function g(e){e.preventDefault(),V(p)?await m():await h()}var _=_m(),v=F(_),y=F(v,!0);k(v);var b=L(v,2),x=F(b,!0);k(b);var S=L(b,2),C=F(S),ee=F(C),te=F(ee,!0);k(ee);var ne=L(ee,2);fs(ne),k(C);var w=L(C,2),re=F(w),ie=F(re,!0);k(re);var ae=L(re,2);fs(ae),k(w);var oe=L(w,2),se=F(oe),ce=F(se,!0);k(se);var le=L(se,2);fs(le),k(oe);var ue=L(oe,2),de=F(ue),fe=e=>{var t=mm(),r=F(t,!0);k(t),R(e=>{t.disabled=V(l),G(r,e)},[()=>V(l)?n()(`settings.webdav.testing`):n()(`settings.webdav.testConnection`)]),W(e,t)};K(de,e=>{V(p)||e(fe)});var pe=L(de,2),me=e=>{var t=hm(),r=F(t,!0);k(t),R(e=>{t.disabled=V(c),G(r,e)},[()=>V(c)?n()(`settings.webdav.testing`):n()(`settings.webdav.save`)]),W(e,t)};K(pe,e=>{V(p)&&e(me)});var he=L(pe,2);he.__click=[dm,a,o,s,p,n];var ge=F(he,!0);k(he),k(ue),k(S);var _e=L(S,2),ve=e=>{var t=gm(),r=F(t);r.__click=[fm,u,n];var i=F(r,!0);k(r);var a=L(r,2);a.__click=[pm,f,n];var o=F(a,!0);k(a),k(t),R((e,t)=>{r.disabled=V(u),G(i,e),a.disabled=V(f),G(o,t)},[()=>V(u)?n()(`settings.webdav.uploading`):n()(`settings.webdav.upload`),()=>V(f)?n()(`settings.webdav.downloading`):n()(`settings.webdav.download`)]),W(e,t)};K(_e,e=>{V(p)&&e(ve)}),k(_),R((e,t,n,r,i,a,o,s,c)=>{G(y,e),G(x,t),G(te,n),q(ne,`placeholder`,r),G(ie,i),q(ae,`placeholder`,a),G(ce,o),q(le,`placeholder`,s),G(ge,c)},[()=>n()(`settings.webdav.title`),()=>n()(`settings.webdav.description`),()=>n()(`settings.webdav.url`),()=>n()(`settings.webdav.urlPlaceholder`),()=>n()(`settings.webdav.username`),()=>n()(`settings.webdav.usernamePlaceholder`),()=>n()(`settings.webdav.password`),()=>n()(`settings.webdav.passwordPlaceholder`),()=>n()(`settings.webdav.clear`)]),ao(`submit`,S,g),ks(ne,()=>V(a),e=>P(a,e)),ks(ae,()=>V(o),e=>P(o,e)),ks(le,()=>V(s),e=>P(s,e)),W(e,_),Lr(),i()}oo([`click`]);var bm=H(`<div class="settings-content svelte-maxwcm"><div class="settings-header svelte-maxwcm"><h2 class="svelte-maxwcm"> </h2> <p class="settings-description svelte-maxwcm"> </p></div> <!></div>`),xm={hash:`svelte-maxwcm`,code:`.settings-content.svelte-maxwcm {
    /* Light theme colors */--text-primary: #1e1e1e;--text-secondary: #616161;}

  @media (prefers-color-scheme: dark) {.settings-content.svelte-maxwcm {
      /* Dark theme colors */--text-primary: #cccccc;--text-secondary: #999999;}
  }.settings-content.svelte-maxwcm {padding:24px;color:var(--text-primary);max-height:100%;overflow-y:auto;}.settings-header.svelte-maxwcm {margin-bottom:32px;}.settings-header.svelte-maxwcm h2:where(.svelte-maxwcm) {margin:0 0 8px 0;font-size:20px;font-weight:600;}.settings-description.svelte-maxwcm {margin:0;color:var(--text-secondary);font-size:13px;}`};function Sm(e,t){Ir(t,!1),Wo(e,xm);let n=()=>Ws(Tf,`$_`,r),[r,i]=Gs();Ps();var a=bm(),o=F(a),s=F(o),c=F(s,!0);k(s);var l=L(s,2),u=F(l,!0);k(l),k(o);var d=L(o,2);ym(d,{}),k(a),R((e,t)=>{G(c,e),G(u,t)},[()=>n()(`settings.title`),()=>n()(`settings.description`)]),W(e,a),Lr(),i()}function Cm(e,t){e.target===e.currentTarget&&t()}var wm=H(`<div class="dialog-backdrop svelte-1ocnzw1" role="presentation"><div class="dialog svelte-1ocnzw1" role="dialog" aria-modal="true"><div class="dialog-container svelte-1ocnzw1"><!> <!></div></div></div>`),Tm=H(`<!> <!>`,1),Em={hash:`svelte-1ocnzw1`,code:`.dialog-backdrop.svelte-1ocnzw1 {
    /* Light theme colors */--backdrop-bg: rgba(0, 0, 0, 0.3);--dialog-bg: #ffffff;--dialog-border: #d4d4d4;--dialog-shadow: rgba(0, 0, 0, 0.2);--input-border: #e5e5e5;--icon-color: #616161;--text-primary: #1e1e1e;--text-secondary: #616161;--text-placeholder: #999999;--keybinding-bg: #f3f3f3;--keybinding-border: #cccccc;--keybinding-text: #424242;--hover-bg: #f9f9f9;--selected-bg: #e8e8e8;--highlight-bg: #ffff05;--highlight-text: #000000;--border-radius: 8px;}

  @media (prefers-color-scheme: dark) {.dialog-backdrop.svelte-1ocnzw1 {
      /* Dark theme colors */--backdrop-bg: rgba(0, 0, 0, 0.5);--dialog-bg: #252526;--dialog-border: #454545;--dialog-shadow: rgba(0, 0, 0, 0.4);--input-border: #454545;--icon-color: #cccccc;--text-primary: #cccccc;--text-secondary: #cccccc;--text-placeholder: #999999;--keybinding-bg: #3c3c3c;--keybinding-border: #555555;--keybinding-text: #cccccc;--hover-bg: #333739;--selected-bg: #2a2d2e;--highlight-bg: #ffff05;--highlight-text: #ffffff;}
  }.dialog-backdrop.svelte-1ocnzw1 {position:fixed;inset:0;background-color:var(--backdrop-bg);z-index:9999;display:flex;align-items:flex-start;justify-content:center;padding-top:10vh;}.dialog.svelte-1ocnzw1 {width:100%;max-width:640px;background-color:var(--dialog-bg);border:1px solid var(--dialog-border);border-radius:var(--border-radius);box-shadow:0 8px 32px var(--dialog-shadow);overflow:hidden;}.dialog-container.svelte-1ocnzw1 {display:flex;flex-direction:column;max-height:70vh;}`};function Dm(e,t){Ir(t,!0),Wo(e,Em);let n=N(null),r=N(null);Ef(window,`keydown`,e=>{(e.metaKey||e.ctrlKey)&&e.key.toLowerCase()===`k`&&(e.preventDefault(),V(n)?i():(P(n,`search`),Ja().then(()=>{V(r)?.focusInput()}))),e.key===`Escape`&&V(n)&&(e.preventDefault(),i())});function i(){P(n,null)}var a=Tm(),o=I(a);_l(o,{});var s=L(o,2),c=e=>{var t=wm();t.__click=[Cm,i];var a=F(t),o=F(a),s=F(o),c=e=>{Ns(im(e,{goSettings:()=>P(n,`settings`)}),e=>P(r,e,!0),()=>V(r))};K(s,e=>{V(n)===`search`&&e(c)});var l=L(s,2),u=e=>{Sm(e,{})};K(l,e=>{V(n)===`settings`&&e(u)}),k(o),k(a),k(t),Ds(3,a,()=>Dl,()=>({y:-20,duration:200})),Ds(3,t,()=>El,()=>({duration:150})),W(e,t)};K(s,e=>{V(n)&&e(c)}),W(e,a),Lr()}oo([`click`]);var Om=c({date:()=>jm,default:()=>Mm,search:()=>km,settings:()=>Am}),km,Am,jm,Mm,Nm=o((()=>{km={label:`Search chat history`,placeholder:`Search chat history...`,indexing:`Building index...`,noResults:`No matching results found`,resultsLabel:`Search results`,resultsCount:`{count} results`,tips:{navigate:`Navigate`,select:`Select`,close:`Close`},shortcut:{arrowUp:`Arrow up`,arrowDown:`Arrow down`,enter:`Enter`,escapeKey:`Escape key`}},Am={title:`Settings`,description:`Configure data sync and storage options`,placeholder:`No additional settings available at the moment.`,webdav:{title:`WebDAV Sync`,description:`Configure WebDAV server to sync chat history`,url:`Server URL`,urlPlaceholder:`https://example.com/webdav`,username:`Username`,usernamePlaceholder:`Enter username`,password:`Password`,passwordPlaceholder:`Enter password`,save:`Save Config`,clear:`Clear Config`,testConnection:`Test Connection`,upload:`Upload Data`,download:`Download Data`,uploadSuccess:`Data uploaded successfully`,uploadFailed:`Failed to upload data`,downloadSuccess:`Data downloaded and merged successfully`,downloadFailed:`Failed to download data`,configSaved:`Configuration saved`,configCleared:`Configuration cleared`,connectionSuccess:`Connection successful`,connectionFailed:`Connection failed`,notConfigured:`Please configure WebDAV server first`,uploading:`Uploading...`,downloading:`Downloading...`,testing:`Testing...`}},jm={locale:`en-US`,today:`Today`,yesterday:`Yesterday`,daysAgo:`{count} days ago`,weeksAgo:`{count} weeks ago`},Mm={search:km,settings:Am,date:jm}})),Pm=c({date:()=>Lm,default:()=>Rm,search:()=>Fm,settings:()=>Im}),Fm,Im,Lm,Rm,zm=o((()=>{Fm={label:`搜索聊天记录`,placeholder:`搜索聊天记录...`,indexing:`正在建立索引...`,noResults:`未找到匹配的结果`,resultsLabel:`搜索结果`,resultsCount:`{count} 条结果`,tips:{navigate:`导航`,select:`选择`,close:`关闭`},shortcut:{arrowUp:`向上箭头`,arrowDown:`向下箭头`,enter:`回车键`,escapeKey:`Escape 键`}},Im={title:`设置`,description:`配置数据同步与存储选项`,placeholder:`暂无其他配置项`,webdav:{title:`WebDAV 同步`,description:`配置 WebDAV 服务器以同步聊天记录`,url:`服务器地址`,urlPlaceholder:`https://example.com/webdav`,username:`用户名`,usernamePlaceholder:`输入用户名`,password:`密码`,passwordPlaceholder:`输入密码`,save:`保存配置`,clear:`清除配置`,testConnection:`测试连接`,upload:`上传数据`,download:`下载数据`,uploadSuccess:`数据上传成功`,uploadFailed:`数据上传失败`,downloadSuccess:`数据下载并合并成功`,downloadFailed:`数据下载失败`,configSaved:`配置已保存`,configCleared:`配置已清除`,connectionSuccess:`连接成功`,connectionFailed:`连接失败`,notConfigured:`请先配置 WebDAV 服务器`,uploading:`上传中...`,downloading:`下载中...`,testing:`测试中...`}},Lm={locale:`zh-CN`,today:`今天`,yesterday:`昨天`,daysAgo:`{count} 天前`,weeksAgo:`{count} 周前`},Rm={search:Fm,settings:Im,date:Lm}}));kd(`en`,()=>Promise.resolve().then(()=>(Nm(),Om))),kd(`zh`,()=>Promise.resolve().then(()=>(zm(),Pm))),Rd({fallbackLocale:`en`,initialLocale:tf()});function Bm(){let e=`copilot-chat-search`,t=document.getElementById(e);t||(t=document.createElement(`div`),t.id=e,document.documentElement.appendChild(t));let n=t.shadowRoot??t.attachShadow({mode:`open`});wo(Dm,{target:n})}var Vm=unsafeWindow.fetch,Hm=[];unsafeWindow.fetch=async(e,t)=>{if(!Hm.length)return Vm(e,t);let n={request:new Request(e,t),fetch:Vm};for(let e of Hm)if(e?.onBeforeFetch)try{let t=await e.onBeforeFetch(n);t instanceof Request?n.request=t:t instanceof Response&&(n.response=t)}catch(e){console.error(e)}n.response||=await Vm(n.request);for(let e of Hm)if(e?.onAfterFetch)try{let t=await e.onAfterFetch(n);t instanceof Response&&(n.response=t)}catch(e){console.error(e)}return n.response};function Um(e){Hm.push(e)}async function Wm(e){try{let t=await Se.getAllThreads(),n=new Set(e.threads.map(e=>e.id)),r=t.filter(e=>!n.has(e.id)).map(e=>e.data);return console.info(`[Merge] Server threads: ${e.threads.length}, Local additional threads: ${r.length}`),{threads:[...e.threads,...r]}}catch(t){return console.error(`[Merge] Failed to merge threads:`,t),e}}function Gm(){Um({onBeforeFetch:async({request:e,fetch:t})=>{if(e.method!==`GET`)return;let[n,r]=e.url?.match(/\/github\/chat\/threads\/([^/]+)\/messages/)??[];if(!r)return;try{let n=await t(e);if(!n.ok)throw Error(`Failed to fetch thread messages: ${n.statusText} ${await n.text()}`);let i=await n.clone().json();return Se.saveMessages(r,i.messages).catch(console.error),n}catch(e){console.warn(`[Intercept] Error fetching thread messages:`,e)}let i=await Se.getMessages(r);return i?(console.info(`[Intercept] Returning local messages for thread ${r}`,i),new Response(JSON.stringify({thread:await Se.getThread(r),messages:i.messages}),{status:200,statusText:`OK`,headers:{"Content-Type":`application/json`}})):e}}),Um({onBeforeFetch:async({request:e})=>{if(e.method!==`DELETE`)return;let[t,n]=e.url?.match(/\/github\/chat\/threads\/([^/]+)/)??[];if(n)try{await Se.deleteThread(n),console.info(`[Intercept] Deleted thread ${n} from local DB.`)}catch(e){console.error(`[Intercept] Failed to delete thread ${n}:`,e)}}}),Um({onAfterFetch:async({request:e,response:t})=>{if(e.method!==`POST`)return;let[n,r]=e.url?.match(/\/github\/chat\/threads\/([^/]+)\/messages/)??[];r&&t&&(await t.clone().text(),await xl.syncThread(r))}}),Um({onAfterFetch:async({request:e,response:t})=>{if(e.method===`GET`&&new URL(e.url).pathname===`/github/chat/threads`){try{let e=await t.clone().json(),n=await Wm(e);return setTimeout(()=>{Array.from(document.querySelectorAll(`li > a`)).filter(e=>e.className.startsWith(`SidebarListItem-module__link`)).forEach(async t=>{let[,n]=t.getAttribute(`href`)?.match(/\/copilot\/c\/([^/]+)/)??[];n&&(e.threads.find(e=>e.id===n)||(t.style.opacity=`0.6`))})},1e3),new Response(JSON.stringify(n),{status:t.status,statusText:t.statusText,headers:t.headers})}catch(e){console.error(`[Intercept] Failed to merge threads response:`,e)}return t}}})}async function Km(){console.info(`Initializing...`),Gm(),document.readyState===`complete`?xl.startAutoSync(30):window.addEventListener(`load`,()=>{xl.startAutoSync(30)}),Bm(),console.info(`Initialized.`)}Km()})();